cscope 15 /home/han/libnvpair -q 0000000810 0000134550
	@/home/han/libnvpair/isa_defs.h

28 #iâdef 
_SYS_ISA_DEFS_H


29 
	#_SYS_ISA_DEFS_H


	)

217 #ifdef 
__ýlu¥lus


225 #ià
defšed
(
__x86_64
è|| defšed(
__amd64
)

227 #ià!
defšed
(
__amd64
)

228 
	#__amd64


	)

231 #ià!
defšed
(
__x86
)

232 
	#__x86


	)

238 
	#_LITTLE_ENDIAN


	)

239 
	#_STACK_GROWS_DOWNWARD


	)

240 
	#_LONG_LONG_LTOH


	)

241 
	#_BIT_FIELDS_LTOH


	)

242 
	#_IEEE_754


	)

243 
	#_CHAR_IS_SIGNED


	)

244 
	#_BOOL_ALIGNMENT
 1

	)

245 
	#_CHAR_ALIGNMENT
 1

	)

246 
	#_SHORT_ALIGNMENT
 2

	)

247 
	#_INT_ALIGNMENT
 4

	)

248 
	#_FLOAT_ALIGNMENT
 4

	)

249 
	#_FLOAT_COMPLEX_ALIGNMENT
 4

	)

250 
	#_LONG_ALIGNMENT
 8

	)

251 
	#_LONG_LONG_ALIGNMENT
 8

	)

252 
	#_DOUBLE_ALIGNMENT
 8

	)

253 
	#_DOUBLE_COMPLEX_ALIGNMENT
 8

	)

254 
	#_LONG_DOUBLE_ALIGNMENT
 16

	)

255 
	#_LONG_DOUBLE_COMPLEX_ALIGNMENT
 16

	)

256 
	#_POINTER_ALIGNMENT
 8

	)

257 
	#_MAX_ALIGNMENT
 16

	)

258 
	#_ALIGNMENT_REQUIRED
 1

	)

263 
	#_LONG_LONG_ALIGNMENT_32
 4

	)

268 #ià!
defšed
(
_LP64
)

269 
	#_LP64


	)

271 #ià!
defšed
(
_I32LPx
è&& defšed(
_KERNEL
)

272 
	#_I32LPx


	)

274 
	#_MULTI_DATAMODEL


	)

275 
	#_SUNOS_VTOC_16


	)

276 
	#_DMA_USES_PHYSADDR


	)

277 
	#_FIRMWARE_NEEDS_FDISK


	)

278 
	#__i386_COMPAT


	)

279 
	#_PSM_MODULES


	)

280 
	#_RTC_CONFIG


	)

281 
	#_SOFT_HOSTID


	)

282 
	#_DONT_USE_1275_GENERIC_NAMES


	)

283 
	#_HAVE_CPUID_INSN


	)

290 #–ià
defšed
(
__i386
è|| defšed(
__i386__
)

292 #ià!
defšed
(
__i386
)

293 
	#__i386


	)

296 #ià!
defšed
(
__x86
)

297 
	#__x86


	)

303 
	#_LITTLE_ENDIAN


	)

304 
	#_STACK_GROWS_DOWNWARD


	)

305 
	#_LONG_LONG_LTOH


	)

306 
	#_BIT_FIELDS_LTOH


	)

307 
	#_IEEE_754


	)

308 
	#_CHAR_IS_SIGNED


	)

309 
	#_BOOL_ALIGNMENT
 1

	)

310 
	#_CHAR_ALIGNMENT
 1

	)

311 
	#_SHORT_ALIGNMENT
 2

	)

312 
	#_INT_ALIGNMENT
 4

	)

313 
	#_FLOAT_ALIGNMENT
 4

	)

314 
	#_FLOAT_COMPLEX_ALIGNMENT
 4

	)

315 
	#_LONG_ALIGNMENT
 4

	)

316 
	#_LONG_LONG_ALIGNMENT
 4

	)

317 
	#_DOUBLE_ALIGNMENT
 4

	)

318 
	#_DOUBLE_COMPLEX_ALIGNMENT
 4

	)

319 
	#_LONG_DOUBLE_ALIGNMENT
 4

	)

320 
	#_LONG_DOUBLE_COMPLEX_ALIGNMENT
 4

	)

321 
	#_POINTER_ALIGNMENT
 4

	)

322 
	#_MAX_ALIGNMENT
 4

	)

323 
	#_ALIGNMENT_REQUIRED
 0

	)

325 
	#_LONG_LONG_ALIGNMENT_32
 
_LONG_LONG_ALIGNMENT


	)

330 
	#_ILP32


	)

331 #ià!
defšed
(
_I32LPx
è&& defšed(
_KERNEL
)

332 
	#_I32LPx


	)

334 
	#_SUNOS_VTOC_16


	)

335 
	#_DMA_USES_PHYSADDR


	)

336 
	#_FIRMWARE_NEEDS_FDISK


	)

337 
	#_PSM_MODULES


	)

338 
	#_RTC_CONFIG


	)

339 
	#_SOFT_HOSTID


	)

340 
	#_DONT_USE_1275_GENERIC_NAMES


	)

341 
	#_HAVE_CPUID_INSN


	)

363 #–ià
defšed
(
__¥¬c
è|| defšed(
__¥¬cv9
è|| defšed(
__¥¬c__
)

364 #ià!
defšed
(
__¥¬c
)

365 
	#__¥¬c


	)

371 #ià
defšed
(
__¥¬cv8
è&& defšed(
__¥¬cv9
)

381 #ià!
defšed
(
__¥¬cv9
è&& !defšed(
__¥¬cv8
)

382 
	#__¥¬cv8


	)

389 
	#_BIG_ENDIAN


	)

390 
	#_STACK_GROWS_DOWNWARD


	)

391 
	#_LONG_LONG_HTOL


	)

392 
	#_BIT_FIELDS_HTOL


	)

393 
	#_IEEE_754


	)

394 
	#_CHAR_IS_SIGNED


	)

395 
	#_BOOL_ALIGNMENT
 1

	)

396 
	#_CHAR_ALIGNMENT
 1

	)

397 
	#_SHORT_ALIGNMENT
 2

	)

398 
	#_INT_ALIGNMENT
 4

	)

399 
	#_FLOAT_ALIGNMENT
 4

	)

400 
	#_FLOAT_COMPLEX_ALIGNMENT
 4

	)

401 
	#_LONG_LONG_ALIGNMENT
 8

	)

402 
	#_DOUBLE_ALIGNMENT
 8

	)

403 
	#_DOUBLE_COMPLEX_ALIGNMENT
 8

	)

404 
	#_ALIGNMENT_REQUIRED
 1

	)

409 
	#_SUNOS_VTOC_8


	)

410 
	#_DMA_USES_VIRTADDR


	)

411 
	#_NO_FDISK_PRESENT


	)

412 
	#_HAVE_TEM_FIRMWARE


	)

413 
	#_OBP


	)

419 #ià
defšed
(
__¥¬cv8
)

424 
	#_LONG_ALIGNMENT
 4

	)

425 
	#_LONG_DOUBLE_ALIGNMENT
 8

	)

426 
	#_LONG_DOUBLE_COMPLEX_ALIGNMENT
 8

	)

427 
	#_POINTER_ALIGNMENT
 4

	)

428 
	#_MAX_ALIGNMENT
 8

	)

430 
	#_LONG_LONG_ALIGNMENT_32
 
_LONG_LONG_ALIGNMENT


	)

435 
	#_ILP32


	)

436 #ià!
defšed
(
_I32LPx
è&& defšed(
_KERNEL
)

437 
	#_I32LPx


	)

444 #–ià
defšed
(
__¥¬cv9
)

449 
	#_LONG_ALIGNMENT
 8

	)

450 
	#_LONG_DOUBLE_ALIGNMENT
 16

	)

451 
	#_LONG_DOUBLE_COMPLEX_ALIGNMENT
 16

	)

452 
	#_POINTER_ALIGNMENT
 8

	)

453 
	#_MAX_ALIGNMENT
 16

	)

455 
	#_LONG_LONG_ALIGNMENT_32
 
_LONG_LONG_ALIGNMENT


	)

460 #ià!
defšed
(
_LP64
)

461 
	#_LP64


	)

463 #ià!
defšed
(
_I32LPx
)

464 
	#_I32LPx


	)

466 
	#_MULTI_DATAMODEL


	)

479 #ià
defšed
(
_ILP32
è&& defšed(
_LP64
)

483 #ifdef 
__ýlu¥lus


	@/home/han/libnvpair/libnvpair.c

26 
	~<uni¡d.h
>

27 
	~<¡ršg.h
>

28 
	~<sys/ty³s.h
>

29 
	~<š‰y³s.h
>

30 
	~<¡d¬g.h
>

32 
	#NOTE
(
s
)

	)

33 
	~"libnv·œ.h
"

47 
	#DEFINEOP
(
ÝÇme
, 
vty³
) \

49 (*
Ý
)(
nvli¡_´tùl
 *, *, 
nvli¡_t
 *, \

50 cÚ¡ *, 
vty³
); \

51 *
¬g
; \

52 } 
ÝÇme


	)

54 
	#DEFINEARROP
(
ÝÇme
, 
vty³
) \

56 (*
Ý
)(
nvli¡_´tùl
 *, *, 
nvli¡_t
 *, \

57 cÚ¡ *, 
vty³
, 
ušt_t
); \

58 *
¬g
; \

59 } 
ÝÇme


	)

61 
	snvli¡_´štÝs
 {

62 
DEFINEOP
(
´št_boÞ—n
, );

63 
DEFINEOP
(
´št_boÞ—n_v®ue
, 
boÞ—n_t
);

64 
DEFINEOP
(
´št_by‹
, 
uch¬_t
);

65 
DEFINEOP
(
´št_št8
, 
št8_t
);

66 
DEFINEOP
(
´št_ušt8
, 
ušt8_t
);

67 
DEFINEOP
(
´št_št16
, 
št16_t
);

68 
DEFINEOP
(
´št_ušt16
, 
ušt16_t
);

69 
DEFINEOP
(
´št_št32
, 
št32_t
);

70 
DEFINEOP
(
´št_ušt32
, 
ušt32_t
);

71 
DEFINEOP
(
´št_št64
, 
št64_t
);

72 
DEFINEOP
(
´št_ušt64
, 
ušt64_t
);

73 
DEFINEOP
(
´št_doubË
, );

74 
DEFINEOP
(
´št_¡ršg
, *);

75 
DEFINEOP
(
´št_h¹ime
, 
h¹ime_t
);

76 
DEFINEOP
(
´št_nvli¡
, 
nvli¡_t
 *);

77 
DEFINEARROP
(
´št_boÞ—n_¬¿y
, 
boÞ—n_t
 *);

78 
DEFINEARROP
(
´št_by‹_¬¿y
, 
uch¬_t
 *);

79 
DEFINEARROP
(
´št_št8_¬¿y
, 
št8_t
 *);

80 
DEFINEARROP
(
´št_ušt8_¬¿y
, 
ušt8_t
 *);

81 
DEFINEARROP
(
´št_št16_¬¿y
, 
št16_t
 *);

82 
DEFINEARROP
(
´št_ušt16_¬¿y
, 
ušt16_t
 *);

83 
DEFINEARROP
(
´št_št32_¬¿y
, 
št32_t
 *);

84 
DEFINEARROP
(
´št_ušt32_¬¿y
, 
ušt32_t
 *);

85 
DEFINEARROP
(
´št_št64_¬¿y
, 
št64_t
 *);

86 
DEFINEARROP
(
´št_ušt64_¬¿y
, 
ušt64_t
 *);

87 
DEFINEARROP
(
´št_¡ršg_¬¿y
, **);

88 
DEFINEARROP
(
´št_nvli¡_¬¿y
, 
nvli¡_t
 **);

91 
	snvli¡_´tùl
 {

92 
FILE
 *
	mnv´t_å
;

93 
nvli¡_šd’t_mode
 
	mnv´t_šd’t_mode
;

94 
	mnv´t_šd’t
;

95 
	mnv´t_šd’tšc
;

96 cÚ¡ *
	mnv´t_nmfmt
;

97 cÚ¡ *
	mnv´t_eomfmt
;

98 cÚ¡ *
	mnv´t_btwÇ¼fmt
;

99 
	mnv´t_btwÇ¼fmt_Æ
;

100 
nvli¡_´štÝs
 *
	mnv´t_dætÝs
;

101 
nvli¡_´štÝs
 *
	mnv´t_cu¡Ýs
;

104 
	#DFLTPRTOP
(
pùl
, 
ty³
) \

105 ((
pùl
)->
nv´t_dætÝs
->
´št_
##
ty³
.
Ý
)

	)

107 
	#DFLTPRTOPARG
(
pùl
, 
ty³
) \

108 ((
pùl
)->
nv´t_dætÝs
->
´št_
##
ty³
.
¬g
)

	)

110 
	#CUSTPRTOP
(
pùl
, 
ty³
) \

111 ((
pùl
)->
nv´t_cu¡Ýs
->
´št_
##
ty³
.
Ý
)

	)

113 
	#CUSTPRTOPARG
(
pùl
, 
ty³
) \

114 ((
pùl
)->
nv´t_cu¡Ýs
->
´št_
##
ty³
.
¬g
)

	)

116 
	#RENDER
(
pùl
, 
ty³
, 
nvl
, 
Çme
, 
v®
) \

118 
dÚe
 = 0; \

119 ià((
pùl
)->
nv´t_cu¡Ýs
 && 
	`CUSTPRTOP
Õùl, 
ty³
)) { \

120 
dÚe
 = 
	`CUSTPRTOP
(
pùl
, 
ty³
)(pctl, \

121 
	`CUSTPRTOPARG
(
pùl
, 
ty³
), 
nvl
, 
Çme
, 
v®
); \

123 ià(!
dÚe
) { \

124 (è
	`DFLTPRTOP
(
pùl
, 
ty³
)(pctl, \

125 
	`DFLTPRTOPARG
(
pùl
, 
ty³
), 
nvl
, 
Çme
, 
v®
); \

127 (è
	`årštf
(
pùl
->
nv´t_å
,…ùl->
nv´t_eomfmt
); \

128 }

	)

130 
	#ARENDER
(
pùl
, 
ty³
, 
nvl
, 
Çme
, 
¬½
, 
couÁ
) \

132 
dÚe
 = 0; \

133 ià((
pùl
)->
nv´t_cu¡Ýs
 && 
	`CUSTPRTOP
Õùl, 
ty³
)) { \

134 
dÚe
 = 
	`CUSTPRTOP
(
pùl
, 
ty³
)(pctl, \

135 
	`CUSTPRTOPARG
(
pùl
, 
ty³
), 
nvl
, 
Çme
, 
¬½
, 
couÁ
); \

137 ià(!
dÚe
) { \

138 (è
	`DFLTPRTOP
(
pùl
, 
ty³
)(pctl, \

139 
	`DFLTPRTOPARG
(
pùl
, 
ty³
), 
nvl
, 
Çme
, 
¬½
, 
couÁ
); \

141 (è
	`årštf
(
pùl
->
nv´t_å
,…ùl->
nv´t_eomfmt
); \

142 }

	)

144 
nvli¡_´št_w™h_šd’t
(
nvli¡_t
 *, 
nvli¡_´tùl_t
);

155 
	$šd’t
(
nvli¡_´tùl_t
 
pùl
, 
ÚemÜe
)

157 
d•th
;

159 
pùl
->
nv´t_šd’t_mode
) {

160 
NVLIST_INDENT_ABS
:

161 (è
	`årštf
(
pùl
->
nv´t_å
, "%*s",

162 
pùl
->
nv´t_šd’t
 + 
ÚemÜe
 *…ùl->
nv´t_šd’tšc
, "");

165 
NVLIST_INDENT_TABBED
:

166 
d•th
 = 
pùl
->
nv´t_šd’t
 + 
ÚemÜe
;

167 
d•th
-- > 0)

168 (è
	`årštf
(
pùl
->
nv´t_å
, "\t");

170 
	}
}

189 
	#NVLIST_PRTFUNC
(
ty³_ªd_v¬ŸÁ
, 
vty³
, 
±y³
, 
vfmt
) \

191 
nv´št_
##
	`ty³_ªd_v¬ŸÁ
(
nvli¡_´tùl_t
 
pùl
, *
´iv©e
, \

192 
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
vty³
 
v®ue
) \

194 
FILE
 *
å
 = 
pùl
->
nv´t_å
; \

195 
	`NOTE
(
	`ARGUNUSED
(
´iv©e
)) \

196 
	`NOTE
(
	`ARGUNUSED
(
nvl
)) \

197 
	`šd’t
(
pùl
, 1); \

198 (è
	`årštf
(
å
, 
pùl
->
nv´t_nmfmt
, 
Çme
); \

199 (è
	`årštf
(
å
, 
vfmt
, (
±y³
)
v®ue
); \

201 }

	)

203 
NVLIST_PRTFUNC
(
boÞ—n
, , , "%d")

204 
NVLIST_PRTFUNC
(
boÞ—n_v®ue
, 
boÞ—n_t
, , "%d")

205 
NVLIST_PRTFUNC
(
by‹
, 
uch¬_t
, uchar_t, "0x%2.2x")

206 
NVLIST_PRTFUNC
(
št8
, 
št8_t
, , "%d")

207 
NVLIST_PRTFUNC
(
ušt8
, 
ušt8_t
, uint8_t, "0x%x")

208 
NVLIST_PRTFUNC
(
št16
, 
št16_t
, int16_t, "%d")

209 
NVLIST_PRTFUNC
(
ušt16
, 
ušt16_t
, uint16_t, "0x%x")

210 
NVLIST_PRTFUNC
(
št32
, 
št32_t
, int32_t, "%d")

211 
NVLIST_PRTFUNC
(
ušt32
, 
ušt32_t
, uint32_t, "0x%x")

212 
NVLIST_PRTFUNC
(
št64
, 
št64_t
, 
lÚglÚg_t
, "%lld")

213 
NVLIST_PRTFUNC
(
ušt64
, 
ušt64_t
, 
u_lÚglÚg_t
, "0x%llx")

214 
NVLIST_PRTFUNC
(, , , "0x%f")

215 
NVLIST_PRTFUNC
(
¡ršg
, *, *, "%s")

216 
NVLIST_PRTFUNC
(
h¹ime
, 
h¹ime_t
, hrtime_t, "0x%llx")

222 
	#NVLIST_ARRPRTFUNC
(
ty³_ªd_v¬ŸÁ
, 
vty³
, 
±y³
, 
vfmt
) \

224 
nv­ršt_
##
	`ty³_ªd_v¬ŸÁ
(
nvli¡_´tùl_t
 
pùl
, *
´iv©e
, \

225 
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
vty³
 *
v®u•
, 
ušt_t
 
couÁ
) \

227 
FILE
 *
å
 = 
pùl
->
nv´t_å
; \

228 
ušt_t
 
i
; \

229 
	`NOTE
(
	`ARGUNUSED
(
´iv©e
)) \

230 
	`NOTE
(
	`ARGUNUSED
(
nvl
)) \

231 
i
 = 0; i < 
couÁ
; i++) { \

232 ià(
i
 =ð0 || 
pùl
->
nv´t_btwÇ¼fmt_Æ
) { \

233 
	`šd’t
(
pùl
, 1); \

234 (è
	`årštf
(
å
, 
pùl
->
nv´t_nmfmt
, 
Çme
); \

235 ià(
pùl
->
nv´t_btwÇ¼fmt_Æ
) \

236 (è
	`årštf
(
å
, "[%d]: ", 
i
); \

238 ià(
i
 != 0) \

239 (è
	`årštf
(
å
, 
pùl
->
nv´t_btwÇ¼fmt
); \

240 (è
	`årštf
(
å
, 
vfmt
, (
±y³
)
v®u•
[
i
]); \

243 }

	)

245 
NVLIST_ARRPRTFUNC
(
boÞ—n_¬¿y
, 
boÞ—n_t
, boolean_t, "%d")

246 
NVLIST_ARRPRTFUNC
(
by‹_¬¿y
, 
uch¬_t
, uchar_t, "0x%2.2x")

247 
NVLIST_ARRPRTFUNC
(
št8_¬¿y
, 
št8_t
, int8_t, "%d")

248 
NVLIST_ARRPRTFUNC
(
ušt8_¬¿y
, 
ušt8_t
, uint8_t, "0x%x")

249 
NVLIST_ARRPRTFUNC
(
št16_¬¿y
, 
št16_t
, int16_t, "%d")

250 
NVLIST_ARRPRTFUNC
(
ušt16_¬¿y
, 
ušt16_t
, uint16_t, "0x%x")

251 
NVLIST_ARRPRTFUNC
(
št32_¬¿y
, 
št32_t
, int32_t, "%d")

252 
NVLIST_ARRPRTFUNC
(
ušt32_¬¿y
, 
ušt32_t
, uint32_t, "0x%x")

253 
NVLIST_ARRPRTFUNC
(
št64_¬¿y
, 
št64_t
, 
lÚglÚg_t
, "%lld")

254 
NVLIST_ARRPRTFUNC
(
ušt64_¬¿y
, 
ušt64_t
, 
u_lÚglÚg_t
, "0x%llx")

255 
NVLIST_ARRPRTFUNC
(
¡ršg_¬¿y
, *, *, "%s")

259 
	$nv´št_nvli¡
(
nvli¡_´tùl_t
 
pùl
, *
´iv©e
,

260 
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,‚vli¡_ˆ*
v®ue
)

262 
FILE
 *
å
 = 
pùl
->
nv´t_å
;

264 
	`šd’t
(
pùl
, 1);

265 (è
	`årštf
(
å
, "% ðÓmbedded‚vli¡)\n", 
Çme
);

267 
pùl
->
nv´t_šd’t
 +ðpùl->
nv´t_šd’tšc
;

268 
	`nvli¡_´št_w™h_šd’t
(
v®ue
, 
pùl
);

269 
pùl
->
nv´t_šd’t
 -ðpùl->
nv´t_šd’tšc
;

271 
	`šd’t
(
pùl
, 1);

272 (è
	`årštf
(
å
, "Ónd %s)\n", 
Çme
);

275 
	}
}

279 
	$nv­ršt_nvli¡_¬¿y
(
nvli¡_´tùl_t
 
pùl
, *
´iv©e
,

280 
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,‚vli¡_ˆ**
v®u•
, 
ušt_t
 
couÁ
)

282 
FILE
 *
å
 = 
pùl
->
nv´t_å
;

283 
ušt_t
 
i
;

285 
	`šd’t
(
pùl
, 1);

286 (è
	`årštf
(
å
, "% ð×¼ay oàembedded‚vli¡s)\n", 
Çme
);

288 
i
 = 0; i < 
couÁ
; i++) {

289 
	`šd’t
(
pùl
, 1);

290 (è
	`årštf
(
å
, "(¡¬ˆ%s[%d])\n", 
Çme
, 
i
);

292 
pùl
->
nv´t_šd’t
 +ðpùl->
nv´t_šd’tšc
;

293 
	`nvli¡_´št_w™h_šd’t
(
v®u•
[
i
], 
pùl
);

294 
pùl
->
nv´t_šd’t
 -ðpùl->
nv´t_šd’tšc
;

296 
	`šd’t
(
pùl
, 1);

297 (è
	`årštf
(
å
, "Ónd %s[%d])\n", 
Çme
, 
i
);

301 
	}
}

312 
	$nvli¡_´tùl_£tde¡
(
nvli¡_´tùl_t
 
pùl
, 
FILE
 *
å
)

314 
pùl
->
nv´t_å
 = 
å
;

315 
	}
}

317 
FILE
 *

318 
	$nvli¡_´tùl_g‘de¡
(
nvli¡_´tùl_t
 
pùl
)

320  (
pùl
->
nv´t_å
);

321 
	}
}

325 
	$nvli¡_´tùl_£tšd’t
(
nvli¡_´tùl_t
 
pùl
, 
nvli¡_šd’t_mode
 
mode
,

326 
¡¬t
, 
šc
)

328 ià(
mode
 < 
NVLIST_INDENT_ABS
 || mod> 
NVLIST_INDENT_TABBED
)

329 
mode
 = 
NVLIST_INDENT_TABBED
;

331 ià(
¡¬t
 < 0)

332 
¡¬t
 = 0;

334 ià(
šc
 < 0)

335 
šc
 = 1;

337 
pùl
->
nv´t_šd’t_mode
 = 
mode
;

338 
pùl
->
nv´t_šd’t
 = 
¡¬t
;

339 
pùl
->
nv´t_šd’tšc
 = 
šc
;

340 
	}
}

343 
	$nvli¡_´tùl_došd’t
(
nvli¡_´tùl_t
 
pùl
, 
ÚemÜe
)

345 
	`šd’t
(
pùl
, 
ÚemÜe
);

346 
	}
}

350 
	$nvli¡_´tùl_£tfmt
(
nvli¡_´tùl_t
 
pùl
, 
nvli¡_´tùl_fmt
 
which
,

351 cÚ¡ *
fmt
)

353 
which
) {

354 
NVLIST_FMT_MEMBER_NAME
:

355 ià(
fmt
 =ð
NULL
)

356 
fmt
 = "%s = ";

357 
pùl
->
nv´t_nmfmt
 = 
fmt
;

360 
NVLIST_FMT_MEMBER_POSTAMBLE
:

361 ià(
fmt
 =ð
NULL
)

362 
fmt
 = "\n";

363 
pùl
->
nv´t_eomfmt
 = 
fmt
;

366 
NVLIST_FMT_BTWN_ARRAY
:

367 ià(
fmt
 =ð
NULL
) {

368 
pùl
->
nv´t_btwÇ¼fmt
 = " ";

369 
pùl
->
nv´t_btwÇ¼fmt_Æ
 = 0;

371 
pùl
->
nv´t_btwÇ¼fmt
 = 
fmt
;

372 
pùl
->
nv´t_btwÇ¼fmt_Æ
 = (
	`¡r¡r
(
fmt
, "\n"è!ð
NULL
);

379 
	}
}

383 
	$nvli¡_´tùl_dofmt
(
nvli¡_´tùl_t
 
pùl
, 
nvli¡_´tùl_fmt
 
which
, ...)

385 
FILE
 *
å
 = 
pùl
->
nv´t_å
;

386 
va_li¡
 
­
;

387 *
Çme
;

389 
	`va_¡¬t
(
­
, 
which
);

391 
which
) {

392 
NVLIST_FMT_MEMBER_NAME
:

393 
Çme
 = 
	`va_¬g
(
­
, *);

394 (è
	`årštf
(
å
, 
pùl
->
nv´t_nmfmt
, 
Çme
);

397 
NVLIST_FMT_MEMBER_POSTAMBLE
:

398 (è
	`årštf
(
å
, 
pùl
->
nv´t_eomfmt
);

401 
NVLIST_FMT_BTWN_ARRAY
:

402 (è
	`årštf
(
å
, 
pùl
->
nv´t_btwÇ¼fmt
); \

409 
	`va_’d
(
­
);

410 
	}
}

420 
	#NVLIST_PRINTCTL_REPLACE
(
ty³
, 
vty³
) \

422 
nvli¡_´tùlÝ_
##
	`ty³
(
nvli¡_´tùl_t
 
pùl
, \

423 (*
func
)(
nvli¡_´tùl_t
, *, 
nvli¡_t
 *, cÚ¡ *, 
vty³
), \

424 *
´iv©e
) \

426 
	`CUSTPRTOP
(
pùl
, 
ty³
èð
func
; \

427 
	`CUSTPRTOPARG
(
pùl
, 
ty³
èð
´iv©e
; \

428 }

	)

430 
	$NVLIST_PRINTCTL_REPLACE
(
boÞ—n
, )

431 
	$NVLIST_PRINTCTL_REPLACE
(
boÞ—n_v®ue
, 
boÞ—n_t
)

432 
	$NVLIST_PRINTCTL_REPLACE
(
by‹
, 
uch¬_t
)

433 
	$NVLIST_PRINTCTL_REPLACE
(
št8
, 
št8_t
)

434 
	$NVLIST_PRINTCTL_REPLACE
(
ušt8
, 
ušt8_t
)

435 
	$NVLIST_PRINTCTL_REPLACE
(
št16
, 
št16_t
)

436 
	$NVLIST_PRINTCTL_REPLACE
(
ušt16
, 
ušt16_t
)

437 
	$NVLIST_PRINTCTL_REPLACE
(
št32
, 
št32_t
)

438 
	$NVLIST_PRINTCTL_REPLACE
(
ušt32
, 
ušt32_t
)

439 
	$NVLIST_PRINTCTL_REPLACE
(
št64
, 
št64_t
)

440 
	$NVLIST_PRINTCTL_REPLACE
(
ušt64
, 
ušt64_t
)

441 
	$NVLIST_PRINTCTL_REPLACE
(, )

442 
	$NVLIST_PRINTCTL_REPLACE
(
¡ršg
, *)

443 
	$NVLIST_PRINTCTL_REPLACE
(
h¹ime
, 
h¹ime_t
)

444 
	$NVLIST_PRINTCTL_REPLACE
(
nvli¡
, 
nvli¡_t
 *)

446 
	#NVLIST_PRINTCTL_AREPLACE
(
ty³
, 
vty³
) \

448 
nvli¡_´tùlÝ_
##
	`ty³
(
nvli¡_´tùl_t
 
pùl
, \

449 (*
func
)(
nvli¡_´tùl_t
, *, 
nvli¡_t
 *, cÚ¡ *, 
vty³
, \

450 
ušt_t
), *
´iv©e
) \

452 
	`CUSTPRTOP
(
pùl
, 
ty³
èð
func
; \

453 
	`CUSTPRTOPARG
(
pùl
, 
ty³
èð
´iv©e
; \

454 
	}

	)
}

456 
	$NVLIST_PRINTCTL_AREPLACE
(
boÞ—n_¬¿y
, 
boÞ—n_t
 *)

457 
	$NVLIST_PRINTCTL_AREPLACE
(
by‹_¬¿y
, 
uch¬_t
 *)

458 
	$NVLIST_PRINTCTL_AREPLACE
(
št8_¬¿y
, 
št8_t
 *)

459 
	$NVLIST_PRINTCTL_AREPLACE
(
ušt8_¬¿y
, 
ušt8_t
 *)

460 
	$NVLIST_PRINTCTL_AREPLACE
(
št16_¬¿y
, 
št16_t
 *)

461 
	$NVLIST_PRINTCTL_AREPLACE
(
ušt16_¬¿y
, 
ušt16_t
 *)

462 
	$NVLIST_PRINTCTL_AREPLACE
(
št32_¬¿y
, 
št32_t
 *)

463 
	$NVLIST_PRINTCTL_AREPLACE
(
ušt32_¬¿y
, 
ušt32_t
 *)

464 
	$NVLIST_PRINTCTL_AREPLACE
(
št64_¬¿y
, 
št64_t
 *)

465 
	$NVLIST_PRINTCTL_AREPLACE
(
ušt64_¬¿y
, 
ušt64_t
 *)

466 
	$NVLIST_PRINTCTL_AREPLACE
(
¡ršg_¬¿y
, **)

467 
	$NVLIST_PRINTCTL_AREPLACE
(
nvli¡_¬¿y
, 
nvli¡_t
 **)

478 cÚ¡ 
nvli¡_´štÝs
 
deå¹Ýs
 = {

479 { 
nv´št_boÞ—n
, 
NULL
 },

480 { 
nv´št_boÞ—n_v®ue
, 
NULL
 },

481 { 
nv´št_by‹
, 
NULL
 },

482 { 
nv´št_št8
, 
NULL
 },

483 { 
nv´št_ušt8
, 
NULL
 },

484 { 
nv´št_št16
, 
NULL
 },

485 { 
nv´št_ušt16
, 
NULL
 },

486 { 
nv´št_št32
, 
NULL
 },

487 { 
nv´št_ušt32
, 
NULL
 },

488 { 
nv´št_št64
, 
NULL
 },

489 { 
nv´št_ušt64
, 
NULL
 },

490 { 
nv´št_doubË
, 
NULL
 },

491 { 
nv´št_¡ršg
, 
NULL
 },

492 { 
nv´št_h¹ime
, 
NULL
 },

493 { 
nv´št_nvli¡
, 
NULL
 },

494 { 
nv­ršt_boÞ—n_¬¿y
, 
NULL
 },

495 { 
nv­ršt_by‹_¬¿y
, 
NULL
 },

496 { 
nv­ršt_št8_¬¿y
, 
NULL
 },

497 { 
nv­ršt_ušt8_¬¿y
, 
NULL
 },

498 { 
nv­ršt_št16_¬¿y
, 
NULL
 },

499 { 
nv­ršt_ušt16_¬¿y
, 
NULL
 },

500 { 
nv­ršt_št32_¬¿y
, 
NULL
 },

501 { 
nv­ršt_ušt32_¬¿y
, 
NULL
 },

502 { 
nv­ršt_št64_¬¿y
, 
NULL
 },

503 { 
nv­ršt_ušt64_¬¿y
, 
NULL
 },

504 { 
nv­ršt_¡ršg_¬¿y
, 
NULL
 },

505 { 
nv­ršt_nvli¡_¬¿y
, 
NULL
 },

506 
	}
};

509 
	$´tùl_deçuÉs
(
FILE
 *
å
, 
nvli¡_´tùl
 *
pùl
,

510 
nvli¡_´štÝs
 *
Ýs
)

512 
pùl
->
nv´t_å
 = 
å
;

513 
pùl
->
nv´t_šd’t_mode
 = 
NVLIST_INDENT_TABBED
;

514 
pùl
->
nv´t_šd’t
 = 0;

515 
pùl
->
nv´t_šd’tšc
 = 1;

516 
pùl
->
nv´t_nmfmt
 = "%s = ";

517 
pùl
->
nv´t_eomfmt
 = "\n";

518 
pùl
->
nv´t_btwÇ¼fmt
 = " ";

519 
pùl
->
nv´t_btwÇ¼fmt_Æ
 = 0;

521 
pùl
->
nv´t_dætÝs
 = (
nvli¡_´štÝs
 *)&
deå¹Ýs
;

522 
pùl
->
nv´t_cu¡Ýs
 = 
Ýs
;

523 
	}
}

525 
nvli¡_´tùl_t


526 
	$nvli¡_´tùl_®loc
()

528 
nvli¡_´tùl
 *
pùl
;

529 
nvli¡_´štÝs
 *
Ýs
;

531 ià((
pùl
 = 
	`m®loc
( (*pùl))è=ð
NULL
)

532  (
NULL
);

534 ià((
Ýs
 = 
	`ÿÎoc
(1,  (*Ýs))è=ð
NULL
) {

535 
	`ä“
(
pùl
);

536  (
NULL
);

539 
	`´tùl_deçuÉs
(
¡dout
, 
pùl
, 
Ýs
);

541  (
pùl
);

542 
	}
}

545 
	$nvli¡_´tùl_ä“
(
nvli¡_´tùl_t
 
pùl
)

547 ià(
pùl
 !ð
NULL
) {

548 
	`ä“
(
pùl
->
nv´t_cu¡Ýs
);

549 
	`ä“
(
pùl
);

551 
	}
}

565 
	$nvli¡_´št_w™h_šd’t
(
nvli¡_t
 *
nvl
, 
nvli¡_´tùl_t
 
pùl
)

567 
FILE
 *
å
 = 
pùl
->
nv´t_å
;

568 *
Çme
;

569 
ušt_t
 
ÃËm
;

570 
nv·œ_t
 *
nvp
;

572 ià(
nvl
 =ð
NULL
)

575 
	`šd’t
(
pùl
, 0);

576 (è
	`årštf
(
å
, "nvli¡ v”siÚ: %d\n", 
	`NVL_VERSION
(
nvl
));

578 
nvp
 = 
	`nvli¡_Ãxt_nv·œ
(
nvl
, 
NULL
);

580 
nvp
) {

581 
d©a_ty³_t
 
ty³
 = 
	`nv·œ_ty³
(
nvp
);

583 
Çme
 = 
	`nv·œ_Çme
(
nvp
);

584 
ÃËm
 = 0;

586 
ty³
) {

587 
DATA_TYPE_BOOLEAN
: {

588 
	`RENDER
(
pùl
, 
boÞ—n
, 
nvl
, 
Çme
, 1);

591 
DATA_TYPE_BOOLEAN_VALUE
: {

592 
boÞ—n_t
 
v®
;

593 (è
	`nv·œ_v®ue_boÞ—n_v®ue
(
nvp
, &
v®
);

594 
	`RENDER
(
pùl
, 
boÞ—n_v®ue
, 
nvl
, 
Çme
, 
v®
);

597 
DATA_TYPE_BYTE
: {

598 
uch¬_t
 
v®
;

599 (è
	`nv·œ_v®ue_by‹
(
nvp
, &
v®
);

600 
	`RENDER
(
pùl
, 
by‹
, 
nvl
, 
Çme
, 
v®
);

603 
DATA_TYPE_INT8
: {

604 
št8_t
 
v®
;

605 (è
	`nv·œ_v®ue_št8
(
nvp
, &
v®
);

606 
	`RENDER
(
pùl
, 
št8
, 
nvl
, 
Çme
, 
v®
);

609 
DATA_TYPE_UINT8
: {

610 
ušt8_t
 
v®
;

611 (è
	`nv·œ_v®ue_ušt8
(
nvp
, &
v®
);

612 
	`RENDER
(
pùl
, 
ušt8
, 
nvl
, 
Çme
, 
v®
);

615 
DATA_TYPE_INT16
: {

616 
št16_t
 
v®
;

617 (è
	`nv·œ_v®ue_št16
(
nvp
, &
v®
);

618 
	`RENDER
(
pùl
, 
št16
, 
nvl
, 
Çme
, 
v®
);

621 
DATA_TYPE_UINT16
: {

622 
ušt16_t
 
v®
;

623 (è
	`nv·œ_v®ue_ušt16
(
nvp
, &
v®
);

624 
	`RENDER
(
pùl
, 
ušt16
, 
nvl
, 
Çme
, 
v®
);

627 
DATA_TYPE_INT32
: {

628 
št32_t
 
v®
;

629 (è
	`nv·œ_v®ue_št32
(
nvp
, &
v®
);

630 
	`RENDER
(
pùl
, 
št32
, 
nvl
, 
Çme
, 
v®
);

633 
DATA_TYPE_UINT32
: {

634 
ušt32_t
 
v®
;

635 (è
	`nv·œ_v®ue_ušt32
(
nvp
, &
v®
);

636 
	`RENDER
(
pùl
, 
ušt32
, 
nvl
, 
Çme
, 
v®
);

639 
DATA_TYPE_INT64
: {

640 
št64_t
 
v®
;

641 (è
	`nv·œ_v®ue_št64
(
nvp
, &
v®
);

642 
	`RENDER
(
pùl
, 
št64
, 
nvl
, 
Çme
, 
v®
);

645 
DATA_TYPE_UINT64
: {

646 
ušt64_t
 
v®
;

647 (è
	`nv·œ_v®ue_ušt64
(
nvp
, &
v®
);

648 
	`RENDER
(
pùl
, 
ušt64
, 
nvl
, 
Çme
, 
v®
);

651 
DATA_TYPE_DOUBLE
: {

652 
v®
;

653 (è
	`nv·œ_v®ue_doubË
(
nvp
, &
v®
);

654 
	`RENDER
(
pùl
, , 
nvl
, 
Çme
, 
v®
);

657 
DATA_TYPE_STRING
: {

658 *
v®
;

659 (è
	`nv·œ_v®ue_¡ršg
(
nvp
, &
v®
);

660 
	`RENDER
(
pùl
, 
¡ršg
, 
nvl
, 
Çme
, 
v®
);

663 
DATA_TYPE_BOOLEAN_ARRAY
: {

664 
boÞ—n_t
 *
v®
;

665 (è
	`nv·œ_v®ue_boÞ—n_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

666 
	`ARENDER
(
pùl
, 
boÞ—n_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

669 
DATA_TYPE_BYTE_ARRAY
: {

670 
uch¬_t
 *
v®
;

671 (è
	`nv·œ_v®ue_by‹_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

672 
	`ARENDER
(
pùl
, 
by‹_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

675 
DATA_TYPE_INT8_ARRAY
: {

676 
št8_t
 *
v®
;

677 (è
	`nv·œ_v®ue_št8_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

678 
	`ARENDER
(
pùl
, 
št8_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

681 
DATA_TYPE_UINT8_ARRAY
: {

682 
ušt8_t
 *
v®
;

683 (è
	`nv·œ_v®ue_ušt8_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

684 
	`ARENDER
(
pùl
, 
ušt8_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

687 
DATA_TYPE_INT16_ARRAY
: {

688 
št16_t
 *
v®
;

689 (è
	`nv·œ_v®ue_št16_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

690 
	`ARENDER
(
pùl
, 
št16_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

693 
DATA_TYPE_UINT16_ARRAY
: {

694 
ušt16_t
 *
v®
;

695 (è
	`nv·œ_v®ue_ušt16_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

696 
	`ARENDER
(
pùl
, 
ušt16_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

699 
DATA_TYPE_INT32_ARRAY
: {

700 
št32_t
 *
v®
;

701 (è
	`nv·œ_v®ue_št32_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

702 
	`ARENDER
(
pùl
, 
št32_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

705 
DATA_TYPE_UINT32_ARRAY
: {

706 
ušt32_t
 *
v®
;

707 (è
	`nv·œ_v®ue_ušt32_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

708 
	`ARENDER
(
pùl
, 
ušt32_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

711 
DATA_TYPE_INT64_ARRAY
: {

712 
št64_t
 *
v®
;

713 (è
	`nv·œ_v®ue_št64_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

714 
	`ARENDER
(
pùl
, 
št64_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

717 
DATA_TYPE_UINT64_ARRAY
: {

718 
ušt64_t
 *
v®
;

719 (è
	`nv·œ_v®ue_ušt64_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

720 
	`ARENDER
(
pùl
, 
ušt64_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

723 
DATA_TYPE_STRING_ARRAY
: {

724 **
v®
;

725 (è
	`nv·œ_v®ue_¡ršg_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

726 
	`ARENDER
(
pùl
, 
¡ršg_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

729 
DATA_TYPE_HRTIME
: {

730 
h¹ime_t
 
v®
;

731 (è
	`nv·œ_v®ue_h¹ime
(
nvp
, &
v®
);

732 
	`RENDER
(
pùl
, 
h¹ime
, 
nvl
, 
Çme
, 
v®
);

735 
DATA_TYPE_NVLIST
: {

736 
nvli¡_t
 *
v®
;

737 (è
	`nv·œ_v®ue_nvli¡
(
nvp
, &
v®
);

738 
	`RENDER
(
pùl
, 
nvli¡
, 
nvl
, 
Çme
, 
v®
);

741 
DATA_TYPE_NVLIST_ARRAY
: {

742 
nvli¡_t
 **
v®
;

743 (è
	`nv·œ_v®ue_nvli¡_¬¿y
(
nvp
, &
v®
, &
ÃËm
);

744 
	`ARENDER
(
pùl
, 
nvli¡_¬¿y
, 
nvl
, 
Çme
, 
v®
, 
ÃËm
);

748 (è
	`årštf
(
å
, " unknowÀd©¨ty³ (%d)", 
ty³
);

751 
nvp
 = 
	`nvli¡_Ãxt_nv·œ
(
nvl
,‚vp);

753 
	}
}

756 
	$nvli¡_´št
(
FILE
 *
å
, 
nvli¡_t
 *
nvl
)

758 
nvli¡_´tùl
 
pc
;

760 
	`´tùl_deçuÉs
(
å
, &
pc
, 
NULL
);

761 
	`nvli¡_´št_w™h_šd’t
(
nvl
, &
pc
);

762 
	}
}

765 
	$nvli¡_´t
(
nvli¡_t
 *
nvl
, 
nvli¡_´tùl_t
 
pùl
)

767 
	`nvli¡_´št_w™h_šd’t
(
nvl
, 
pùl
);

768 
	}
}

770 
	#NVP
(
–em
, 
ty³
, 
vty³
, 
±y³
, 
fÜm©
) { \

771 
vty³
 
v®ue
; \

773 (è
nv·œ_v®ue_
##
	`ty³
(
–em
, &
v®ue
); \

774 (è
	`´štf
("%*s%s: " 
fÜm©
 "\n", 
šd’t
, "", \

775 
	`nv·œ_Çme
(
–em
), (
±y³
)
v®ue
); \

776 }

	)

778 
	#NVPA
(
–em
, 
ty³
, 
vty³
, 
±y³
, 
fÜm©
) { \

779 
ušt_t
 
i
, 
couÁ
; \

780 
vty³
 *
v®ue
; \

782 (è
nv·œ_v®ue_
##
	`ty³
(
–em
, &
v®ue
, &
couÁ
); \

783 
i
 = 0; i < 
couÁ
; i++) { \

784 (è
	`´štf
("%*s%s[%d]: " 
fÜm©
 "\n", 
šd’t
, "", \

785 
	`nv·œ_Çme
(
–em
), 
i
, (
±y³
)
v®ue
[i]); \

787 }

	)

793 
	$dump_nvli¡
(
nvli¡_t
 *
li¡
, 
šd’t
)

795 
nv·œ_t
 *
–em
 = 
NULL
;

796 
boÞ—n_t
 
boÞ_v®ue
;

797 
nvli¡_t
 *
nvli¡_v®ue
;

798 
nvli¡_t
 **
nvli¡_¬¿y_v®ue
;

799 
ušt_t
 
i
, 
couÁ
;

801 ià(
li¡
 =ð
NULL
) {

805 (
–em
 = 
	`nvli¡_Ãxt_nv·œ
(
li¡
,ƒËm)è!ð
NULL
) {

806 
	`nv·œ_ty³
(
–em
)) {

807 
DATA_TYPE_BOOLEAN
:

808 (è
	`´štf
("%*s%s\n", 
šd’t
, "", 
	`nv·œ_Çme
(
–em
));

811 
DATA_TYPE_BOOLEAN_VALUE
:

812 (è
	`nv·œ_v®ue_boÞ—n_v®ue
(
–em
, &
boÞ_v®ue
);

813 (è
	`´štf
("%*s%s: %s\n", 
šd’t
, "",

814 
	`nv·œ_Çme
(
–em
), 
boÞ_v®ue
 ? "true" : "false");

817 
DATA_TYPE_BYTE
:

818 
	`NVP
(
–em
, 
by‹
, 
uch¬_t
, , "%u");

821 
DATA_TYPE_INT8
:

822 
	`NVP
(
–em
, 
št8
, 
št8_t
, , "%d");

825 
DATA_TYPE_UINT8
:

826 
	`NVP
(
–em
, 
ušt8
, 
ušt8_t
, , "%u");

829 
DATA_TYPE_INT16
:

830 
	`NVP
(
–em
, 
št16
, 
št16_t
, , "%d");

833 
DATA_TYPE_UINT16
:

834 
	`NVP
(
–em
, 
ušt16
, 
ušt16_t
, , "%u");

837 
DATA_TYPE_INT32
:

838 
	`NVP
(
–em
, 
št32
, 
št32_t
, , "%ld");

841 
DATA_TYPE_UINT32
:

842 
	`NVP
(
–em
, 
ušt32
, 
ušt32_t
, 
ulÚg_t
, "%lu");

845 
DATA_TYPE_INT64
:

846 
	`NVP
(
–em
, 
št64
, 
št64_t
, 
lÚglÚg_t
, "%lld");

849 
DATA_TYPE_UINT64
:

850 
	`NVP
(
–em
, 
ušt64
, 
ušt64_t
, 
u_lÚglÚg_t
, "%llu");

853 
DATA_TYPE_STRING
:

854 
	`NVP
(
–em
, 
¡ršg
, *, *, "'%s'");

857 
DATA_TYPE_BYTE_ARRAY
:

858 
	`NVPA
(
–em
, 
by‹_¬¿y
, 
uch¬_t
, , "%u");

861 
DATA_TYPE_INT8_ARRAY
:

862 
	`NVPA
(
–em
, 
št8_¬¿y
, 
št8_t
, , "%d");

865 
DATA_TYPE_UINT8_ARRAY
:

866 
	`NVPA
(
–em
, 
ušt8_¬¿y
, 
ušt8_t
, , "%u");

869 
DATA_TYPE_INT16_ARRAY
:

870 
	`NVPA
(
–em
, 
št16_¬¿y
, 
št16_t
, , "%d");

873 
DATA_TYPE_UINT16_ARRAY
:

874 
	`NVPA
(
–em
, 
ušt16_¬¿y
, 
ušt16_t
, , "%u");

877 
DATA_TYPE_INT32_ARRAY
:

878 
	`NVPA
(
–em
, 
št32_¬¿y
, 
št32_t
, , "%ld");

881 
DATA_TYPE_UINT32_ARRAY
:

882 
	`NVPA
(
–em
, 
ušt32_¬¿y
, 
ušt32_t
, 
ulÚg_t
, "%lu");

885 
DATA_TYPE_INT64_ARRAY
:

886 
	`NVPA
(
–em
, 
št64_¬¿y
, 
št64_t
, 
lÚglÚg_t
, "%lld");

889 
DATA_TYPE_UINT64_ARRAY
:

890 
	`NVPA
(
–em
, 
ušt64_¬¿y
, 
ušt64_t
, 
u_lÚglÚg_t
,

894 
DATA_TYPE_STRING_ARRAY
:

895 
	`NVPA
(
–em
, 
¡ršg_¬¿y
, *, *, "'%s'");

898 
DATA_TYPE_NVLIST
:

899 (è
	`nv·œ_v®ue_nvli¡
(
–em
, &
nvli¡_v®ue
);

900 (è
	`´štf
("%*s%s:\n", 
šd’t
, "",

901 
	`nv·œ_Çme
(
–em
));

902 
	`dump_nvli¡
(
nvli¡_v®ue
, 
šd’t
 + 4);

905 
DATA_TYPE_NVLIST_ARRAY
:

906 (è
	`nv·œ_v®ue_nvli¡_¬¿y
(
–em
,

907 &
nvli¡_¬¿y_v®ue
, &
couÁ
);

908 
i
 = 0; i < 
couÁ
; i++) {

909 (è
	`´štf
("%*s%s[%u]:\n", 
šd’t
, "",

910 
	`nv·œ_Çme
(
–em
), 
i
);

911 
	`dump_nvli¡
(
nvli¡_¬¿y_v®ue
[
i
], 
šd’t
 + 4);

916 (è
	`´štf
("bad configype %d for %s\n",

917 
	`nv·œ_ty³
(
–em
), 
	`nv·œ_Çme
(elem));

920 
	}
}

947 
	$nv·œ_v®ue_m©ch_»gex
(
nv·œ_t
 *
nvp
, 
ai
,

948 *
v®ue
, 
»gex_t
 *
v®ue_»gex
, **
•
)

950 *
ev®ue
;

951 
ušt_t
 
a_Ën
;

952 
¤
;

954 ià(
•
)

955 *
•
 = 
NULL
;

957 ià((
nvp
 =ð
NULL
è|| (
v®ue
 == NULL))

961 ià((
	`nv·œ_ty³_is_¬¿y
(
nvp
è&& (
ai
 < 0)) ||

962 (!
	`nv·œ_ty³_is_¬¿y
(
nvp
è&& (
ai
 >= 0)))

966 ià((
	`nv·œ_ty³
(
nvp
è!ð
DATA_TYPE_STRING
) &&

967 (
	`nv·œ_ty³
(
nvp
è!ð
DATA_TYPE_STRING_ARRAY
)) {

968 
v®ue
 +ð
	`¡r¥n
(value, " \t");

969 
ev®ue
 = 
v®ue
 + 
	`¡rc¥n
(value, " \t");

970 ià(*
ev®ue
) {

971 ià(
•
)

972 *
•
 = 
ev®ue
;

977 
¤
 = 
EOF
;

978 
	`nv·œ_ty³
(
nvp
)) {

979 
DATA_TYPE_STRING
: {

980 *
v®
;

983 ià(
	`nv·œ_v®ue_¡ršg
(
nvp
, &
v®
) == 0) {

984 ià(
v®ue_»gex
) {

985 ià(
	`»gexec
(
v®ue_»gex
, 
v®
,

986 (
size_t
)0, 
NULL
, 0) == 0)

989 ià(
	`¡rcmp
(
v®ue
, 
v®
) == 0)

995 
DATA_TYPE_STRING_ARRAY
: {

996 **
v®_¬¿y
;

999 ià((
	`nv·œ_v®ue_¡ršg_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1000 (
ai
 < 
a_Ën
)) {

1001 ià(
v®ue_»gex
) {

1002 ià(
	`»gexec
(
v®ue_»gex
, 
v®_¬¿y
[
ai
],

1003 (
size_t
)0, 
NULL
, 0) == 0)

1006 ià(
	`¡rcmp
(
v®ue
, 
v®_¬¿y
[
ai
]) == 0)

1012 
DATA_TYPE_BYTE
: {

1013 
uch¬_t
 
v®
, 
v®_¬g
;

1016 
¤
 = 
	`ssÿnf
(
v®ue
, "%c", &
v®_¬g
);

1017 ià((
¤
 =ð1è&& (
	`nv·œ_v®ue_by‹
(
nvp
, &
v®
) == 0) &&

1018 (
v®
 =ð
v®_¬g
))

1022 
DATA_TYPE_BYTE_ARRAY
: {

1023 
uch¬_t
 *
v®_¬¿y
, 
v®_¬g
;

1027 
¤
 = 
	`ssÿnf
(
v®ue
, "%c", &
v®_¬g
);

1028 ià((
¤
 == 1) &&

1029 (
	`nv·œ_v®ue_by‹_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1030 (
ai
 < 
a_Ën
) &&

1031 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1035 
DATA_TYPE_INT8
: {

1036 
št8_t
 
v®
, 
v®_¬g
;

1039 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi8
, &
v®_¬g
);

1040 ià((
¤
 == 1) &&

1041 (
	`nv·œ_v®ue_št8
(
nvp
, &
v®
) == 0) &&

1042 (
v®
 =ð
v®_¬g
))

1046 
DATA_TYPE_INT8_ARRAY
: {

1047 
št8_t
 *
v®_¬¿y
, 
v®_¬g
;

1050 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi8
, &
v®_¬g
);

1051 ià((
¤
 == 1) &&

1052 (
	`nv·œ_v®ue_št8_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1053 (
ai
 < 
a_Ën
) &&

1054 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1058 
DATA_TYPE_UINT8
: {

1059 
ušt8_t
 
v®
, 
v®_¬g
;

1062 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi8
, (
št8_t
 *)&
v®_¬g
);

1063 ià((
¤
 == 1) &&

1064 (
	`nv·œ_v®ue_ušt8
(
nvp
, &
v®
) == 0) &&

1065 (
v®
 =ð
v®_¬g
))

1069 
DATA_TYPE_UINT8_ARRAY
: {

1070 
ušt8_t
 *
v®_¬¿y
, 
v®_¬g
;

1073 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi8
, (
št8_t
 *)&
v®_¬g
);

1074 ià((
¤
 == 1) &&

1075 (
	`nv·œ_v®ue_ušt8_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1076 (
ai
 < 
a_Ën
) &&

1077 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1081 
DATA_TYPE_INT16
: {

1082 
št16_t
 
v®
, 
v®_¬g
;

1085 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi16
, &
v®_¬g
);

1086 ià((
¤
 == 1) &&

1087 (
	`nv·œ_v®ue_št16
(
nvp
, &
v®
) == 0) &&

1088 (
v®
 =ð
v®_¬g
))

1092 
DATA_TYPE_INT16_ARRAY
: {

1093 
št16_t
 *
v®_¬¿y
, 
v®_¬g
;

1096 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi16
, &
v®_¬g
);

1097 ià((
¤
 == 1) &&

1098 (
	`nv·œ_v®ue_št16_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1099 (
ai
 < 
a_Ën
) &&

1100 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1104 
DATA_TYPE_UINT16
: {

1105 
ušt16_t
 
v®
, 
v®_¬g
;

1108 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi16
, (
št16_t
 *)&
v®_¬g
);

1109 ià((
¤
 == 1) &&

1110 (
	`nv·œ_v®ue_ušt16
(
nvp
, &
v®
) == 0) &&

1111 (
v®
 =ð
v®_¬g
))

1115 
DATA_TYPE_UINT16_ARRAY
: {

1116 
ušt16_t
 *
v®_¬¿y
, 
v®_¬g
;

1119 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi16
, (
št16_t
 *)&
v®_¬g
);

1120 ià((
¤
 == 1) &&

1121 (
	`nv·œ_v®ue_ušt16_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1122 (
ai
 < 
a_Ën
) &&

1123 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1127 
DATA_TYPE_INT32
: {

1128 
št32_t
 
v®
, 
v®_¬g
;

1131 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi32
, &
v®_¬g
);

1132 ià((
¤
 == 1) &&

1133 (
	`nv·œ_v®ue_št32
(
nvp
, &
v®
) == 0) &&

1134 (
v®
 =ð
v®_¬g
))

1138 
DATA_TYPE_INT32_ARRAY
: {

1139 
št32_t
 *
v®_¬¿y
, 
v®_¬g
;

1142 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi32
, &
v®_¬g
);

1143 ià((
¤
 == 1) &&

1144 (
	`nv·œ_v®ue_št32_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1145 (
ai
 < 
a_Ën
) &&

1146 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1150 
DATA_TYPE_UINT32
: {

1151 
ušt32_t
 
v®
, 
v®_¬g
;

1154 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi32
, (
št32_t
 *)&
v®_¬g
);

1155 ià((
¤
 == 1) &&

1156 (
	`nv·œ_v®ue_ušt32
(
nvp
, &
v®
) == 0) &&

1157 (
v®
 =ð
v®_¬g
))

1161 
DATA_TYPE_UINT32_ARRAY
: {

1162 
ušt32_t
 *
v®_¬¿y
, 
v®_¬g
;

1165 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi32
, (
št32_t
 *)&
v®_¬g
);

1166 ià((
¤
 == 1) &&

1167 (
	`nv·œ_v®ue_ušt32_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1168 (
ai
 < 
a_Ën
) &&

1169 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1173 
DATA_TYPE_INT64
: {

1174 
št64_t
 
v®
, 
v®_¬g
;

1177 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi64
, &
v®_¬g
);

1178 ià((
¤
 == 1) &&

1179 (
	`nv·œ_v®ue_št64
(
nvp
, &
v®
) == 0) &&

1180 (
v®
 =ð
v®_¬g
))

1184 
DATA_TYPE_INT64_ARRAY
: {

1185 
št64_t
 *
v®_¬¿y
, 
v®_¬g
;

1188 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi64
, &
v®_¬g
);

1189 ià((
¤
 == 1) &&

1190 (
	`nv·œ_v®ue_št64_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1191 (
ai
 < 
a_Ën
) &&

1192 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1196 
DATA_TYPE_UINT64
: {

1197 
ušt64_t
 
v®_¬g
, 
v®
;

1200 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi64
, (
št64_t
 *)&
v®_¬g
);

1201 ià((
¤
 == 1) &&

1202 (
	`nv·œ_v®ue_ušt64
(
nvp
, &
v®
) == 0) &&

1203 (
v®
 =ð
v®_¬g
))

1207 
DATA_TYPE_UINT64_ARRAY
: {

1208 
ušt64_t
 *
v®_¬¿y
, 
v®_¬g
;

1211 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi64
, (
št64_t
 *)&
v®_¬g
);

1212 ià((
¤
 == 1) &&

1213 (
	`nv·œ_v®ue_ušt64_¬¿y
(
nvp
, &
v®_¬¿y
, &
a_Ën
) == 0) &&

1214 (
ai
 < 
a_Ën
) &&

1215 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1219 
DATA_TYPE_BOOLEAN_VALUE
: {

1220 
ušt32_t
 
v®_¬g
;

1221 
boÞ—n_t
 
v®
;

1224 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi32
, &
v®_¬g
);

1225 ià((
¤
 == 1) &&

1226 (
	`nv·œ_v®ue_boÞ—n_v®ue
(
nvp
, &
v®
) == 0) &&

1227 (
v®
 =ð
v®_¬g
))

1231 
DATA_TYPE_BOOLEAN_ARRAY
: {

1232 
boÞ—n_t
 *
v®_¬¿y
;

1233 
ušt32_t
 
v®_¬g
;

1236 
¤
 = 
	`ssÿnf
(
v®ue
, "%"
SCNi32
, &
v®_¬g
);

1237 ià((
¤
 == 1) &&

1238 (
	`nv·œ_v®ue_boÞ—n_¬¿y
(
nvp
,

1239 &
v®_¬¿y
, &
a_Ën
) == 0) &&

1240 (
ai
 < 
a_Ën
) &&

1241 (
v®_¬¿y
[
ai
] =ð
v®_¬g
))

1245 
DATA_TYPE_HRTIME
:

1246 
DATA_TYPE_NVLIST
:

1247 
DATA_TYPE_NVLIST_ARRAY
:

1248 
DATA_TYPE_BOOLEAN
:

1249 
DATA_TYPE_DOUBLE
:

1250 
DATA_TYPE_UNKNOWN
:

1262 ià(
¤
 != 1) {

1263 ià(
•
)

1264 *
•
 = 
v®ue
;

1269 
	}
}

1272 
	$nv·œ_v®ue_m©ch
(
nv·œ_t
 *
nvp
, 
ai
, *
v®ue
, **
•
)

1274  (
	`nv·œ_v®ue_m©ch_»gex
(
nvp
, 
ai
, 
v®ue
, 
NULL
, 
•
));

1275 
	}
}

	@/home/han/libnvpair/libnvpair.h

25 #iâdef 
_LIBNVPAIR_H


26 
	#_LIBNVPAIR_H


	)

28 
	~"nv·œ.h
"

29 
	~<¡dlib.h
>

30 
	~<¡dio.h
>

31 
	~<»gex.h
>

33 #ifdef 
__ýlu¥lus


44 
nv·œ_v®ue_m©ch
(
nv·œ_t
 *, , *, **);

45 
nv·œ_v®ue_m©ch_»gex
(
nv·œ_t
 *, , *, 
»gex_t
 *,

48 
nvli¡_´št
(
FILE
 *, 
nvli¡_t
 *);

49 
dump_nvli¡
(
nvli¡_t
 *, );

82 
nvli¡_´tùl
 *
	tnvli¡_´tùl_t
;

84 
	envli¡_šd’t_mode
 {

85 
	gNVLIST_INDENT_ABS
,

86 
	gNVLIST_INDENT_TABBED


89 
nvli¡_´tùl_t
 
nvli¡_´tùl_®loc
();

90 
nvli¡_´tùl_ä“
(
nvli¡_´tùl_t
);

91 
nvli¡_´t
(
nvli¡_t
 *, 
nvli¡_´tùl_t
);

94 
nvli¡_´tùl_£tde¡
(
nvli¡_´tùl_t
, 
FILE
 *);

95 
FILE
 *
nvli¡_´tùl_g‘de¡
(
nvli¡_´tùl_t
);

98 
nvli¡_´tùl_£tšd’t
(
nvli¡_´tùl_t
, 
nvli¡_šd’t_mode
,

100 
nvli¡_´tùl_došd’t
(
nvli¡_´tùl_t
, );

102 
	envli¡_´tùl_fmt
 {

103 
	gNVLIST_FMT_MEMBER_NAME
,

104 
	gNVLIST_FMT_MEMBER_POSTAMBLE
,

105 
	gNVLIST_FMT_BTWN_ARRAY


108 
nvli¡_´tùl_£tfmt
(
nvli¡_´tùl_t
, 
nvli¡_´tùl_fmt
,

110 
nvli¡_´tùl_dofmt
(
nvli¡_´tùl_t
, 
nvli¡_´tùl_fmt
, ...);

139 
	#NVLIST_PRINTCTL_SVDECL
(
funúame
, 
v®ty³
) \

140 
	`funúame
(
nvli¡_´tùl_t
, \

141 (*)(
nvli¡_´tùl_t
, *, 
nvli¡_t
 *, cÚ¡ *, 
v®ty³
), \

142 *)

	)

144 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_boÞ—n
, );

145 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_boÞ—n_v®ue
, 
boÞ—n_t
);

146 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_by‹
, 
uch¬_t
);

147 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_št8
, 
št8_t
);

148 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_ušt8
, 
ušt8_t
);

149 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_št16
, 
št16_t
);

150 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_ušt16
, 
ušt16_t
);

151 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_št32
, 
št32_t
);

152 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_ušt32
, 
ušt32_t
);

153 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_št64
, 
št64_t
);

154 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_ušt64
, 
ušt64_t
);

155 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_doubË
, );

156 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_¡ršg
, *);

157 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_h¹ime
, 
h¹ime_t
);

158 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_nvli¡
, 
nvli¡_t
 *);

160 #undeà
NVLIST_PRINTCTL_SVDECL


170 
	#NVLIST_PRINTCTL_AVDECL
(
funúame
, 
vty³
) \

171 
	`funúame
(
nvli¡_´tùl_t
, \

172 (*)(
nvli¡_´tùl_t
, *, 
nvli¡_t
 *, cÚ¡ *, 
vty³
, 
ušt_t
), \

173 *)

	)

175 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_boÞ—n_¬¿y
, 
boÞ—n_t
 *);

176 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_by‹_¬¿y
, 
uch¬_t
 *);

177 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_št8_¬¿y
, 
št8_t
 *);

178 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_ušt8_¬¿y
, 
ušt8_t
 *);

179 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_št16_¬¿y
, 
št16_t
 *);

180 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_ušt16_¬¿y
, 
ušt16_t
 *);

181 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_št32_¬¿y
, 
št32_t
 *);

182 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_ušt32_¬¿y
, 
ušt32_t
 *);

183 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_št64_¬¿y
, 
št64_t
 *);

184 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_ušt64_¬¿y
, 
ušt64_t
 *);

185 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_¡ršg_¬¿y
, **);

186 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_nvli¡_¬¿y
, 
nvli¡_t
 **);

188 #undeà
NVLIST_PRINTCTL_AVDECL


190 #ifdef 
__ýlu¥lus


	@/home/han/libnvpair/nvpair.c

26 #ià!
defšed
(
__APPLE__
)

27 
	~<sys/¡rÝts.h
>

30 
	~<as£¹.h
>

31 
	#ASSERT
(
x
è
	`as£¹
(x)

	)

32 
	~"i§_defs.h
"

33 
	~<š‰y³s.h
>

34 
	~"nv·œ.h
"

35 
	~"nv·œ_im¶.h
"

39 #ià
defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

40 
	~<¡d¬g.h
>

41 
	~<sys/ddi.h
>

42 
	~<sys/sunddi.h
>

44 
	~<¡d¬g.h
>

45 
	~<¡dlib.h
>

46 
	~<¡ršg.h
>

47 
	~<¡ršgs.h
>

50 #iâdef 
off£tof


51 
	#off£tof
(
s
, 
m
è((
size_t
)(&((( *)0)->m)))

	)

53 
	#sk_wh™e¥aû
(
p
è(*Õè=ð' 'è|| (*Õè=ð'\t')èp++

	)

130 
	#NVP_SIZE_CALC
(
Çme_Ën
, 
d©a_Ën
) \

131 (
	`NV_ALIGN
(( (
nv·œ_t
)è+ 
Çme_Ën
è+ NV_ALIGN(
d©a_Ën
))

	)

133 
i_g‘_v®ue_size
(
d©a_ty³_t
 
ty³
, cÚ¡ *
d©a
, 
ušt_t
 
ÃËm
);

134 
nvli¡_add_commÚ
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
d©a_ty³_t
 
ty³
,

135 
ušt_t
 
ÃËm
, cÚ¡ *
d©a
);

137 
	#NV_STAT_EMBEDDED
 0x1

	)

138 
	#EMBEDDED_NVL
(
nvp
è((
nvli¡_t
 *)(*)
	`NVP_VALUE
Òvp))

	)

139 
	#EMBEDDED_NVL_ARRAY
(
nvp
è((
nvli¡_t
 **)(*)
	`NVP_VALUE
Òvp))

	)

141 
	#NVP_VALOFF
(
nvp
è(
	`NV_ALIGN
( (
nv·œ_t
è+ (nvp)->
nvp_Çme_sz
))

	)

142 
	#NVPAIR2I_NVP
(
nvp
) \

143 ((
i_nvp_t
 *)((
size_t
)(
nvp
è- 
	`off£tof
(i_nvp_t, 
nvi_nvp
)))

	)

147 
	$nv_®loc_š™
(
nv_®loc_t
 *
nva
, cÚ¡ 
nv_®loc_Ýs_t
 *
nvo
, ...)

149 
va_li¡
 
v®i¡
;

150 
”r
 = 0;

152 
nva
->
nva_Ýs
 = 
nvo
;

153 
nva
->
nva_¬g
 = 
NULL
;

155 
	`va_¡¬t
(
v®i¡
, 
nvo
);

156 ià(
nva
->
nva_Ýs
->
nv_ao_š™
 !ð
NULL
)

157 
”r
 = 
nva
->
nva_Ýs
->
	`nv_ao_š™
Òva, 
v®i¡
);

158 
	`va_’d
(
v®i¡
);

160  (
”r
);

161 
	}
}

164 
	$nv_®loc_»£t
(
nv_®loc_t
 *
nva
)

166 ià(
nva
->
nva_Ýs
->
nv_ao_»£t
 !ð
NULL
)

167 
nva
->
nva_Ýs
->
	`nv_ao_»£t
(nva);

168 
	}
}

171 
	$nv_®loc_fši
(
nv_®loc_t
 *
nva
)

173 ià(
nva
->
nva_Ýs
->
nv_ao_fši
 !ð
NULL
)

174 
nva
->
nva_Ýs
->
	`nv_ao_fši
(nva);

175 
	}
}

177 
nv_®loc_t
 *

178 
	$nvli¡_lookup_nv_®loc
(
nvli¡_t
 *
nvl
)

180 
nv´iv_t
 *
´iv
;

182 ià(
nvl
 =ð
NULL
 ||

183 (
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

184  (
NULL
);

186  (
´iv
->
nvp_nva
);

187 
	}
}

190 
	$nv_mem_z®loc
(
nv´iv_t
 *
nvp
, 
size_t
 
size
)

192 
nv_®loc_t
 *
nva
 = 
nvp
->
nvp_nva
;

193 *
buf
;

195 ià((
buf
 = 
nva
->
nva_Ýs
->
	`nv_ao_®loc
Òva, 
size
)è!ð
NULL
)

196 
	`bz”o
(
buf
, 
size
);

198  (
buf
);

199 
	}
}

202 
	$nv_mem_ä“
(
nv´iv_t
 *
nvp
, *
buf
, 
size_t
 
size
)

204 
nv_®loc_t
 *
nva
 = 
nvp
->
nvp_nva
;

206 
nva
->
nva_Ýs
->
	`nv_ao_ä“
Òva, 
buf
, 
size
);

207 
	}
}

210 
	$nv_´iv_š™
(
nv´iv_t
 *
´iv
, 
nv_®loc_t
 *
nva
, 
ušt32_t
 
¡©
)

212 
	`bz”o
(
´iv
,  (
nv´iv_t
));

214 
´iv
->
nvp_nva
 = 
nva
;

215 
´iv
->
nvp_¡©
 = 
¡©
;

216 
	}
}

218 
nv´iv_t
 *

219 
	$nv_´iv_®loc
(
nv_®loc_t
 *
nva
)

221 
nv´iv_t
 *
´iv
;

227 ià((
´iv
 = 
nva
->
nva_Ýs
->
	`nv_ao_®loc
Òva,  (
nv´iv_t
))è=ð
NULL
)

228  (
NULL
);

230 
	`nv_´iv_š™
(
´iv
, 
nva
, 0);

232  (
´iv
);

233 
	}
}

240 
nv´iv_t
 *

241 
	$nv_´iv_®loc_embedded
(
nv´iv_t
 *
´iv
)

243 
nv´iv_t
 *
emb_´iv
;

245 ià((
emb_´iv
 = 
	`nv_mem_z®loc
(
´iv
,  (
nv´iv_t
))è=ð
NULL
)

246  (
NULL
);

248 
	`nv_´iv_š™
(
emb_´iv
, 
´iv
->
nvp_nva
, 
NV_STAT_EMBEDDED
);

250  (
emb_´iv
);

251 
	}
}

254 
	$nvli¡_š™
(
nvli¡_t
 *
nvl
, 
ušt32_t
 
nvæag
, 
nv´iv_t
 *
´iv
)

256 
nvl
->
nvl_v”siÚ
 = 
NV_VERSION
;

257 
nvl
->
nvl_nvæag
 = 
nvæag
 & (
NV_UNIQUE_NAME
|
NV_UNIQUE_NAME_TYPE
);

258 
nvl
->
nvl_´iv
 = (
ušt64_t
)(
ušŒ_t
)
´iv
;

259 
nvl
->
nvl_æag
 = 0;

260 
nvl
->
nvl_·d
 = 0;

261 
	}
}

263 
ušt_t


264 
	$nvli¡_nvæag
(
nvli¡_t
 *
nvl
)

266  (
nvl
->
nvl_nvæag
);

267 
	}
}

274 
	$nvli¡_®loc
(
nvli¡_t
 **
nvÍ
, 
ušt_t
 
nvæag
, 
kmæag
)

276 #ià
	`defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

277  (
	`nvli¡_x®loc
(
nvÍ
, 
nvæag
,

278 (
kmæag
 =ð
KM_SLEEP
 ? 
nv_®loc_¦“p
 : 
nv_®loc_no¦“p
)));

280  (
	`nvli¡_x®loc
(
nvÍ
, 
nvæag
, 
nv_®loc_no¦“p
));

282 
	}
}

285 
	$nvli¡_x®loc
(
nvli¡_t
 **
nvÍ
, 
ušt_t
 
nvæag
, 
nv_®loc_t
 *
nva
)

287 
nv´iv_t
 *
´iv
;

289 ià(
nvÍ
 =ð
NULL
 || 
nva
 == NULL)

290  (
EINVAL
);

292 ià((
´iv
 = 
	`nv_´iv_®loc
(
nva
)è=ð
NULL
)

293  (
ENOMEM
);

295 ià((*
nvÍ
 = 
	`nv_mem_z®loc
(
´iv
,

296 
	`NV_ALIGN
( (
nvli¡_t
)))è=ð
NULL
) {

297 
	`nv_mem_ä“
(
´iv
,…riv,  (
nv´iv_t
));

298  (
ENOMEM
);

301 
	`nvli¡_š™
(*
nvÍ
, 
nvæag
, 
´iv
);

304 
	}
}

309 
nv·œ_t
 *

310 
	$nvp_buf_®loc
(
nvli¡_t
 *
nvl
, 
size_t
 
Ën
)

312 
nv´iv_t
 *
´iv
 = (nv´iv_ˆ*)(
ušŒ_t
)
nvl
->
nvl_´iv
;

313 
i_nvp_t
 *
buf
;

314 
nv·œ_t
 *
nvp
;

315 
size_t
 
nvsize
;

320 
nvsize
 = 
Ën
 + 
	`off£tof
(
i_nvp_t
, 
nvi_nvp
);

322 ià((
buf
 = 
	`nv_mem_z®loc
(
´iv
, 
nvsize
)è=ð
NULL
)

323  (
NULL
);

325 
nvp
 = &
buf
->
nvi_nvp
;

326 
nvp
->
nvp_size
 = 
Ën
;

328  (
nvp
);

329 
	}
}

335 
	$nvp_buf_ä“
(
nvli¡_t
 *
nvl
, 
nv·œ_t
 *
nvp
)

337 
nv´iv_t
 *
´iv
 = (nv´iv_ˆ*)(
ušŒ_t
)
nvl
->
nvl_´iv
;

338 
size_t
 
nvsize
 = 
nvp
->
nvp_size
 + 
	`off£tof
(
i_nvp_t
, 
nvi_nvp
);

340 
	`nv_mem_ä“
(
´iv
, 
	`NVPAIR2I_NVP
(
nvp
), 
nvsize
);

341 
	}
}

347 
	$nvp_buf_lšk
(
nvli¡_t
 *
nvl
, 
nv·œ_t
 *
nvp
)

349 
nv´iv_t
 *
´iv
 = (nv´iv_ˆ*)(
ušŒ_t
)
nvl
->
nvl_´iv
;

350 
i_nvp_t
 *
cu¼
 = 
	`NVPAIR2I_NVP
(
nvp
);

353 ià(
´iv
->
nvp_li¡
 =ð
NULL
) {

354 
´iv
->
nvp_li¡
 =…riv->
nvp_Ï¡
 = 
cu¼
;

356 
cu¼
->
nvi_´ev
 = 
´iv
->
nvp_Ï¡
;

357 
´iv
->
nvp_Ï¡
->
nvi_Ãxt
 = 
cu¼
;

358 
´iv
->
nvp_Ï¡
 = 
cu¼
;

360 
	}
}

366 
	$nvp_buf_uÆšk
(
nvli¡_t
 *
nvl
, 
nv·œ_t
 *
nvp
)

368 
nv´iv_t
 *
´iv
 = (nv´iv_ˆ*)(
ušŒ_t
)
nvl
->
nvl_´iv
;

369 
i_nvp_t
 *
cu¼
 = 
	`NVPAIR2I_NVP
(
nvp
);

374 ià(
´iv
->
nvp_cu¼
 =ð
cu¼
)

375 
´iv
->
nvp_cu¼
 = 
cu¼
->
nvi_Ãxt
;

377 ià(
cu¼
 =ð
´iv
->
nvp_li¡
)

378 
´iv
->
nvp_li¡
 = 
cu¼
->
nvi_Ãxt
;

380 
cu¼
->
nvi_´ev
->
nvi_Ãxt
 = curr->nvi_next;

382 ià(
cu¼
 =ð
´iv
->
nvp_Ï¡
)

383 
´iv
->
nvp_Ï¡
 = 
cu¼
->
nvi_´ev
;

385 
cu¼
->
nvi_Ãxt
->
nvi_´ev
 = curr->nvi_prev;

386 
	}
}

392 
	$i_v®id©e_ty³_ÃËm
(
d©a_ty³_t
 
ty³
, 
ušt_t
 
ÃËm
)

394 
ty³
) {

395 
DATA_TYPE_BOOLEAN
:

396 ià(
ÃËm
 != 0)

397  (
EINVAL
);

399 
DATA_TYPE_BOOLEAN_VALUE
:

400 
DATA_TYPE_BYTE
:

401 
DATA_TYPE_INT8
:

402 
DATA_TYPE_UINT8
:

403 
DATA_TYPE_INT16
:

404 
DATA_TYPE_UINT16
:

405 
DATA_TYPE_INT32
:

406 
DATA_TYPE_UINT32
:

407 
DATA_TYPE_INT64
:

408 
DATA_TYPE_UINT64
:

409 
DATA_TYPE_STRING
:

410 
DATA_TYPE_HRTIME
:

411 
DATA_TYPE_NVLIST
:

412 #ià!
	`defšed
(
_KERNEL
)

413 
DATA_TYPE_DOUBLE
:

415 ià(
ÃËm
 != 1)

416  (
EINVAL
);

418 
DATA_TYPE_BOOLEAN_ARRAY
:

419 
DATA_TYPE_BYTE_ARRAY
:

420 
DATA_TYPE_INT8_ARRAY
:

421 
DATA_TYPE_UINT8_ARRAY
:

422 
DATA_TYPE_INT16_ARRAY
:

423 
DATA_TYPE_UINT16_ARRAY
:

424 
DATA_TYPE_INT32_ARRAY
:

425 
DATA_TYPE_UINT32_ARRAY
:

426 
DATA_TYPE_INT64_ARRAY
:

427 
DATA_TYPE_UINT64_ARRAY
:

428 
DATA_TYPE_STRING_ARRAY
:

429 
DATA_TYPE_NVLIST_ARRAY
:

433  (
EINVAL
);

436 
	}
}

442 
	$i_v®id©e_nv·œ_Çme
(
nv·œ_t
 *
nvp
)

444 ià((
nvp
->
nvp_Çme_sz
 <= 0) ||

445 (
nvp
->
nvp_size
 < 
	`NVP_SIZE_CALC
Òvp->
nvp_Çme_sz
, 0)))

446  (
EFAULT
);

449 ià(
	`NVP_NAME
(
nvp
)[nvp->
nvp_Çme_sz
 - 1] != '\0')

450  (
EFAULT
);

452  (
	`¡¾’
(
	`NVP_NAME
(
nvp
)è=ðnvp->
nvp_Çme_sz
 - 1 ? 0 : 
EFAULT
);

453 
	}
}

456 
	$i_v®id©e_nv·œ_v®ue
(
d©a_ty³_t
 
ty³
, 
ušt_t
 
ÃËm
, cÚ¡ *
d©a
)

458 
ty³
) {

459 
DATA_TYPE_BOOLEAN_VALUE
:

460 ià(*(
boÞ—n_t
 *)
d©a
 !ð
B_TRUE
 &&

461 *(
boÞ—n_t
 *)
d©a
 !ð
B_FALSE
)

462  (
EINVAL
);

464 
DATA_TYPE_BOOLEAN_ARRAY
: {

465 
i
;

467 
i
 = 0; i < 
ÃËm
; i++)

468 ià(((
boÞ—n_t
 *)
d©a
)[
i
] !ð
B_TRUE
 &&

469 ((
boÞ—n_t
 *)
d©a
)[
i
] !ð
B_FALSE
)

470  (
EINVAL
);

478 
	}
}

486 
	$i_v®id©e_nv·œ
(
nv·œ_t
 *
nvp
)

488 
d©a_ty³_t
 
ty³
 = 
	`NVP_TYPE
(
nvp
);

489 
size1
, 
size2
;

492 ià(
	`i_v®id©e_nv·œ_Çme
(
nvp
) != 0)

493  (
EFAULT
);

495 ià(
	`i_v®id©e_nv·œ_v®ue
(
ty³
, 
	`NVP_NELEM
(
nvp
), 
	`NVP_VALUE
(nvp)) != 0)

496  (
EFAULT
);

502 
size2
 = 
	`i_g‘_v®ue_size
(
ty³
, 
	`NVP_VALUE
(
nvp
), 
	`NVP_NELEM
(nvp));

503 
size1
 = 
nvp
->
nvp_size
 - 
	`NVP_VALOFF
(nvp);

504 ià(
size2
 < 0 || 
size1
 !ð
	`NV_ALIGN
(size2))

505  (
EFAULT
);

508 
	}
}

511 
	$nvli¡_cÝy_·œs
(
nvli¡_t
 *
¢vl
,‚vli¡_ˆ*
dnvl
)

513 
nv´iv_t
 *
´iv
;

514 
i_nvp_t
 *
cu¼
;

516 ià((
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
¢vl
->
nvl_´iv
è=ð
NULL
)

517  (
EINVAL
);

519 
cu¼
 = 
´iv
->
nvp_li¡
; cu¼ !ð
NULL
; cu¼ = cu¼->
nvi_Ãxt
) {

520 
nv·œ_t
 *
nvp
 = &
cu¼
->
nvi_nvp
;

521 
”r
;

523 ià((
”r
 = 
	`nvli¡_add_commÚ
(
dnvl
, 
	`NVP_NAME
(
nvp
), 
	`NVP_TYPE
(nvp),

524 
	`NVP_NELEM
(
nvp
), 
	`NVP_VALUE
(nvp))) != 0)

525  (
”r
);

529 
	}
}

536 
	$nv·œ_ä“
(
nv·œ_t
 *
nvp
)

538 
	`NVP_TYPE
(
nvp
)) {

539 
DATA_TYPE_NVLIST
:

540 
	`nvli¡_ä“
(
	`EMBEDDED_NVL
(
nvp
));

542 
DATA_TYPE_NVLIST_ARRAY
: {

543 
nvli¡_t
 **
nvÍ
 = 
	`EMBEDDED_NVL_ARRAY
(
nvp
);

544 
i
;

546 
i
 = 0; i < 
	`NVP_NELEM
(
nvp
); i++)

547 ià(
nvÍ
[
i
] !ð
NULL
)

548 
	`nvli¡_ä“
(
nvÍ
[
i
]);

554 
	}
}

560 
	$nvli¡_ä“
(
nvli¡_t
 *
nvl
)

562 
nv´iv_t
 *
´iv
;

563 
i_nvp_t
 *
cu¼
;

565 ià(
nvl
 =ð
NULL
 ||

566 (
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

572 
cu¼
 = 
´iv
->
nvp_li¡
;

573 
cu¼
 !ð
NULL
) {

574 
nv·œ_t
 *
nvp
 = &
cu¼
->
nvi_nvp
;

575 
cu¼
 = cu¼->
nvi_Ãxt
;

577 
	`nv·œ_ä“
(
nvp
);

578 
	`nvp_buf_ä“
(
nvl
, 
nvp
);

581 ià(!(
´iv
->
nvp_¡©
 & 
NV_STAT_EMBEDDED
))

582 
	`nv_mem_ä“
(
´iv
, 
nvl
, 
	`NV_ALIGN
( (
nvli¡_t
)));

584 
nvl
->
nvl_´iv
 = 0;

586 
	`nv_mem_ä“
(
´iv
,…riv,  (
nv´iv_t
));

587 
	}
}

590 
	$nvli¡_cÚšs_nvp
(
nvli¡_t
 *
nvl
, 
nv·œ_t
 *
nvp
)

592 
nv´iv_t
 *
´iv
 = (nv´iv_ˆ*)(
ušŒ_t
)
nvl
->
nvl_´iv
;

593 
i_nvp_t
 *
cu¼
;

595 ià(
nvp
 =ð
NULL
)

598 
cu¼
 = 
´iv
->
nvp_li¡
; cu¼ !ð
NULL
; cu¼ = cu¼->
nvi_Ãxt
)

599 ià(&
cu¼
->
nvi_nvp
 =ð
nvp
)

603 
	}
}

610 
	$nvli¡_dup
(
nvli¡_t
 *
nvl
,‚vli¡_ˆ**
nvÍ
, 
kmæag
)

612 #ià
	`defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

613  (
	`nvli¡_xdup
(
nvl
, 
nvÍ
,

614 (
kmæag
 =ð
KM_SLEEP
 ? 
nv_®loc_¦“p
 : 
nv_®loc_no¦“p
)));

616  (
	`nvli¡_xdup
(
nvl
, 
nvÍ
, 
nv_®loc_no¦“p
));

618 
	}
}

621 
	$nvli¡_xdup
(
nvli¡_t
 *
nvl
,‚vli¡_ˆ**
nvÍ
, 
nv_®loc_t
 *
nva
)

623 
”r
;

624 
nvli¡_t
 *
»t
;

626 ià(
nvl
 =ð
NULL
 || 
nvÍ
 == NULL)

627  (
EINVAL
);

629 ià((
”r
 = 
	`nvli¡_x®loc
(&
»t
, 
nvl
->
nvl_nvæag
, 
nva
)) != 0)

630  (
”r
);

632 ià((
”r
 = 
	`nvli¡_cÝy_·œs
(
nvl
, 
»t
)) != 0)

633 
	`nvli¡_ä“
(
»t
);

635 *
nvÍ
 = 
»t
;

637  (
”r
);

638 
	}
}

644 
	$nvli¡_»move_®l
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
)

646 
nv´iv_t
 *
´iv
;

647 
i_nvp_t
 *
cu¼
;

648 
”rÜ
 = 
ENOENT
;

650 ià(
nvl
 =ð
NULL
 || 
Çme
 == NULL ||

651 (
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

652  (
EINVAL
);

654 
cu¼
 = 
´iv
->
nvp_li¡
;

655 
cu¼
 !ð
NULL
) {

656 
nv·œ_t
 *
nvp
 = &
cu¼
->
nvi_nvp
;

658 
cu¼
 = cu¼->
nvi_Ãxt
;

659 ià(
	`¡rcmp
(
Çme
, 
	`NVP_NAME
(
nvp
)) != 0)

662 
	`nvp_buf_uÆšk
(
nvl
, 
nvp
);

663 
	`nv·œ_ä“
(
nvp
);

664 
	`nvp_buf_ä“
(
nvl
, 
nvp
);

666 
”rÜ
 = 0;

669  (
”rÜ
);

670 
	}
}

676 
	$nvli¡_»move
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
d©a_ty³_t
 
ty³
)

678 
nv´iv_t
 *
´iv
;

679 
i_nvp_t
 *
cu¼
;

681 ià(
nvl
 =ð
NULL
 || 
Çme
 == NULL ||

682 (
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

683  (
EINVAL
);

685 
cu¼
 = 
´iv
->
nvp_li¡
;

686 
cu¼
 !ð
NULL
) {

687 
nv·œ_t
 *
nvp
 = &
cu¼
->
nvi_nvp
;

689 ià(
	`¡rcmp
(
Çme
, 
	`NVP_NAME
(
nvp
)è=ð0 && 
	`NVP_TYPE
Òvpè=ð
ty³
) {

690 
	`nvp_buf_uÆšk
(
nvl
, 
nvp
);

691 
	`nv·œ_ä“
(
nvp
);

692 
	`nvp_buf_ä“
(
nvl
, 
nvp
);

696 
cu¼
 = cu¼->
nvi_Ãxt
;

699  (
ENOENT
);

700 
	}
}

703 
	$nvli¡_»move_nv·œ
(
nvli¡_t
 *
nvl
, 
nv·œ_t
 *
nvp
)

705 ià(
nvl
 =ð
NULL
 || 
nvp
 == NULL)

706  (
EINVAL
);

708 
	`nvp_buf_uÆšk
(
nvl
, 
nvp
);

709 
	`nv·œ_ä“
(
nvp
);

710 
	`nvp_buf_ä“
(
nvl
, 
nvp
);

712 
	}
}

723 
	$i_g‘_v®ue_size
(
d©a_ty³_t
 
ty³
, cÚ¡ *
d©a
, 
ušt_t
 
ÃËm
)

725 
ušt64_t
 
v®ue_sz
;

727 ià(
	`i_v®id©e_ty³_ÃËm
(
ty³
, 
ÃËm
) != 0)

731 
ty³
) {

732 
DATA_TYPE_BOOLEAN
:

733 
v®ue_sz
 = 0;

735 
DATA_TYPE_BOOLEAN_VALUE
:

736 
v®ue_sz
 =  (
boÞ—n_t
);

738 
DATA_TYPE_BYTE
:

739 
v®ue_sz
 =  (
uch¬_t
);

741 
DATA_TYPE_INT8
:

742 
v®ue_sz
 =  (
št8_t
);

744 
DATA_TYPE_UINT8
:

745 
v®ue_sz
 =  (
ušt8_t
);

747 
DATA_TYPE_INT16
:

748 
v®ue_sz
 =  (
št16_t
);

750 
DATA_TYPE_UINT16
:

751 
v®ue_sz
 =  (
ušt16_t
);

753 
DATA_TYPE_INT32
:

754 
v®ue_sz
 =  (
št32_t
);

756 
DATA_TYPE_UINT32
:

757 
v®ue_sz
 =  (
ušt32_t
);

759 
DATA_TYPE_INT64
:

760 
v®ue_sz
 =  (
št64_t
);

762 
DATA_TYPE_UINT64
:

763 
v®ue_sz
 =  (
ušt64_t
);

765 #ià!
	`defšed
(
_KERNEL
)

766 
DATA_TYPE_DOUBLE
:

767 
v®ue_sz
 =  ();

770 
DATA_TYPE_STRING
:

771 ià(
d©a
 =ð
NULL
)

772 
v®ue_sz
 = 0;

774 
v®ue_sz
 = 
	`¡¾’
(
d©a
) + 1;

776 
DATA_TYPE_BOOLEAN_ARRAY
:

777 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (
boÞ—n_t
);

779 
DATA_TYPE_BYTE_ARRAY
:

780 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (
uch¬_t
);

782 
DATA_TYPE_INT8_ARRAY
:

783 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (
št8_t
);

785 
DATA_TYPE_UINT8_ARRAY
:

786 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (
ušt8_t
);

788 
DATA_TYPE_INT16_ARRAY
:

789 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (
št16_t
);

791 
DATA_TYPE_UINT16_ARRAY
:

792 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (
ušt16_t
);

794 
DATA_TYPE_INT32_ARRAY
:

795 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (
št32_t
);

797 
DATA_TYPE_UINT32_ARRAY
:

798 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (
ušt32_t
);

800 
DATA_TYPE_INT64_ARRAY
:

801 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (
št64_t
);

803 
DATA_TYPE_UINT64_ARRAY
:

804 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (uint64_t);

806 
DATA_TYPE_STRING_ARRAY
:

807 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (uint64_t);

809 ià(
d©a
 !ð
NULL
) {

810 *cÚ¡ *
¡rs
 = 
d©a
;

811 
ušt_t
 
i
;

814 
i
 = 0; i < 
ÃËm
; i++) {

815 ià(
¡rs
[
i
] =ð
NULL
)

817 
v®ue_sz
 +ð
	`¡¾’
(
¡rs
[
i
]) + 1;

821 
DATA_TYPE_HRTIME
:

822 
v®ue_sz
 =  (
h¹ime_t
);

824 
DATA_TYPE_NVLIST
:

825 
v®ue_sz
 = 
	`NV_ALIGN
( (
nvli¡_t
));

827 
DATA_TYPE_NVLIST_ARRAY
:

828 
v®ue_sz
 = (
ušt64_t
)
ÃËm
 *  (uint64_t) +

829 (
ušt64_t
)
ÃËm
 * 
	`NV_ALIGN
( (
nvli¡_t
));

835  (
v®ue_sz
 > 
INT32_MAX
 ? -1 : ()value_sz);

836 
	}
}

839 
	$nvli¡_cÝy_embedded
(
nvli¡_t
 *
nvl
,‚vli¡_ˆ*
Úvl
,‚vli¡_ˆ*
emb_nvl
)

841 
nv´iv_t
 *
´iv
;

842 
”r
;

844 ià((
´iv
 = 
	`nv_´iv_®loc_embedded
((
nv´iv_t
 *)(
ušŒ_t
)

845 
nvl
->
nvl_´iv
)è=ð
NULL
)

846  (
ENOMEM
);

848 
	`nvli¡_š™
(
emb_nvl
, 
Úvl
->
nvl_nvæag
, 
´iv
);

850 ià((
”r
 = 
	`nvli¡_cÝy_·œs
(
Úvl
, 
emb_nvl
)) != 0) {

851 
	`nvli¡_ä“
(
emb_nvl
);

852 
emb_nvl
->
nvl_´iv
 = 0;

855  (
”r
);

856 
	}
}

862 
	$nvli¡_add_commÚ
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

863 
d©a_ty³_t
 
ty³
, 
ušt_t
 
ÃËm
, cÚ¡ *
d©a
)

865 
nv·œ_t
 *
nvp
;

866 
ušt_t
 
i
;

868 
nvp_sz
, 
Çme_sz
, 
v®ue_sz
;

869 
”r
 = 0;

871 ià(
Çme
 =ð
NULL
 || 
nvl
 =ðNULL ||‚vl->
nvl_´iv
 == 0)

872  (
EINVAL
);

874 ià(
ÃËm
 !ð0 && 
d©a
 =ð
NULL
)

875  (
EINVAL
);

882 ià((
v®ue_sz
 = 
	`i_g‘_v®ue_size
(
ty³
, 
d©a
, 
ÃËm
)) < 0)

883  (
EINVAL
);

885 ià(
	`i_v®id©e_nv·œ_v®ue
(
ty³
, 
ÃËm
, 
d©a
) != 0)

886  (
EINVAL
);

893 
ty³
) {

894 
DATA_TYPE_NVLIST
:

895 ià(
d©a
 =ð
nvl
 || d©¨=ð
NULL
)

896  (
EINVAL
);

898 
DATA_TYPE_NVLIST_ARRAY
: {

899 
nvli¡_t
 **
ÚvÍ
 = (nvli¡_ˆ**)
d©a
;

900 
i
 = 0; i < 
ÃËm
; i++) {

901 ià(
ÚvÍ
[
i
] =ð
nvl
 || onvÍ[i] =ð
NULL
)

902  (
EINVAL
);

911 
Çme_sz
 = 
	`¡¾’
(
Çme
) + 1;

913 
nvp_sz
 = 
	`NVP_SIZE_CALC
(
Çme_sz
, 
v®ue_sz
);

915 ià((
nvp
 = 
	`nvp_buf_®loc
(
nvl
, 
nvp_sz
)è=ð
NULL
)

916  (
ENOMEM
);

918 
	`ASSERT
(
nvp
->
nvp_size
 =ð
nvp_sz
);

919 
nvp
->
nvp_Çme_sz
 = 
Çme_sz
;

920 
nvp
->
nvp_v®ue_–em
 = 
ÃËm
;

921 
nvp
->
nvp_ty³
 = 
ty³
;

922 
	`bcÝy
(
Çme
, 
	`NVP_NAME
(
nvp
), 
Çme_sz
);

924 
ty³
) {

925 
DATA_TYPE_BOOLEAN
:

927 
DATA_TYPE_STRING_ARRAY
: {

928 *cÚ¡ *
¡rs
 = 
d©a
;

929 *
buf
 = 
	`NVP_VALUE
(
nvp
);

930 **
c¡rs
 = (*)
buf
;

933 
buf
 +ð
ÃËm
 *  (
ušt64_t
);

934 
i
 = 0; i < 
ÃËm
; i++) {

935 
¦’
 = 
	`¡¾’
(
¡rs
[
i
]) + 1;

936 
	`bcÝy
(
¡rs
[
i
], 
buf
, 
¦’
);

937 
c¡rs
[
i
] = 
buf
;

938 
buf
 +ð
¦’
;

942 
DATA_TYPE_NVLIST
: {

943 
nvli¡_t
 *
Âvl
 = 
	`EMBEDDED_NVL
(
nvp
);

944 
nvli¡_t
 *
Úvl
 = (nvli¡_ˆ*)
d©a
;

946 ià((
”r
 = 
	`nvli¡_cÝy_embedded
(
nvl
, 
Úvl
, 
Âvl
)) != 0) {

947 
	`nvp_buf_ä“
(
nvl
, 
nvp
);

948  (
”r
);

952 
DATA_TYPE_NVLIST_ARRAY
: {

953 
nvli¡_t
 **
ÚvÍ
 = (nvli¡_ˆ**)
d©a
;

954 
nvli¡_t
 **
nvÍ
 = 
	`EMBEDDED_NVL_ARRAY
(
nvp
);

955 
nvli¡_t
 *
embedded
 = (nvlist_t *)

956 ((
ušŒ_t
)
nvÍ
 + 
ÃËm
 *  (
ušt64_t
));

958 
i
 = 0; i < 
ÃËm
; i++) {

959 ià((
”r
 = 
	`nvli¡_cÝy_embedded
(
nvl
,

960 
ÚvÍ
[
i
], 
embedded
)) != 0) {

964 
	`nv·œ_ä“
(
nvp
);

965 
	`nvp_buf_ä“
(
nvl
, 
nvp
);

966  (
”r
);

969 
nvÍ
[
i
] = 
embedded
++;

974 
	`bcÝy
(
d©a
, 
	`NVP_VALUE
(
nvp
), 
v®ue_sz
);

978 ià(
nvl
->
nvl_nvæag
 & 
NV_UNIQUE_NAME
)

979 (è
	`nvli¡_»move_®l
(
nvl
, 
Çme
);

980 ià(
nvl
->
nvl_nvæag
 & 
NV_UNIQUE_NAME_TYPE
)

981 (è
	`nvli¡_»move
(
nvl
, 
Çme
, 
ty³
);

983 
	`nvp_buf_lšk
(
nvl
, 
nvp
);

986 
	}
}

989 
	$nvli¡_add_boÞ—n
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
)

991  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_BOOLEAN
, 0, 
NULL
));

992 
	}
}

995 
	$nvli¡_add_boÞ—n_v®ue
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
boÞ—n_t
 
v®
)

997  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_BOOLEAN_VALUE
, 1, &
v®
));

998 
	}
}

1001 
	$nvli¡_add_by‹
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
uch¬_t
 
v®
)

1003  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_BYTE
, 1, &
v®
));

1004 
	}
}

1007 
	$nvli¡_add_št8
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št8_t
 
v®
)

1009  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT8
, 1, &
v®
));

1010 
	}
}

1013 
	$nvli¡_add_ušt8
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt8_t
 
v®
)

1015  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT8
, 1, &
v®
));

1016 
	}
}

1019 
	$nvli¡_add_št16
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št16_t
 
v®
)

1021  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT16
, 1, &
v®
));

1022 
	}
}

1025 
	$nvli¡_add_ušt16
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt16_t
 
v®
)

1027  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT16
, 1, &
v®
));

1028 
	}
}

1031 
	$nvli¡_add_št32
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št32_t
 
v®
)

1033  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT32
, 1, &
v®
));

1034 
	}
}

1037 
	$nvli¡_add_ušt32
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt32_t
 
v®
)

1039  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT32
, 1, &
v®
));

1040 
	}
}

1043 
	$nvli¡_add_št64
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št64_t
 
v®
)

1045  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT64
, 1, &
v®
));

1046 
	}
}

1049 
	$nvli¡_add_ušt64
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt64_t
 
v®
)

1051  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT64
, 1, &
v®
));

1052 
	}
}

1054 #ià!
defšed
(
_KERNEL
)

1056 
	$nvli¡_add_doubË
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
v®
)

1058  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_DOUBLE
, 1, &
v®
));

1059 
	}
}

1063 
	$nvli¡_add_¡ršg
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, cÚ¡ *
v®
)

1065  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_STRING
, 1, (*)
v®
));

1066 
	}
}

1069 
	$nvli¡_add_boÞ—n_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1070 
boÞ—n_t
 *
a
, 
ušt_t
 
n
)

1072  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_BOOLEAN_ARRAY
, 
n
, 
a
));

1073 
	}
}

1076 
	$nvli¡_add_by‹_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
uch¬_t
 *
a
, 
ušt_t
 
n
)

1078  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_BYTE_ARRAY
, 
n
, 
a
));

1079 
	}
}

1082 
	$nvli¡_add_št8_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št8_t
 *
a
, 
ušt_t
 
n
)

1084  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT8_ARRAY
, 
n
, 
a
));

1085 
	}
}

1088 
	$nvli¡_add_ušt8_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt8_t
 *
a
, 
ušt_t
 
n
)

1090  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT8_ARRAY
, 
n
, 
a
));

1091 
	}
}

1094 
	$nvli¡_add_št16_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št16_t
 *
a
, 
ušt_t
 
n
)

1096  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT16_ARRAY
, 
n
, 
a
));

1097 
	}
}

1100 
	$nvli¡_add_ušt16_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt16_t
 *
a
, 
ušt_t
 
n
)

1102  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT16_ARRAY
, 
n
, 
a
));

1103 
	}
}

1106 
	$nvli¡_add_št32_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št32_t
 *
a
, 
ušt_t
 
n
)

1108  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT32_ARRAY
, 
n
, 
a
));

1109 
	}
}

1112 
	$nvli¡_add_ušt32_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt32_t
 *
a
, 
ušt_t
 
n
)

1114  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT32_ARRAY
, 
n
, 
a
));

1115 
	}
}

1118 
	$nvli¡_add_št64_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št64_t
 *
a
, 
ušt_t
 
n
)

1120  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT64_ARRAY
, 
n
, 
a
));

1121 
	}
}

1124 
	$nvli¡_add_ušt64_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt64_t
 *
a
, 
ušt_t
 
n
)

1126  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT64_ARRAY
, 
n
, 
a
));

1127 
	}
}

1130 
	$nvli¡_add_¡ršg_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1131 *cÚ¡ *
a
, 
ušt_t
 
n
)

1133  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_STRING_ARRAY
, 
n
, 
a
));

1134 
	}
}

1137 
	$nvli¡_add_h¹ime
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
h¹ime_t
 
v®
)

1139  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_HRTIME
, 1, &
v®
));

1140 
	}
}

1143 
	$nvli¡_add_nvli¡
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,‚vli¡_ˆ*
v®
)

1145  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_NVLIST
, 1, 
v®
));

1146 
	}
}

1149 
	$nvli¡_add_nvli¡_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,‚vli¡_ˆ**
a
, 
ušt_t
 
n
)

1151  (
	`nvli¡_add_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_NVLIST_ARRAY
, 
n
, 
a
));

1152 
	}
}

1155 
nv·œ_t
 *

1156 
	$nvli¡_Ãxt_nv·œ
(
nvli¡_t
 *
nvl
, 
nv·œ_t
 *
nvp
)

1158 
nv´iv_t
 *
´iv
;

1159 
i_nvp_t
 *
cu¼
;

1161 ià(
nvl
 =ð
NULL
 ||

1162 (
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

1163  (
NULL
);

1165 
cu¼
 = 
	`NVPAIR2I_NVP
(
nvp
);

1172 ià(
nvp
 =ð
NULL
)

1173 
cu¼
 = 
´iv
->
nvp_li¡
;

1174 ià(
´iv
->
nvp_cu¼
 =ð
cu¼
 || 
	`nvli¡_cÚšs_nvp
(
nvl
, 
nvp
))

1175 
cu¼
 = cu¼->
nvi_Ãxt
;

1177 
cu¼
 = 
NULL
;

1179 
´iv
->
nvp_cu¼
 = 
cu¼
;

1181  (
cu¼
 !ð
NULL
 ? &cu¼->
nvi_nvp
 : NULL);

1182 
	}
}

1184 
nv·œ_t
 *

1185 
	$nvli¡_´ev_nv·œ
(
nvli¡_t
 *
nvl
, 
nv·œ_t
 *
nvp
)

1187 
nv´iv_t
 *
´iv
;

1188 
i_nvp_t
 *
cu¼
;

1190 ià(
nvl
 =ð
NULL
 ||

1191 (
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

1192  (
NULL
);

1194 
cu¼
 = 
	`NVPAIR2I_NVP
(
nvp
);

1196 ià(
nvp
 =ð
NULL
)

1197 
cu¼
 = 
´iv
->
nvp_Ï¡
;

1198 ià(
´iv
->
nvp_cu¼
 =ð
cu¼
 || 
	`nvli¡_cÚšs_nvp
(
nvl
, 
nvp
))

1199 
cu¼
 = cu¼->
nvi_´ev
;

1201 
cu¼
 = 
NULL
;

1203 
´iv
->
nvp_cu¼
 = 
cu¼
;

1205  (
cu¼
 !ð
NULL
 ? &cu¼->
nvi_nvp
 : NULL);

1206 
	}
}

1208 
boÞ—n_t


1209 
	$nvli¡_em±y
(
nvli¡_t
 *
nvl
)

1211 
nv´iv_t
 *
´iv
;

1213 ià(
nvl
 =ð
NULL
 ||

1214 (
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

1215  (
B_TRUE
);

1217  (
´iv
->
nvp_li¡
 =ð
NULL
);

1218 
	}
}

1221 
	$nv·œ_Çme
(
nv·œ_t
 *
nvp
)

1223  (
	`NVP_NAME
(
nvp
));

1224 
	}
}

1226 
d©a_ty³_t


1227 
	$nv·œ_ty³
(
nv·œ_t
 *
nvp
)

1229  (
	`NVP_TYPE
(
nvp
));

1230 
	}
}

1233 
	$nv·œ_ty³_is_¬¿y
(
nv·œ_t
 *
nvp
)

1235 
d©a_ty³_t
 
ty³
 = 
	`NVP_TYPE
(
nvp
);

1237 ià((
ty³
 =ð
DATA_TYPE_BYTE_ARRAY
) ||

1238 (
ty³
 =ð
DATA_TYPE_UINT8_ARRAY
) ||

1239 (
ty³
 =ð
DATA_TYPE_INT16_ARRAY
) ||

1240 (
ty³
 =ð
DATA_TYPE_UINT16_ARRAY
) ||

1241 (
ty³
 =ð
DATA_TYPE_INT32_ARRAY
) ||

1242 (
ty³
 =ð
DATA_TYPE_UINT32_ARRAY
) ||

1243 (
ty³
 =ð
DATA_TYPE_INT64_ARRAY
) ||

1244 (
ty³
 =ð
DATA_TYPE_UINT64_ARRAY
) ||

1245 (
ty³
 =ð
DATA_TYPE_BOOLEAN_ARRAY
) ||

1246 (
ty³
 =ð
DATA_TYPE_STRING_ARRAY
) ||

1247 (
ty³
 =ð
DATA_TYPE_NVLIST_ARRAY
))

1251 
	}
}

1254 
	$nv·œ_v®ue_commÚ
(
nv·œ_t
 *
nvp
, 
d©a_ty³_t
 
ty³
, 
ušt_t
 *
ÃËm
, *
d©a
)

1256 ià(
nvp
 =ð
NULL
 || 
	`nv·œ_ty³
Òvpè!ð
ty³
)

1257  (
EINVAL
);

1263 
ty³
) {

1264 
DATA_TYPE_BOOLEAN
:

1265 ià(
ÃËm
 !ð
NULL
)

1266 *
ÃËm
 = 0;

1269 
DATA_TYPE_BOOLEAN_VALUE
:

1270 
DATA_TYPE_BYTE
:

1271 
DATA_TYPE_INT8
:

1272 
DATA_TYPE_UINT8
:

1273 
DATA_TYPE_INT16
:

1274 
DATA_TYPE_UINT16
:

1275 
DATA_TYPE_INT32
:

1276 
DATA_TYPE_UINT32
:

1277 
DATA_TYPE_INT64
:

1278 
DATA_TYPE_UINT64
:

1279 
DATA_TYPE_HRTIME
:

1280 #ià!
	`defšed
(
_KERNEL
)

1281 
DATA_TYPE_DOUBLE
:

1283 ià(
d©a
 =ð
NULL
)

1284  (
EINVAL
);

1285 
	`bcÝy
(
	`NVP_VALUE
(
nvp
), 
d©a
,

1286 (
size_t
)
	`i_g‘_v®ue_size
(
ty³
, 
NULL
, 1));

1287 ià(
ÃËm
 !ð
NULL
)

1288 *
ÃËm
 = 1;

1291 
DATA_TYPE_NVLIST
:

1292 
DATA_TYPE_STRING
:

1293 ià(
d©a
 =ð
NULL
)

1294  (
EINVAL
);

1295 *(**)
d©a
 = (*)
	`NVP_VALUE
(
nvp
);

1296 ià(
ÃËm
 !ð
NULL
)

1297 *
ÃËm
 = 1;

1300 
DATA_TYPE_BOOLEAN_ARRAY
:

1301 
DATA_TYPE_BYTE_ARRAY
:

1302 
DATA_TYPE_INT8_ARRAY
:

1303 
DATA_TYPE_UINT8_ARRAY
:

1304 
DATA_TYPE_INT16_ARRAY
:

1305 
DATA_TYPE_UINT16_ARRAY
:

1306 
DATA_TYPE_INT32_ARRAY
:

1307 
DATA_TYPE_UINT32_ARRAY
:

1308 
DATA_TYPE_INT64_ARRAY
:

1309 
DATA_TYPE_UINT64_ARRAY
:

1310 
DATA_TYPE_STRING_ARRAY
:

1311 
DATA_TYPE_NVLIST_ARRAY
:

1312 ià(
ÃËm
 =ð
NULL
 || 
d©a
 == NULL)

1313  (
EINVAL
);

1314 ià((*
ÃËm
 = 
	`NVP_NELEM
(
nvp
)) != 0)

1315 *(**)
d©a
 = (*)
	`NVP_VALUE
(
nvp
);

1317 *(**)
d©a
 = 
NULL
;

1321  (
ENOTSUP
);

1325 
	}
}

1328 
	$nvli¡_lookup_commÚ
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
d©a_ty³_t
 
ty³
,

1329 
ušt_t
 *
ÃËm
, *
d©a
)

1331 
nv´iv_t
 *
´iv
;

1332 
nv·œ_t
 *
nvp
;

1333 
i_nvp_t
 *
cu¼
;

1335 ià(
Çme
 =ð
NULL
 || 
nvl
 == NULL ||

1336 (
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

1337  (
EINVAL
);

1339 ià(!(
nvl
->
nvl_nvæag
 & (
NV_UNIQUE_NAME
 | 
NV_UNIQUE_NAME_TYPE
)))

1340  (
ENOTSUP
);

1342 
cu¼
 = 
´iv
->
nvp_li¡
; cu¼ !ð
NULL
; cu¼ = cu¼->
nvi_Ãxt
) {

1343 
nvp
 = &
cu¼
->
nvi_nvp
;

1345 ià(
	`¡rcmp
(
Çme
, 
	`NVP_NAME
(
nvp
)è=ð0 && 
	`NVP_TYPE
Òvpè=ð
ty³
)

1346  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
ty³
, 
ÃËm
, 
d©a
));

1349  (
ENOENT
);

1350 
	}
}

1353 
	$nvli¡_lookup_boÞ—n
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
)

1355  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_BOOLEAN
, 
NULL
, NULL));

1356 
	}
}

1359 
	$nvli¡_lookup_boÞ—n_v®ue
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
boÞ—n_t
 *
v®
)

1361  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
,

1362 
DATA_TYPE_BOOLEAN_VALUE
, 
NULL
, 
v®
));

1363 
	}
}

1366 
	$nvli¡_lookup_by‹
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
uch¬_t
 *
v®
)

1368  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_BYTE
, 
NULL
, 
v®
));

1369 
	}
}

1372 
	$nvli¡_lookup_št8
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št8_t
 *
v®
)

1374  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT8
, 
NULL
, 
v®
));

1375 
	}
}

1378 
	$nvli¡_lookup_ušt8
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt8_t
 *
v®
)

1380  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT8
, 
NULL
, 
v®
));

1381 
	}
}

1384 
	$nvli¡_lookup_št16
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št16_t
 *
v®
)

1386  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT16
, 
NULL
, 
v®
));

1387 
	}
}

1390 
	$nvli¡_lookup_ušt16
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt16_t
 *
v®
)

1392  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT16
, 
NULL
, 
v®
));

1393 
	}
}

1396 
	$nvli¡_lookup_št32
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št32_t
 *
v®
)

1398  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT32
, 
NULL
, 
v®
));

1399 
	}
}

1402 
	$nvli¡_lookup_ušt32
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt32_t
 *
v®
)

1404  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT32
, 
NULL
, 
v®
));

1405 
	}
}

1408 
	$nvli¡_lookup_št64
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št64_t
 *
v®
)

1410  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT64
, 
NULL
, 
v®
));

1411 
	}
}

1414 
	$nvli¡_lookup_ušt64
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
ušt64_t
 *
v®
)

1416  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT64
, 
NULL
, 
v®
));

1417 
	}
}

1419 #ià!
defšed
(
_KERNEL
)

1421 
	$nvli¡_lookup_doubË
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, *
v®
)

1423  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_DOUBLE
, 
NULL
, 
v®
));

1424 
	}
}

1428 
	$nvli¡_lookup_¡ršg
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, **
v®
)

1430  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_STRING
, 
NULL
, 
v®
));

1431 
	}
}

1434 
	$nvli¡_lookup_nvli¡
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,‚vli¡_ˆ**
v®
)

1436  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_NVLIST
, 
NULL
, 
v®
));

1437 
	}
}

1440 
	$nvli¡_lookup_boÞ—n_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1441 
boÞ—n_t
 **
a
, 
ušt_t
 *
n
)

1443  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
,

1444 
DATA_TYPE_BOOLEAN_ARRAY
, 
n
, 
a
));

1445 
	}
}

1448 
	$nvli¡_lookup_by‹_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1449 
uch¬_t
 **
a
, 
ušt_t
 *
n
)

1451  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_BYTE_ARRAY
, 
n
, 
a
));

1452 
	}
}

1455 
	$nvli¡_lookup_št8_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
št8_t
 **
a
, 
ušt_t
 *
n
)

1457  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT8_ARRAY
, 
n
, 
a
));

1458 
	}
}

1461 
	$nvli¡_lookup_ušt8_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1462 
ušt8_t
 **
a
, 
ušt_t
 *
n
)

1464  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT8_ARRAY
, 
n
, 
a
));

1465 
	}
}

1468 
	$nvli¡_lookup_št16_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1469 
št16_t
 **
a
, 
ušt_t
 *
n
)

1471  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT16_ARRAY
, 
n
, 
a
));

1472 
	}
}

1475 
	$nvli¡_lookup_ušt16_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1476 
ušt16_t
 **
a
, 
ušt_t
 *
n
)

1478  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT16_ARRAY
, 
n
, 
a
));

1479 
	}
}

1482 
	$nvli¡_lookup_št32_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1483 
št32_t
 **
a
, 
ušt_t
 *
n
)

1485  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT32_ARRAY
, 
n
, 
a
));

1486 
	}
}

1489 
	$nvli¡_lookup_ušt32_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1490 
ušt32_t
 **
a
, 
ušt_t
 *
n
)

1492  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT32_ARRAY
, 
n
, 
a
));

1493 
	}
}

1496 
	$nvli¡_lookup_št64_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1497 
št64_t
 **
a
, 
ušt_t
 *
n
)

1499  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_INT64_ARRAY
, 
n
, 
a
));

1500 
	}
}

1503 
	$nvli¡_lookup_ušt64_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1504 
ušt64_t
 **
a
, 
ušt_t
 *
n
)

1506  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_UINT64_ARRAY
, 
n
, 
a
));

1507 
	}
}

1510 
	$nvli¡_lookup_¡ršg_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1511 ***
a
, 
ušt_t
 *
n
)

1513  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_STRING_ARRAY
, 
n
, 
a
));

1514 
	}
}

1517 
	$nvli¡_lookup_nvli¡_¬¿y
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
,

1518 
nvli¡_t
 ***
a
, 
ušt_t
 *
n
)

1520  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_NVLIST_ARRAY
, 
n
, 
a
));

1521 
	}
}

1524 
	$nvli¡_lookup_h¹ime
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
h¹ime_t
 *
v®
)

1526  (
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
DATA_TYPE_HRTIME
, 
NULL
, 
v®
));

1527 
	}
}

1530 
	$nvli¡_lookup_·œs
(
nvli¡_t
 *
nvl
, 
æag
, ...)

1532 
va_li¡
 
­
;

1533 *
Çme
;

1534 
nÛÁok
 = (
æag
 & 
NV_FLAG_NOENTOK
 ? 1 : 0);

1535 
»t
 = 0;

1537 
	`va_¡¬t
(
­
, 
æag
);

1538 
»t
 =ð0 && (
Çme
 = 
	`va_¬g
(
­
, *)è!ð
NULL
) {

1539 
d©a_ty³_t
 
ty³
;

1540 *
v®
;

1541 
ušt_t
 *
ÃËm
;

1543 
ty³
 = 
	`va_¬g
(
­
, 
d©a_ty³_t
)) {

1544 
DATA_TYPE_BOOLEAN
:

1545 
»t
 = 
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
ty³
, 
NULL
, NULL);

1548 
DATA_TYPE_BOOLEAN_VALUE
:

1549 
DATA_TYPE_BYTE
:

1550 
DATA_TYPE_INT8
:

1551 
DATA_TYPE_UINT8
:

1552 
DATA_TYPE_INT16
:

1553 
DATA_TYPE_UINT16
:

1554 
DATA_TYPE_INT32
:

1555 
DATA_TYPE_UINT32
:

1556 
DATA_TYPE_INT64
:

1557 
DATA_TYPE_UINT64
:

1558 
DATA_TYPE_HRTIME
:

1559 
DATA_TYPE_STRING
:

1560 
DATA_TYPE_NVLIST
:

1561 #ià!
	`defšed
(
_KERNEL
)

1562 
DATA_TYPE_DOUBLE
:

1564 
v®
 = 
	`va_¬g
(
­
, *);

1565 
»t
 = 
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
ty³
, 
NULL
, 
v®
);

1568 
DATA_TYPE_BYTE_ARRAY
:

1569 
DATA_TYPE_BOOLEAN_ARRAY
:

1570 
DATA_TYPE_INT8_ARRAY
:

1571 
DATA_TYPE_UINT8_ARRAY
:

1572 
DATA_TYPE_INT16_ARRAY
:

1573 
DATA_TYPE_UINT16_ARRAY
:

1574 
DATA_TYPE_INT32_ARRAY
:

1575 
DATA_TYPE_UINT32_ARRAY
:

1576 
DATA_TYPE_INT64_ARRAY
:

1577 
DATA_TYPE_UINT64_ARRAY
:

1578 
DATA_TYPE_STRING_ARRAY
:

1579 
DATA_TYPE_NVLIST_ARRAY
:

1580 
v®
 = 
	`va_¬g
(
­
, *);

1581 
ÃËm
 = 
	`va_¬g
(
­
, 
ušt_t
 *);

1582 
»t
 = 
	`nvli¡_lookup_commÚ
(
nvl
, 
Çme
, 
ty³
, 
ÃËm
, 
v®
);

1586 
»t
 = 
EINVAL
;

1589 ià(
»t
 =ð
ENOENT
 && 
nÛÁok
)

1590 
»t
 = 0;

1592 
	`va_’d
(
­
);

1594  (
»t
);

1595 
	}
}

1613 
	$nvli¡_lookup_nv·œ_ei_£p
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, cÚ¡ 
£p
,

1614 
nv·œ_t
 **
»t
, *

, **
•
)

1616 
nv·œ_t
 *
nvp
;

1617 cÚ¡ *
Å
;

1618 *
£µ
;

1619 *
idxp
, *
idx•
;

1620 
nvli¡_t
 **
nva
;

1621 
idx
;

1622 
n
;

1624 ià(

)

1625 *

 = -1;

1626 ià(
•
)

1627 *
•
 = 
NULL
;

1629 ià((
nvl
 =ð
NULL
è|| (
Çme
 == NULL))

1630  (
EINVAL
);

1632 
£µ
 = 
NULL
;

1633 
idx
 = 0;

1635 
Å
 = 
Çme
;‚°&& *Å;‚°ð
£µ
) {

1637 ià(!(
nvl
->
nvl_nvæag
 & 
NV_UNIQUE_NAME
))

1638  (
ENOTSUP
);

1641 
	`sk_wh™e¥aû
(
Å
);

1642 ià(*
Å
 == 0)

1646 ià(
£p
)

1647 
£µ
 = 
	`¡rchr
(
Å
, 
£p
);

1649 
£µ
 = 
NULL
;

1652 
idxp
 = 
	`¡rchr
(
Å
, '[');

1655 ià(
£µ
 && 
idxp
 && (sepp < idxp))

1656 
idxp
 = 
NULL
;

1662 ià(
idxp
) {

1664 
n
 = 
idxp
++ - 
Å
;

1667 
	`sk_wh™e¥aû
(
idxp
);

1668 
£µ
 = 
idxp
;

1671 #ià
	`defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

1672 ià(
	`ddi_¡¹Þ
(
idxp
, &
idx•
, 0, &
idx
))

1673 
çž
;

1675 
idx
 = 
	`¡¹Þ
(
idxp
, &
idx•
, 0);

1677 ià(
idx•
 =ð
idxp
)

1678 
çž
;

1681 
£µ
 = 
idx•
;

1684 
	`sk_wh™e¥aû
(
£µ
);

1685 ià(*
£µ
++ != ']')

1686 
çž
;

1689 
	`sk_wh™e¥aû
(
£µ
);

1690 ià(
£p
 && (*
£µ
 == sep))

1691 
£µ
++;

1692 } ià(
£µ
) {

1693 
n
 = 
£µ
++ - 
Å
;

1695 
n
 = 
	`¡¾’
(
Å
);

1699 ià(
n
 == 0)

1700 
çž
;

1701 
n
--; (
Å
[n] == ' ') || (np[n] == '\t');‚--)

1703 
n
++;

1706 ià(
£µ
) {

1707 
	`sk_wh™e¥aû
(
£µ
);

1708 ià(*
£µ
 == 0)

1709 
£µ
 = 
NULL
;

1721 
nvp
 = 
	`nvli¡_Ãxt_nv·œ
(
nvl
, 
NULL
);‚vp != NULL;

1722 
nvp
 = 
	`nvli¡_Ãxt_nv·œ
(
nvl
,‚vp)) {

1725 ià(
	`¡ºcmp
(
Å
, 
	`nv·œ_Çme
(
nvp
), 
n
) ||

1726 (
	`¡¾’
(
	`nv·œ_Çme
(
nvp
)è!ð
n
))

1730 ià(
idxp
 && !
	`nv·œ_ty³_is_¬¿y
(
nvp
))

1731 
çž
;

1737 ià(
£µ
 =ð
NULL
) {

1738 ià(
»t
)

1739 *
»t
 = 
nvp
;

1740 ià(

 && 
idxp
)

1741 *

 = ()
idx
;

1750 ià(
	`nv·œ_ty³
(
nvp
è=ð
DATA_TYPE_NVLIST
) {

1751 
nvl
 = 
	`EMBEDDED_NVL
(
nvp
);

1753 } ià(
	`nv·œ_ty³
(
nvp
è=ð
DATA_TYPE_NVLIST_ARRAY
) {

1754 (è
	`nv·œ_v®ue_nvli¡_¬¿y
(
nvp
,

1755 &
nva
, (
ušt_t
 *)&
n
);

1756 ià((
n
 < 0è|| (
idx
 >=‚))

1757 
çž
;

1758 
nvl
 = 
nva
[
idx
];

1763 
çž
;

1765 ià(
nvp
 =ð
NULL
)

1766 
çž
;

1771 
çž
: ià(
•
 && 
£µ
)

1772 *
•
 = 
£µ
;

1773  (
EINVAL
);

1774 
	}
}

1780 
	$nvli¡_lookup_nv·œ
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
, 
nv·œ_t
 **
»t
)

1782  (
	`nvli¡_lookup_nv·œ_ei_£p
(
nvl
, 
Çme
, 0, 
»t
, 
NULL
, NULL));

1783 
	}
}

1790 
	$nvli¡_lookup_nv·œ_embedded_šdex
(
nvli¡_t
 *
nvl
,

1791 cÚ¡ *
Çme
, 
nv·œ_t
 **
»t
, *

, **
•
)

1793  (
	`nvli¡_lookup_nv·œ_ei_£p
(
nvl
, 
Çme
, '.', 
»t
, 

, 
•
));

1794 
	}
}

1796 
boÞ—n_t


1797 
	$nvli¡_exi¡s
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
)

1799 
nv´iv_t
 *
´iv
;

1800 
nv·œ_t
 *
nvp
;

1801 
i_nvp_t
 *
cu¼
;

1803 ià(
Çme
 =ð
NULL
 || 
nvl
 == NULL ||

1804 (
´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

1805  (
B_FALSE
);

1807 
cu¼
 = 
´iv
->
nvp_li¡
; cu¼ !ð
NULL
; cu¼ = cu¼->
nvi_Ãxt
) {

1808 
nvp
 = &
cu¼
->
nvi_nvp
;

1810 ià(
	`¡rcmp
(
Çme
, 
	`NVP_NAME
(
nvp
)) == 0)

1811  (
B_TRUE
);

1814  (
B_FALSE
);

1815 
	}
}

1818 
	$nv·œ_v®ue_boÞ—n_v®ue
(
nv·œ_t
 *
nvp
, 
boÞ—n_t
 *
v®
)

1820  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_BOOLEAN_VALUE
, 
NULL
, 
v®
));

1821 
	}
}

1824 
	$nv·œ_v®ue_by‹
(
nv·œ_t
 *
nvp
, 
uch¬_t
 *
v®
)

1826  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_BYTE
, 
NULL
, 
v®
));

1827 
	}
}

1830 
	$nv·œ_v®ue_št8
(
nv·œ_t
 *
nvp
, 
št8_t
 *
v®
)

1832  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_INT8
, 
NULL
, 
v®
));

1833 
	}
}

1836 
	$nv·œ_v®ue_ušt8
(
nv·œ_t
 *
nvp
, 
ušt8_t
 *
v®
)

1838  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_UINT8
, 
NULL
, 
v®
));

1839 
	}
}

1842 
	$nv·œ_v®ue_št16
(
nv·œ_t
 *
nvp
, 
št16_t
 *
v®
)

1844  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_INT16
, 
NULL
, 
v®
));

1845 
	}
}

1848 
	$nv·œ_v®ue_ušt16
(
nv·œ_t
 *
nvp
, 
ušt16_t
 *
v®
)

1850  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_UINT16
, 
NULL
, 
v®
));

1851 
	}
}

1854 
	$nv·œ_v®ue_št32
(
nv·œ_t
 *
nvp
, 
št32_t
 *
v®
)

1856  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_INT32
, 
NULL
, 
v®
));

1857 
	}
}

1860 
	$nv·œ_v®ue_ušt32
(
nv·œ_t
 *
nvp
, 
ušt32_t
 *
v®
)

1862  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_UINT32
, 
NULL
, 
v®
));

1863 
	}
}

1866 
	$nv·œ_v®ue_št64
(
nv·œ_t
 *
nvp
, 
št64_t
 *
v®
)

1868  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_INT64
, 
NULL
, 
v®
));

1869 
	}
}

1872 
	$nv·œ_v®ue_ušt64
(
nv·œ_t
 *
nvp
, 
ušt64_t
 *
v®
)

1874  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_UINT64
, 
NULL
, 
v®
));

1875 
	}
}

1877 #ià!
defšed
(
_KERNEL
)

1879 
	$nv·œ_v®ue_doubË
(
nv·œ_t
 *
nvp
, *
v®
)

1881  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_DOUBLE
, 
NULL
, 
v®
));

1882 
	}
}

1886 
	$nv·œ_v®ue_¡ršg
(
nv·œ_t
 *
nvp
, **
v®
)

1888  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_STRING
, 
NULL
, 
v®
));

1889 
	}
}

1892 
	$nv·œ_v®ue_nvli¡
(
nv·œ_t
 *
nvp
, 
nvli¡_t
 **
v®
)

1894  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_NVLIST
, 
NULL
, 
v®
));

1895 
	}
}

1898 
	$nv·œ_v®ue_boÞ—n_¬¿y
(
nv·œ_t
 *
nvp
, 
boÞ—n_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1900  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_BOOLEAN_ARRAY
, 
ÃËm
, 
v®
));

1901 
	}
}

1904 
	$nv·œ_v®ue_by‹_¬¿y
(
nv·œ_t
 *
nvp
, 
uch¬_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1906  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_BYTE_ARRAY
, 
ÃËm
, 
v®
));

1907 
	}
}

1910 
	$nv·œ_v®ue_št8_¬¿y
(
nv·œ_t
 *
nvp
, 
št8_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1912  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_INT8_ARRAY
, 
ÃËm
, 
v®
));

1913 
	}
}

1916 
	$nv·œ_v®ue_ušt8_¬¿y
(
nv·œ_t
 *
nvp
, 
ušt8_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1918  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_UINT8_ARRAY
, 
ÃËm
, 
v®
));

1919 
	}
}

1922 
	$nv·œ_v®ue_št16_¬¿y
(
nv·œ_t
 *
nvp
, 
št16_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1924  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_INT16_ARRAY
, 
ÃËm
, 
v®
));

1925 
	}
}

1928 
	$nv·œ_v®ue_ušt16_¬¿y
(
nv·œ_t
 *
nvp
, 
ušt16_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1930  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_UINT16_ARRAY
, 
ÃËm
, 
v®
));

1931 
	}
}

1934 
	$nv·œ_v®ue_št32_¬¿y
(
nv·œ_t
 *
nvp
, 
št32_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1936  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_INT32_ARRAY
, 
ÃËm
, 
v®
));

1937 
	}
}

1940 
	$nv·œ_v®ue_ušt32_¬¿y
(
nv·œ_t
 *
nvp
, 
ušt32_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1942  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_UINT32_ARRAY
, 
ÃËm
, 
v®
));

1943 
	}
}

1946 
	$nv·œ_v®ue_št64_¬¿y
(
nv·œ_t
 *
nvp
, 
št64_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1948  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_INT64_ARRAY
, 
ÃËm
, 
v®
));

1949 
	}
}

1952 
	$nv·œ_v®ue_ušt64_¬¿y
(
nv·œ_t
 *
nvp
, 
ušt64_t
 **
v®
, 
ušt_t
 *
ÃËm
)

1954  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_UINT64_ARRAY
, 
ÃËm
, 
v®
));

1955 
	}
}

1958 
	$nv·œ_v®ue_¡ršg_¬¿y
(
nv·œ_t
 *
nvp
, ***
v®
, 
ušt_t
 *
ÃËm
)

1960  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_STRING_ARRAY
, 
ÃËm
, 
v®
));

1961 
	}
}

1964 
	$nv·œ_v®ue_nvli¡_¬¿y
(
nv·œ_t
 *
nvp
, 
nvli¡_t
 ***
v®
, 
ušt_t
 *
ÃËm
)

1966  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_NVLIST_ARRAY
, 
ÃËm
, 
v®
));

1967 
	}
}

1970 
	$nv·œ_v®ue_h¹ime
(
nv·œ_t
 *
nvp
, 
h¹ime_t
 *
v®
)

1972  (
	`nv·œ_v®ue_commÚ
(
nvp
, 
DATA_TYPE_HRTIME
, 
NULL
, 
v®
));

1973 
	}
}

1979 
	$nvli¡_add_nv·œ
(
nvli¡_t
 *
nvl
, 
nv·œ_t
 *
nvp
)

1981 ià(
nvl
 =ð
NULL
 || 
nvp
 == NULL)

1982  (
EINVAL
);

1984  (
	`nvli¡_add_commÚ
(
nvl
, 
	`NVP_NAME
(
nvp
), 
	`NVP_TYPE
(nvp),

1985 
	`NVP_NELEM
(
nvp
), 
	`NVP_VALUE
(nvp)));

1986 
	}
}

1996 
	$nvli¡_m”ge
(
nvli¡_t
 *
d¡
,‚vli¡_ˆ*
nvl
, 
æag
)

1998 ià(
nvl
 =ð
NULL
 || 
d¡
 == NULL)

1999  (
EINVAL
);

2001 ià(
d¡
 !ð
nvl
)

2002  (
	`nvli¡_cÝy_·œs
(
nvl
, 
d¡
));

2005 
	}
}

2010 
	#NVS_OP_ENCODE
 0

	)

2011 
	#NVS_OP_DECODE
 1

	)

2012 
	#NVS_OP_GETSIZE
 2

	)

2014 
nvs_Ýs
 
	tnvs_Ýs_t
;

2017 
	mnvs_Ý
;

2018 cÚ¡ 
nvs_Ýs_t
 *
	mnvs_Ýs
;

2019 *
	mnvs_´iv©e
;

2020 
nv´iv_t
 *
	mnvs_´iv
;

2021 } 
	tnv¡»am_t
;

2042 
	snvs_Ýs
 {

2043 (*
	mnvs_nvli¡
)(
	mnv¡»am_t
 *, 
	mnvli¡_t
 *, 
	msize_t
 *);

2044 (*
	mnvs_nv·œ
)(
	mnv¡»am_t
 *, 
	mnv·œ_t
 *, 
	msize_t
 *);

2045 (*
	mnvs_nvp_Ý
)(
	mnv¡»am_t
 *, 
	mnv·œ_t
 *);

2046 (*
	mnvs_nvp_size
)(
	mnv¡»am_t
 *, 
	mnv·œ_t
 *, 
	msize_t
 *);

2047 (*
	mnvs_nvl_fši
)(
	mnv¡»am_t
 *);

2051 
	mnvh_’codšg
;

2052 
	mnvh_’dŸn
;

2053 
	mnvh_»£rved1
;

2054 
	mnvh_»£rved2
;

2055 } 
	tnvs_h—d”_t
;

2058 
	$nvs_’code_·œs
(
nv¡»am_t
 *
nvs
, 
nvli¡_t
 *
nvl
)

2060 
nv´iv_t
 *
´iv
 = (nv´iv_ˆ*)(
ušŒ_t
)
nvl
->
nvl_´iv
;

2061 
i_nvp_t
 *
cu¼
;

2066 
cu¼
 = 
´iv
->
nvp_li¡
; cu¼ !ð
NULL
; cu¼ = cu¼->
nvi_Ãxt
)

2067 ià(
nvs
->
nvs_Ýs
->
	`nvs_nv·œ
Òvs, &
cu¼
->
nvi_nvp
, 
NULL
) != 0)

2068  (
EFAULT
);

2070  (
nvs
->
nvs_Ýs
->
	`nvs_nvl_fši
(nvs));

2071 
	}
}

2074 
	$nvs_decode_·œs
(
nv¡»am_t
 *
nvs
, 
nvli¡_t
 *
nvl
)

2076 
nv·œ_t
 *
nvp
;

2077 
size_t
 
nvsize
;

2078 
”r
;

2084 (
”r
 = 
nvs
->
nvs_Ýs
->
	`nvs_nv·œ
Òvs, 
NULL
, &
nvsize
)) == 0) {

2085 ià(
nvsize
 == 0)

2089 ià(
nvsize
 < 
	`NVP_SIZE_CALC
(1, 0))

2090  (
EFAULT
);

2092 ià((
nvp
 = 
	`nvp_buf_®loc
(
nvl
, 
nvsize
)è=ð
NULL
)

2093  (
ENOMEM
);

2095 ià((
”r
 = 
nvs
->
nvs_Ýs
->
	`nvs_nvp_Ý
Òvs, 
nvp
)) != 0) {

2096 
	`nvp_buf_ä“
(
nvl
, 
nvp
);

2097  (
”r
);

2100 ià(
	`i_v®id©e_nv·œ
(
nvp
) != 0) {

2101 
	`nv·œ_ä“
(
nvp
);

2102 
	`nvp_buf_ä“
(
nvl
, 
nvp
);

2103  (
EFAULT
);

2106 
	`nvp_buf_lšk
(
nvl
, 
nvp
);

2108  (
”r
);

2109 
	}
}

2112 
	$nvs_g‘size_·œs
(
nv¡»am_t
 *
nvs
, 
nvli¡_t
 *
nvl
, 
size_t
 *
buæ’
)

2114 
nv´iv_t
 *
´iv
 = (nv´iv_ˆ*)(
ušŒ_t
)
nvl
->
nvl_´iv
;

2115 
i_nvp_t
 *
cu¼
;

2116 
ušt64_t
 
nvsize
 = *
buæ’
;

2117 
size_t
 
size
;

2122 
cu¼
 = 
´iv
->
nvp_li¡
; cu¼ !ð
NULL
; cu¼ = cu¼->
nvi_Ãxt
) {

2123 ià(
nvs
->
nvs_Ýs
->
	`nvs_nvp_size
Òvs, &
cu¼
->
nvi_nvp
, &
size
) != 0)

2124  (
EINVAL
);

2126 ià((
nvsize
 +ð
size
è> 
INT32_MAX
)

2127  (
EINVAL
);

2130 *
buæ’
 = 
nvsize
;

2132 
	}
}

2135 
	$nvs_Ý”©iÚ
(
nv¡»am_t
 *
nvs
, 
nvli¡_t
 *
nvl
, 
size_t
 *
buæ’
)

2137 
”r
;

2139 ià(
nvl
->
nvl_´iv
 == 0)

2140  (
EFAULT
);

2145 ià((
”r
 = 
nvs
->
nvs_Ýs
->
	`nvs_nvli¡
Òvs, 
nvl
, 
buæ’
)) != 0)

2146  (
”r
);

2148 
nvs
->
nvs_Ý
) {

2149 
NVS_OP_ENCODE
:

2150 
”r
 = 
	`nvs_’code_·œs
(
nvs
, 
nvl
);

2153 
NVS_OP_DECODE
:

2154 
”r
 = 
	`nvs_decode_·œs
(
nvs
, 
nvl
);

2157 
NVS_OP_GETSIZE
:

2158 
”r
 = 
	`nvs_g‘size_·œs
(
nvs
, 
nvl
, 
buæ’
);

2162 
”r
 = 
EINVAL
;

2165  (
”r
);

2166 
	}
}

2169 
	$nvs_embedded
(
nv¡»am_t
 *
nvs
, 
nvli¡_t
 *
embedded
)

2171 
nvs
->
nvs_Ý
) {

2172 
NVS_OP_ENCODE
:

2173  (
	`nvs_Ý”©iÚ
(
nvs
, 
embedded
, 
NULL
));

2175 
NVS_OP_DECODE
: {

2176 
nv´iv_t
 *
´iv
;

2177 
”r
;

2179 ià(
embedded
->
nvl_v”siÚ
 !ð
NV_VERSION
)

2180  (
ENOTSUP
);

2182 ià((
´iv
 = 
	`nv_´iv_®loc_embedded
(
nvs
->
nvs_´iv
)è=ð
NULL
)

2183  (
ENOMEM
);

2185 
	`nvli¡_š™
(
embedded
,ƒmbedded->
nvl_nvæag
, 
´iv
);

2187 ià((
”r
 = 
	`nvs_Ý”©iÚ
(
nvs
, 
embedded
, 
NULL
)) != 0)

2188 
	`nvli¡_ä“
(
embedded
);

2189  (
”r
);

2195  (
EINVAL
);

2196 
	}
}

2199 
	$nvs_embedded_nvl_¬¿y
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
, 
size_t
 *
size
)

2201 
size_t
 
ÃËm
 = 
	`NVP_NELEM
(
nvp
);

2202 
nvli¡_t
 **
nvÍ
 = 
	`EMBEDDED_NVL_ARRAY
(
nvp
);

2203 
i
;

2205 
nvs
->
nvs_Ý
) {

2206 
NVS_OP_ENCODE
:

2207 
i
 = 0; i < 
ÃËm
; i++)

2208 ià(
	`nvs_embedded
(
nvs
, 
nvÍ
[
i
]) != 0)

2209  (
EFAULT
);

2212 
NVS_OP_DECODE
: {

2213 
size_t
 
Ën
 = 
ÃËm
 *  (
ušt64_t
);

2214 
nvli¡_t
 *
embedded
 = (nvli¡_ˆ*)((
ušŒ_t
)
nvÍ
 + 
Ën
);

2216 
	`bz”o
(
nvÍ
, 
Ën
);

2217 
i
 = 0; i < 
ÃËm
; i++) {

2218 ià(
	`nvs_embedded
(
nvs
, 
embedded
) != 0) {

2219 
	`nv·œ_ä“
(
nvp
);

2220  (
EFAULT
);

2223 
nvÍ
[
i
] = 
embedded
++;

2227 
NVS_OP_GETSIZE
: {

2228 
ušt64_t
 
nvsize
 = 0;

2230 
i
 = 0; i < 
ÃËm
; i++) {

2231 
size_t
 
nvp_sz
 = 0;

2233 ià(
	`nvs_Ý”©iÚ
(
nvs
, 
nvÍ
[
i
], &
nvp_sz
) != 0)

2234  (
EINVAL
);

2236 ià((
nvsize
 +ð
nvp_sz
è> 
INT32_MAX
)

2237  (
EINVAL
);

2240 *
size
 = 
nvsize
;

2244  (
EINVAL
);

2248 
	}
}

2250 
nvs_Çtive
(
nv¡»am_t
 *, 
nvli¡_t
 *, *, 
size_t
 *);

2258 
	$nvli¡_commÚ
(
nvli¡_t
 *
nvl
, *
buf
, 
size_t
 *
buæ’
, 
’codšg
,

2259 
nvs_Ý
)

2261 
”r
 = 0;

2262 
nv¡»am_t
 
nvs
;

2263 
nvl_’dŸn
;

2264 #ifdef 
_LITTLE_ENDIAN


2265 
ho¡_’dŸn
 = 1;

2267 
ho¡_’dŸn
 = 0;

2269 
nvs_h—d”_t
 *
nvh
 = (*)
buf
;

2271 ià(
buæ’
 =ð
NULL
 || 
nvl
 == NULL ||

2272 (
nvs
.
nvs_´iv
 = (
nv´iv_t
 *)(
ušŒ_t
)
nvl
->
nvl_´iv
è=ð
NULL
)

2273  (
EINVAL
);

2275 
nvs
.
nvs_Ý
 =‚vs_op;

2282 
nvs_Ý
) {

2283 
NVS_OP_ENCODE
:

2284 ià(
buf
 =ð
NULL
 || *
buæ’
 <  (
nvs_h—d”_t
))

2285  (
EINVAL
);

2287 
nvh
->
nvh_’codšg
 = 
’codšg
;

2288 
nvh
->
nvh_’dŸn
 = 
nvl_’dŸn
 = 
ho¡_’dŸn
;

2289 
nvh
->
nvh_»£rved1
 = 0;

2290 
nvh
->
nvh_»£rved2
 = 0;

2293 
NVS_OP_DECODE
:

2294 ià(
buf
 =ð
NULL
 || *
buæ’
 <  (
nvs_h—d”_t
))

2295  (
EINVAL
);

2298 
’codšg
 = 
nvh
->
nvh_’codšg
;

2299 
nvl_’dŸn
 = 
nvh
->
nvh_’dŸn
;

2302 
NVS_OP_GETSIZE
:

2303 
nvl_’dŸn
 = 
ho¡_’dŸn
;

2308 *
buæ’
 =  (
nvs_h—d”_t
);

2312  (
ENOTSUP
);

2318 
’codšg
) {

2319 
NV_ENCODE_NATIVE
:

2324 ià(
nvl_’dŸn
 !ð
ho¡_’dŸn
)

2325  (
ENOTSUP
);

2326 
”r
 = 
	`nvs_Çtive
(&
nvs
, 
nvl
, 
buf
, 
buæ’
);

2332 
”r
 = 
ENOTSUP
;

2336  (
”r
);

2337 
	}
}

2340 
	$nvli¡_size
(
nvli¡_t
 *
nvl
, 
size_t
 *
size
, 
’codšg
)

2342  (
	`nvli¡_commÚ
(
nvl
, 
NULL
, 
size
, 
’codšg
, 
NVS_OP_GETSIZE
));

2343 
	}
}

2350 
	$nvli¡_·ck
(
nvli¡_t
 *
nvl
, **
buå
, 
size_t
 *
buæ’
, 
’codšg
,

2351 
kmæag
)

2353 #ià
	`defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

2354  (
	`nvli¡_x·ck
(
nvl
, 
buå
, 
buæ’
, 
’codšg
,

2355 (
kmæag
 =ð
KM_SLEEP
 ? 
nv_®loc_¦“p
 : 
nv_®loc_no¦“p
)));

2357  (
	`nvli¡_x·ck
(
nvl
, 
buå
, 
buæ’
, 
’codšg
, 
nv_®loc_no¦“p
));

2359 
	}
}

2362 
	$nvli¡_x·ck
(
nvli¡_t
 *
nvl
, **
buå
, 
size_t
 *
buæ’
, 
’codšg
,

2363 
nv_®loc_t
 *
nva
)

2365 
nv´iv_t
 
nv´iv
;

2366 
size_t
 
®loc_size
;

2367 *
buf
;

2368 
”r
;

2370 ià(
nva
 =ð
NULL
 || 
nvl
 =ðNULL || 
buå
 =ðNULL || 
buæ’
 == NULL)

2371  (
EINVAL
);

2373 ià(*
buå
 !ð
NULL
)

2374  (
	`nvli¡_commÚ
(
nvl
, *
buå
, 
buæ’
, 
’codšg
,

2375 
NVS_OP_ENCODE
));

2389 
	`nv_´iv_š™
(&
nv´iv
, 
nva
, 0);

2391 ià((
”r
 = 
	`nvli¡_size
(
nvl
, &
®loc_size
, 
’codšg
)))

2392  (
”r
);

2394 ià((
buf
 = 
	`nv_mem_z®loc
(&
nv´iv
, 
®loc_size
)è=ð
NULL
)

2395  (
ENOMEM
);

2397 ià((
”r
 = 
	`nvli¡_commÚ
(
nvl
, 
buf
, &
®loc_size
, 
’codšg
,

2398 
NVS_OP_ENCODE
)) != 0) {

2399 
	`nv_mem_ä“
(&
nv´iv
, 
buf
, 
®loc_size
);

2401 *
buæ’
 = 
®loc_size
;

2402 *
buå
 = 
buf
;

2405  (
”r
);

2406 
	}
}

2413 
	$nvli¡_uÅack
(*
buf
, 
size_t
 
buæ’
, 
nvli¡_t
 **
nvÍ
, 
kmæag
)

2415 #ià
	`defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

2416  (
	`nvli¡_xuÅack
(
buf
, 
buæ’
, 
nvÍ
,

2417 (
kmæag
 =ð
KM_SLEEP
 ? 
nv_®loc_¦“p
 : 
nv_®loc_no¦“p
)));

2419  (
	`nvli¡_xuÅack
(
buf
, 
buæ’
, 
nvÍ
, 
nv_®loc_no¦“p
));

2421 
	}
}

2424 
	$nvli¡_xuÅack
(*
buf
, 
size_t
 
buæ’
, 
nvli¡_t
 **
nvÍ
, 
nv_®loc_t
 *
nva
)

2426 
nvli¡_t
 *
nvl
;

2427 
”r
;

2429 ià(
nvÍ
 =ð
NULL
)

2430  (
EINVAL
);

2432 ià((
”r
 = 
	`nvli¡_x®loc
(&
nvl
, 0, 
nva
)) != 0)

2433  (
”r
);

2435 ià((
”r
 = 
	`nvli¡_commÚ
(
nvl
, 
buf
, &
buæ’
, 0, 
NVS_OP_DECODE
)) != 0)

2436 
	`nvli¡_ä“
(
nvl
);

2438 *
nvÍ
 = 
nvl
;

2440  (
”r
);

2441 
	}
}

2457 
ÿddr_t
 
	mn_ba£
;

2458 
ÿddr_t
 
	mn_’d
;

2459 
ÿddr_t
 
	mn_cu¼
;

2460 
ušt_t
 
	mn_æag
;

2461 } 
	tnvs_Çtive_t
;

2464 
	$nvs_Çtive_ü—‹
(
nv¡»am_t
 *
nvs
, 
nvs_Çtive_t
 *
Çtive
, *
buf
,

2465 
size_t
 
buæ’
)

2467 
nvs
->
nvs_Ý
) {

2468 
NVS_OP_ENCODE
:

2469 
NVS_OP_DECODE
:

2470 
nvs
->
nvs_´iv©e
 = 
Çtive
;

2471 
Çtive
->
n_cu¼
 =‚©ive->
n_ba£
 = 
buf
;

2472 
Çtive
->
n_’d
 = 
buf
 + 
buæ’
;

2473 
Çtive
->
n_æag
 = 0;

2476 
NVS_OP_GETSIZE
:

2477 
nvs
->
nvs_´iv©e
 = 
Çtive
;

2478 
Çtive
->
n_cu¼
 =‚©ive->
n_ba£
 =‚©ive->
n_’d
 = 
NULL
;

2479 
Çtive
->
n_æag
 = 0;

2482  (
EINVAL
);

2484 
	}
}

2488 
	$nvs_Çtive_de¡roy
(
nv¡»am_t
 *
nvs
)

2490 
	}
}

2493 
	$Çtive_ý
(
nv¡»am_t
 *
nvs
, *
buf
, 
size_t
 
size
)

2495 
nvs_Çtive_t
 *
Çtive
 = (nvs_Çtive_ˆ*)
nvs
->
nvs_´iv©e
;

2497 ià(
Çtive
->
n_cu¼
 + 
size
 >‚©ive->
n_’d
)

2498  (
EFAULT
);

2504 
nvs
->
nvs_Ý
) {

2505 
NVS_OP_ENCODE
:

2506 
	`bcÝy
(
buf
, 
Çtive
->
n_cu¼
, 
size
);

2508 
NVS_OP_DECODE
:

2509 
	`bcÝy
(
Çtive
->
n_cu¼
, 
buf
, 
size
);

2512  (
EINVAL
);

2515 
Çtive
->
n_cu¼
 +ð
size
;

2517 
	}
}

2523 
	$nvs_Çtive_nvli¡
(
nv¡»am_t
 *
nvs
, 
nvli¡_t
 *
nvl
, 
size_t
 *
size
)

2525 
nvs_Çtive_t
 *
Çtive
 = 
nvs
->
nvs_´iv©e
;

2527 
nvs
->
nvs_Ý
) {

2528 
NVS_OP_ENCODE
:

2529 
NVS_OP_DECODE
:

2530 ià(
Çtive
->
n_æag
)

2533 
Çtive
->
n_æag
 = 1;

2536 ià(
	`Çtive_ý
(
nvs
, &
nvl
->
nvl_v”siÚ
,  (
št32_t
)) != 0 ||

2537 
	`Çtive_ý
(
nvs
, &
nvl
->
nvl_nvæag
,  (
št32_t
)) != 0)

2538  (
EFAULT
);

2542 
NVS_OP_GETSIZE
:

2550 ià(
Çtive
->
n_æag
) {

2551 *
size
 += 4;

2553 
Çtive
->
n_æag
 = 1;

2554 *
size
 +ð2 *  (
št32_t
) + 4;

2560  (
EINVAL
);

2562 
	}
}

2565 
	$nvs_Çtive_nvl_fši
(
nv¡»am_t
 *
nvs
)

2567 ià(
nvs
->
nvs_Ý
 =ð
NVS_OP_ENCODE
) {

2568 
nvs_Çtive_t
 *
Çtive
 = (nvs_Çtive_ˆ*)
nvs
->
nvs_´iv©e
;

2573 ià(
Çtive
->
n_cu¼
 +  (è>‚©ive->
n_’d
)

2574  (
EFAULT
);

2576 
	`bz”o
(
Çtive
->
n_cu¼
,  ());

2577 
Çtive
->
n_cu¼
 +=  ();

2581 
	}
}

2584 
	$nv·œ_Çtive_embedded
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
)

2586 ià(
nvs
->
nvs_Ý
 =ð
NVS_OP_ENCODE
) {

2587 
nvs_Çtive_t
 *
Çtive
 = (nvs_Çtive_ˆ*)
nvs
->
nvs_´iv©e
;

2588 
nvli¡_t
 *
·cked
 = (*)

2589 (
Çtive
->
n_cu¼
 - 
nvp
->
nvp_size
 + 
	`NVP_VALOFF
(nvp));

2595 
	`bz”o
(&
·cked
->
nvl_´iv
,  (packed->nvl_priv));

2598  (
	`nvs_embedded
(
nvs
, 
	`EMBEDDED_NVL
(
nvp
)));

2599 
	}
}

2602 
	$nv·œ_Çtive_embedded_¬¿y
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
)

2604 ià(
nvs
->
nvs_Ý
 =ð
NVS_OP_ENCODE
) {

2605 
nvs_Çtive_t
 *
Çtive
 = (nvs_Çtive_ˆ*)
nvs
->
nvs_´iv©e
;

2606 *
v®ue
 = 
Çtive
->
n_cu¼
 - 
nvp
->
nvp_size
 + 
	`NVP_VALOFF
(nvp);

2607 
size_t
 
Ën
 = 
	`NVP_NELEM
(
nvp
è*  (
ušt64_t
);

2608 
nvli¡_t
 *
·cked
 = (nvli¡_ˆ*)((
ušŒ_t
)
v®ue
 + 
Ën
);

2609 
i
;

2615 
	`bz”o
(
v®ue
, 
Ën
);

2617 
i
 = 0; i < 
	`NVP_NELEM
(
nvp
); i++, 
·cked
++)

2623 
	`bz”o
(&
·cked
->
nvl_´iv
,  (packed->nvl_priv));

2626  (
	`nvs_embedded_nvl_¬¿y
(
nvs
, 
nvp
, 
NULL
));

2627 
	}
}

2630 
	$nv·œ_Çtive_¡ršg_¬¿y
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
)

2632 
nvs
->
nvs_Ý
) {

2633 
NVS_OP_ENCODE
: {

2634 
nvs_Çtive_t
 *
Çtive
 = (nvs_Çtive_ˆ*)
nvs
->
nvs_´iv©e
;

2635 
ušt64_t
 *
¡½
 = (*)

2636 (
Çtive
->
n_cu¼
 - 
nvp
->
nvp_size
 + 
	`NVP_VALOFF
(nvp));

2642 
	`bz”o
(
¡½
, 
	`NVP_NELEM
(
nvp
è*  (
ušt64_t
));

2645 
NVS_OP_DECODE
: {

2646 **
¡½
 = (*)
	`NVP_VALUE
(
nvp
);

2647 *
buf
 = ((*)
¡½
 + 
	`NVP_NELEM
(
nvp
è*  (
ušt64_t
));

2648 
i
;

2650 
i
 = 0; i < 
	`NVP_NELEM
(
nvp
); i++) {

2651 
¡½
[
i
] = 
buf
;

2652 
buf
 +ð
	`¡¾’
(buf) + 1;

2657 
	}
}

2660 
	$nvs_Çtive_nvp_Ý
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
)

2662 
d©a_ty³_t
 
ty³
;

2663 
v®ue_sz
;

2664 
»t
 = 0;

2671 
nvs
->
nvs_Ý
) {

2672 
NVS_OP_ENCODE
:

2673 
NVS_OP_DECODE
:

2674 ià(
	`Çtive_ý
(
nvs
, 
nvp
,‚vp->
nvp_size
) != 0)

2675  (
EFAULT
);

2678  (
EINVAL
);

2682 ià(
	`i_v®id©e_nv·œ_Çme
(
nvp
) != 0)

2683  (
EFAULT
);

2685 
ty³
 = 
	`NVP_TYPE
(
nvp
);

2692 ià((
v®ue_sz
 = 
	`i_g‘_v®ue_size
(
ty³
, 
NULL
, 
	`NVP_NELEM
(
nvp
))) < 0)

2693  (
EFAULT
);

2695 ià(
	`NVP_SIZE_CALC
(
nvp
->
nvp_Çme_sz
, 
v®ue_sz
è>‚vp->
nvp_size
)

2696  (
EFAULT
);

2698 
ty³
) {

2699 
DATA_TYPE_NVLIST
:

2700 
»t
 = 
	`nv·œ_Çtive_embedded
(
nvs
, 
nvp
);

2702 
DATA_TYPE_NVLIST_ARRAY
:

2703 
»t
 = 
	`nv·œ_Çtive_embedded_¬¿y
(
nvs
, 
nvp
);

2705 
DATA_TYPE_STRING_ARRAY
:

2706 
	`nv·œ_Çtive_¡ršg_¬¿y
(
nvs
, 
nvp
);

2712  (
»t
);

2713 
	}
}

2716 
	$nvs_Çtive_nvp_size
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
, 
size_t
 *
size
)

2718 
ušt64_t
 
nvp_sz
 = 
nvp
->
nvp_size
;

2720 
	`NVP_TYPE
(
nvp
)) {

2721 
DATA_TYPE_NVLIST
: {

2722 
size_t
 
nvsize
 = 0;

2724 ià(
	`nvs_Ý”©iÚ
(
nvs
, 
	`EMBEDDED_NVL
(
nvp
), &
nvsize
) != 0)

2725  (
EINVAL
);

2727 
nvp_sz
 +ð
nvsize
;

2730 
DATA_TYPE_NVLIST_ARRAY
: {

2731 
size_t
 
nvsize
;

2733 ià(
	`nvs_embedded_nvl_¬¿y
(
nvs
, 
nvp
, &
nvsize
) != 0)

2734  (
EINVAL
);

2736 
nvp_sz
 +ð
nvsize
;

2743 ià(
nvp_sz
 > 
INT32_MAX
)

2744  (
EINVAL
);

2746 *
size
 = 
nvp_sz
;

2749 
	}
}

2752 
	$nvs_Çtive_nv·œ
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
, 
size_t
 *
size
)

2754 
nvs
->
nvs_Ý
) {

2755 
NVS_OP_ENCODE
:

2756  (
	`nvs_Çtive_nvp_Ý
(
nvs
, 
nvp
));

2758 
NVS_OP_DECODE
: {

2759 
nvs_Çtive_t
 *
Çtive
 = (nvs_Çtive_ˆ*)
nvs
->
nvs_´iv©e
;

2760 
št32_t
 
decode_Ën
;

2763 ià(
Çtive
->
n_cu¼
 +  (
št32_t
è>‚©ive->
n_’d
)

2764  (
EFAULT
);

2765 
	`bcÝy
(
Çtive
->
n_cu¼
, &
decode_Ën
,  (
št32_t
));

2768 ià(
decode_Ën
 < 0 ||

2769 
decode_Ën
 > 
Çtive
->
n_’d
 -‚©ive->
n_cu¼
)

2770  (
EFAULT
);

2772 *
size
 = 
decode_Ën
;

2779 ià(*
size
 == 0)

2780 
Çtive
->
n_cu¼
 +ð (
št32_t
);

2785  (
EINVAL
);

2789 
	}
}

2791 cÚ¡ 
nvs_Ýs_t
 
	gnvs_Çtive_Ýs
 = {

2792 
nvs_Çtive_nvli¡
,

2793 
nvs_Çtive_nv·œ
,

2794 
nvs_Çtive_nvp_Ý
,

2795 
nvs_Çtive_nvp_size
,

2796 
nvs_Çtive_nvl_fši


2800 
	$nvs_Çtive
(
nv¡»am_t
 *
nvs
, 
nvli¡_t
 *
nvl
, *
buf
, 
size_t
 *
buæ’
)

2802 
nvs_Çtive_t
 
Çtive
;

2803 
”r
;

2805 
nvs
->
nvs_Ýs
 = &
nvs_Çtive_Ýs
;

2807 ià((
”r
 = 
	`nvs_Çtive_ü—‹
(
nvs
, &
Çtive
, 
buf
 +  (
nvs_h—d”_t
),

2808 *
buæ’
 -  (
nvs_h—d”_t
))) != 0)

2809  (
”r
);

2811 
”r
 = 
	`nvs_Ý”©iÚ
(
nvs
, 
nvl
, 
buæ’
);

2813 
	`nvs_Çtive_de¡roy
(
nvs
);

2815  (
”r
);

2816 
	}
}

2839 
	$nvs_xdr_ü—‹
(
nv¡»am_t
 *
nvs
, 
XDR
 *
xdr
, *
buf
, 
size_t
 
buæ’
)

2842 ià((
ulÚg_t
)
buf
 % 4 != 0)

2843  (
EFAULT
);

2845 
nvs
->
nvs_Ý
) {

2846 
NVS_OP_ENCODE
:

2847 
	`xdrmem_ü—‹
(
xdr
, 
buf
, (
ušt_t
)
buæ’
, 
XDR_ENCODE
);

2848 
nvs
->
nvs_´iv©e
 = 
xdr
;

2850 
NVS_OP_DECODE
:

2851 
	`xdrmem_ü—‹
(
xdr
, 
buf
, (
ušt_t
)
buæ’
, 
XDR_DECODE
);

2852 
nvs
->
nvs_´iv©e
 = 
xdr
;

2854 
NVS_OP_GETSIZE
:

2855 
nvs
->
nvs_´iv©e
 = 
NULL
;

2858  (
EINVAL
);

2860 
	}
}

2863 
	$nvs_xdr_de¡roy
(
nv¡»am_t
 *
nvs
)

2865 
nvs
->
nvs_Ý
) {

2866 
NVS_OP_ENCODE
:

2867 
NVS_OP_DECODE
:

2868 
	`xdr_de¡roy
((
XDR
 *)
nvs
->
nvs_´iv©e
);

2873 
	}
}

2876 
	$nvs_xdr_nvli¡
(
nv¡»am_t
 *
nvs
, 
nvli¡_t
 *
nvl
, 
size_t
 *
size
)

2878 
nvs
->
nvs_Ý
) {

2879 
NVS_OP_ENCODE
:

2880 
NVS_OP_DECODE
: {

2881 
XDR
 *
xdr
 = 
nvs
->
nvs_´iv©e
;

2883 ià(!
	`xdr_št
(
xdr
, &
nvl
->
nvl_v”siÚ
) ||

2884 !
	`xdr_u_št
(
xdr
, &
nvl
->
nvl_nvæag
))

2885  (
EFAULT
);

2888 
NVS_OP_GETSIZE
: {

2893 *
size
 += 2 * 4 + 8;

2897  (
EINVAL
);

2900 
	}
}

2903 
	$nvs_xdr_nvl_fši
(
nv¡»am_t
 *
nvs
)

2905 ià(
nvs
->
nvs_Ý
 =ð
NVS_OP_ENCODE
) {

2906 
XDR
 *
xdr
 = 
nvs
->
nvs_´iv©e
;

2907 
z”o
 = 0;

2909 ià(!
	`xdr_št
(
xdr
, &
z”o
) || !xdr_int(xdr, &zero))

2910  (
EFAULT
);

2914 
	}
}

2921 
	$nvs_xdr_nvp_Ý
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
)

2923 
d©a_ty³_t
 
ty³
;

2924 *
buf
;

2925 *
buf_’d
 = (*)
nvp
 +‚vp->
nvp_size
;

2926 
v®ue_sz
;

2927 
ušt_t
 
ÃËm
, 
buæ’
;

2928 
boÞ_t
 
»t
 = 
FALSE
;

2929 
XDR
 *
xdr
 = 
nvs
->
nvs_´iv©e
;

2931 
	`ASSERT
(
xdr
 !ð
NULL
 && 
nvp
 != NULL);

2934 ià((
buf
 = 
	`NVP_NAME
(
nvp
)è>ð
buf_’d
)

2935  (
EFAULT
);

2936 
buæ’
 = 
buf_’d
 - 
buf
;

2938 ià(!
	`xdr_¡ršg
(
xdr
, &
buf
, 
buæ’
 - 1))

2939  (
EFAULT
);

2940 
nvp
->
nvp_Çme_sz
 = 
	`¡¾’
(
buf
) + 1;

2943 ià(!
	`xdr_št
(
xdr
, (*)&
nvp
->
nvp_ty³
) ||

2944 !
	`xdr_št
(
xdr
, &
nvp
->
nvp_v®ue_–em
))

2945  (
EFAULT
);

2947 
ty³
 = 
	`NVP_TYPE
(
nvp
);

2948 
ÃËm
 = 
nvp
->
nvp_v®ue_–em
;

2955 ià((
v®ue_sz
 = 
	`i_g‘_v®ue_size
(
ty³
, 
NULL
, 
ÃËm
)) < 0)

2956  (
EFAULT
);

2959 ià(
ÃËm
 == 0)

2963 ià((
buf
 = 
	`NVP_VALUE
(
nvp
)è>ð
buf_’d
)

2964  (
EFAULT
);

2965 
buæ’
 = 
buf_’d
 - 
buf
;

2967 ià(
buæ’
 < 
v®ue_sz
)

2968  (
EFAULT
);

2970 
ty³
) {

2971 
DATA_TYPE_NVLIST
:

2972 ià(
	`nvs_embedded
(
nvs
, (*)
buf
) == 0)

2976 
DATA_TYPE_NVLIST_ARRAY
:

2977 ià(
	`nvs_embedded_nvl_¬¿y
(
nvs
, 
nvp
, 
NULL
) == 0)

2981 
DATA_TYPE_BOOLEAN
:

2982 
»t
 = 
TRUE
;

2985 
DATA_TYPE_BYTE
:

2986 
DATA_TYPE_INT8
:

2987 
DATA_TYPE_UINT8
:

2988 
»t
 = 
	`xdr_ch¬
(
xdr
, 
buf
);

2991 
DATA_TYPE_INT16
:

2992 
»t
 = 
	`xdr_shÜt
(
xdr
, (*)
buf
);

2995 
DATA_TYPE_UINT16
:

2996 
»t
 = 
	`xdr_u_shÜt
(
xdr
, (*)
buf
);

2999 
DATA_TYPE_BOOLEAN_VALUE
:

3000 
DATA_TYPE_INT32
:

3001 
»t
 = 
	`xdr_št
(
xdr
, (*)
buf
);

3004 
DATA_TYPE_UINT32
:

3005 
»t
 = 
	`xdr_u_št
(
xdr
, (*)
buf
);

3008 
DATA_TYPE_INT64
:

3009 
»t
 = 
	`xdr_lÚglÚg_t
(
xdr
, (*)
buf
);

3012 
DATA_TYPE_UINT64
:

3013 
»t
 = 
	`xdr_u_lÚglÚg_t
(
xdr
, (*)
buf
);

3016 
DATA_TYPE_HRTIME
:

3020 
»t
 = 
	`xdr_lÚglÚg_t
(
xdr
, (*)
buf
);

3022 #ià!
	`defšed
(
_KERNEL
)

3023 
DATA_TYPE_DOUBLE
:

3024 
»t
 = 
	`xdr_doubË
(
xdr
, (*)
buf
);

3027 
DATA_TYPE_STRING
:

3028 
»t
 = 
	`xdr_¡ršg
(
xdr
, &
buf
, 
buæ’
 - 1);

3031 
DATA_TYPE_BYTE_ARRAY
:

3032 
»t
 = 
	`xdr_Ýaque
(
xdr
, 
buf
, 
ÃËm
);

3035 
DATA_TYPE_INT8_ARRAY
:

3036 
DATA_TYPE_UINT8_ARRAY
:

3037 
»t
 = 
	`xdr_¬¿y
(
xdr
, &
buf
, &
ÃËm
, 
buæ’
,  (
št8_t
),

3038 (
xd½roc_t
)
xdr_ch¬
);

3041 
DATA_TYPE_INT16_ARRAY
:

3042 
»t
 = 
	`xdr_¬¿y
(
xdr
, &
buf
, &
ÃËm
, 
buæ’
 /  (
št16_t
),

3043  (
št16_t
), (
xd½roc_t
)
xdr_shÜt
);

3046 
DATA_TYPE_UINT16_ARRAY
:

3047 
»t
 = 
	`xdr_¬¿y
(
xdr
, &
buf
, &
ÃËm
, 
buæ’
 /  (
ušt16_t
),

3048  (
ušt16_t
), (
xd½roc_t
)
xdr_u_shÜt
);

3051 
DATA_TYPE_BOOLEAN_ARRAY
:

3052 
DATA_TYPE_INT32_ARRAY
:

3053 
»t
 = 
	`xdr_¬¿y
(
xdr
, &
buf
, &
ÃËm
, 
buæ’
 /  (
št32_t
),

3054  (
št32_t
), (
xd½roc_t
)
xdr_št
);

3057 
DATA_TYPE_UINT32_ARRAY
:

3058 
»t
 = 
	`xdr_¬¿y
(
xdr
, &
buf
, &
ÃËm
, 
buæ’
 /  (
ušt32_t
),

3059  (
ušt32_t
), (
xd½roc_t
)
xdr_u_št
);

3062 
DATA_TYPE_INT64_ARRAY
:

3063 
»t
 = 
	`xdr_¬¿y
(
xdr
, &
buf
, &
ÃËm
, 
buæ’
 /  (
št64_t
),

3064  (
št64_t
), (
xd½roc_t
)
xdr_lÚglÚg_t
);

3067 
DATA_TYPE_UINT64_ARRAY
:

3068 
»t
 = 
	`xdr_¬¿y
(
xdr
, &
buf
, &
ÃËm
, 
buæ’
 /  (
ušt64_t
),

3069  (
ušt64_t
), (
xd½roc_t
)
xdr_u_lÚglÚg_t
);

3072 
DATA_TYPE_STRING_ARRAY
: {

3073 
size_t
 
Ën
 = 
ÃËm
 *  (
ušt64_t
);

3074 **
¡½
 = (*)
buf
;

3075 
i
;

3077 ià(
nvs
->
nvs_Ý
 =ð
NVS_OP_DECODE
)

3078 
	`bz”o
(
buf
, 
Ën
);

3080 
i
 = 0; i < 
ÃËm
; i++) {

3081 ià(
buæ’
 <ð
Ën
)

3082  (
EFAULT
);

3084 
buf
 +ð
Ën
;

3085 
buæ’
 -ð
Ën
;

3087 ià(
	`xdr_¡ršg
(
xdr
, &
buf
, 
buæ’
 - 1è!ð
TRUE
)

3088  (
EFAULT
);

3090 ià(
nvs
->
nvs_Ý
 =ð
NVS_OP_DECODE
)

3091 
¡½
[
i
] = 
buf
;

3092 
Ën
 = 
	`¡¾’
(
buf
) + 1;

3094 
»t
 = 
TRUE
;

3101  (
»t
 =ð
TRUE
 ? 0 : 
EFAULT
);

3102 
	}
}

3105 
	$nvs_xdr_nvp_size
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
, 
size_t
 *
size
)

3107 
d©a_ty³_t
 
ty³
 = 
	`NVP_TYPE
(
nvp
);

3112 
ušt64_t
 
nvp_sz
 = 4 + 4 + 4 + 
	`NV_ALIGN4
(
	`¡¾’
(
	`NVP_NAME
(
nvp
))) + 4 + 4;

3114 
ty³
) {

3115 
DATA_TYPE_BOOLEAN
:

3118 
DATA_TYPE_BOOLEAN_VALUE
:

3119 
DATA_TYPE_BYTE
:

3120 
DATA_TYPE_INT8
:

3121 
DATA_TYPE_UINT8
:

3122 
DATA_TYPE_INT16
:

3123 
DATA_TYPE_UINT16
:

3124 
DATA_TYPE_INT32
:

3125 
DATA_TYPE_UINT32
:

3126 
nvp_sz
 += 4;

3129 
DATA_TYPE_INT64
:

3130 
DATA_TYPE_UINT64
:

3131 
DATA_TYPE_HRTIME
:

3132 #ià!
	`defšed
(
_KERNEL
)

3133 
DATA_TYPE_DOUBLE
:

3135 
nvp_sz
 += 8;

3138 
DATA_TYPE_STRING
:

3139 
nvp_sz
 +ð4 + 
	`NV_ALIGN4
(
	`¡¾’
((*)
	`NVP_VALUE
(
nvp
)));

3142 
DATA_TYPE_BYTE_ARRAY
:

3143 
nvp_sz
 +ð
	`NV_ALIGN4
(
	`NVP_NELEM
(
nvp
));

3146 
DATA_TYPE_BOOLEAN_ARRAY
:

3147 
DATA_TYPE_INT8_ARRAY
:

3148 
DATA_TYPE_UINT8_ARRAY
:

3149 
DATA_TYPE_INT16_ARRAY
:

3150 
DATA_TYPE_UINT16_ARRAY
:

3151 
DATA_TYPE_INT32_ARRAY
:

3152 
DATA_TYPE_UINT32_ARRAY
:

3153 
nvp_sz
 +ð4 + 4 * (
ušt64_t
)
	`NVP_NELEM
(
nvp
);

3156 
DATA_TYPE_INT64_ARRAY
:

3157 
DATA_TYPE_UINT64_ARRAY
:

3158 
nvp_sz
 +ð4 + 8 * (
ušt64_t
)
	`NVP_NELEM
(
nvp
);

3161 
DATA_TYPE_STRING_ARRAY
: {

3162 
i
;

3163 **
¡rs
 = (*)
	`NVP_VALUE
(
nvp
);

3165 
i
 = 0; i < 
	`NVP_NELEM
(
nvp
); i++)

3166 
nvp_sz
 +ð4 + 
	`NV_ALIGN4
(
	`¡¾’
(
¡rs
[
i
]));

3171 
DATA_TYPE_NVLIST
:

3172 
DATA_TYPE_NVLIST_ARRAY
: {

3173 
size_t
 
nvsize
 = 0;

3174 
Þd_nvs_Ý
 = 
nvs
->
nvs_Ý
;

3175 
”r
;

3177 
nvs
->
nvs_Ý
 = 
NVS_OP_GETSIZE
;

3178 ià(
ty³
 =ð
DATA_TYPE_NVLIST
)

3179 
”r
 = 
	`nvs_Ý”©iÚ
(
nvs
, 
	`EMBEDDED_NVL
(
nvp
), &
nvsize
);

3181 
”r
 = 
	`nvs_embedded_nvl_¬¿y
(
nvs
, 
nvp
, &
nvsize
);

3182 
nvs
->
nvs_Ý
 = 
Þd_nvs_Ý
;

3184 ià(
”r
 != 0)

3185  (
EINVAL
);

3187 
nvp_sz
 +ð
nvsize
;

3192  (
EINVAL
);

3195 ià(
nvp_sz
 > 
INT32_MAX
)

3196  (
EINVAL
);

3198 *
size
 = 
nvp_sz
;

3201 
	}
}

3224 
	#NVS_XDR_HDR_LEN
 ((
size_t
)(5 * 4))

	)

3225 
	#NVS_XDR_DATA_LEN
(
y
è(((
size_t
)(yè<ð
NVS_XDR_HDR_LEN
) ? \

3226 0 : ((
size_t
)(
y
è- 
NVS_XDR_HDR_LEN
))

	)

3227 
	#NVS_XDR_MAX_LEN
(
x
è(
	`NVP_SIZE_CALC
(1, 0) + \

3228 (
	`NVS_XDR_DATA_LEN
(
x
) * 2) + \

3229 
	`NV_ALIGN4
((
	`NVS_XDR_DATA_LEN
(
x
è/ 4)))

	)

3232 
	$nvs_xdr_nv·œ
(
nv¡»am_t
 *
nvs
, 
nv·œ_t
 *
nvp
, 
size_t
 *
size
)

3234 
XDR
 *
xdr
 = 
nvs
->
nvs_´iv©e
;

3235 
št32_t
 
’code_Ën
, 
decode_Ën
;

3237 
nvs
->
nvs_Ý
) {

3238 
NVS_OP_ENCODE
: {

3239 
size_t
 
nvsize
;

3241 ià(
	`nvs_xdr_nvp_size
(
nvs
, 
nvp
, &
nvsize
) != 0)

3242  (
EFAULT
);

3244 
decode_Ën
 = 
nvp
->
nvp_size
;

3245 
’code_Ën
 = 
nvsize
;

3246 ià(!
	`xdr_št
(
xdr
, &
’code_Ën
è|| !xdr_št(xdr, &
decode_Ën
))

3247  (
EFAULT
);

3249  (
	`nvs_xdr_nvp_Ý
(
nvs
, 
nvp
));

3251 
NVS_OP_DECODE
: {

3252 
xdr_by‹¤ec
 
by‹¤ec
;

3255 ià(!
	`xdr_št
(
xdr
, &
’code_Ën
è|| !xdr_št(xdr, &
decode_Ën
))

3256  (
EFAULT
);

3257 *
size
 = 
decode_Ën
;

3260 ià(*
size
 == 0)

3264 ià(!
	`xdr_cÚŒÞ
(
xdr
, 
XDR_GET_BYTES_AVAIL
, &
by‹¤ec
))

3265  (
EFAULT
);

3267 ià(*
size
 > 
	`NVS_XDR_MAX_LEN
(
by‹¤ec
.
xc_num_avaž
))

3268  (
EFAULT
);

3273  (
EINVAL
);

3276 
	}
}

3278 cÚ¡ 
nvs_Ýs
 
	gnvs_xdr_Ýs
 = {

3279 
nvs_xdr_nvli¡
,

3280 
nvs_xdr_nv·œ
,

3281 
nvs_xdr_nvp_Ý
,

3282 
nvs_xdr_nvp_size
,

3283 
nvs_xdr_nvl_fši


3287 
	$nvs_xdr
(
nv¡»am_t
 *
nvs
, 
nvli¡_t
 *
nvl
, *
buf
, 
size_t
 *
buæ’
)

3289 
XDR
 
xdr
;

3290 
”r
;

3292 
nvs
->
nvs_Ýs
 = &
nvs_xdr_Ýs
;

3294 ià((
”r
 = 
	`nvs_xdr_ü—‹
(
nvs
, &
xdr
, 
buf
 +  (
nvs_h—d”_t
),

3295 *
buæ’
 -  (
nvs_h—d”_t
))) != 0)

3296  (
”r
);

3298 
”r
 = 
	`nvs_Ý”©iÚ
(
nvs
, 
nvl
, 
buæ’
);

3300 
	`nvs_xdr_de¡roy
(
nvs
);

3302  (
”r
);

3303 
	}
}

	@/home/han/libnvpair/nvpair.h

26 #iâdef 
_SYS_NVPAIR_H


27 
	#_SYS_NVPAIR_H


	)

29 
	~<sys/ty³s.h
>

30 
	~<sys/time.h
>

31 
	~<sys/”ºo.h
>

32 
	~<¡d¬g.h
>

33 
	~<š‰y³s.h
>

35 #ià
defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

36 
	~<sys/kmem.h
>

39 #ià!
defšed
(
TEXT_DOMAIN
)

40 
	#TEXT_DOMAIN
 "SYS_TEST"

	)

43 
	tušt_t
;

44 
	tuch¬_t
;

45 
	tlÚglÚg_t
;

46 
lÚglÚg_t
 
	th¹ime_t
;

47 
	tulÚg_t
;

48 
	tu_lÚglÚg_t
;

49 ’um { 
	mB_FALSE
, 
	mB_TRUE
 } 
	tboÞ—n_t
;

51 #ifdef 
__ýlu¥lus


56 
DATA_TYPE_UNKNOWN
 = 0,

57 
DATA_TYPE_BOOLEAN
,

58 
DATA_TYPE_BYTE
,

59 
DATA_TYPE_INT16
,

60 
DATA_TYPE_UINT16
,

61 
DATA_TYPE_INT32
,

62 
DATA_TYPE_UINT32
,

63 
DATA_TYPE_INT64
,

64 
DATA_TYPE_UINT64
,

65 
DATA_TYPE_STRING
,

66 
DATA_TYPE_BYTE_ARRAY
,

67 
DATA_TYPE_INT16_ARRAY
,

68 
DATA_TYPE_UINT16_ARRAY
,

69 
DATA_TYPE_INT32_ARRAY
,

70 
DATA_TYPE_UINT32_ARRAY
,

71 
DATA_TYPE_INT64_ARRAY
,

72 
DATA_TYPE_UINT64_ARRAY
,

73 
DATA_TYPE_STRING_ARRAY
,

74 
DATA_TYPE_HRTIME
,

75 
DATA_TYPE_NVLIST
,

76 
DATA_TYPE_NVLIST_ARRAY
,

77 
DATA_TYPE_BOOLEAN_VALUE
,

78 
DATA_TYPE_INT8
,

79 
DATA_TYPE_UINT8
,

80 
DATA_TYPE_BOOLEAN_ARRAY
,

81 
DATA_TYPE_INT8_ARRAY
,

82 #ià!
defšed
(
_KERNEL
)

83 
DATA_TYPE_UINT8_ARRAY
,

84 
DATA_TYPE_DOUBLE


86 
DATA_TYPE_UINT8_ARRAY


88 } 
	td©a_ty³_t
;

90 
	snv·œ
 {

91 
št32_t
 
nvp_size
;

92 
št16_t
 
nvp_Çme_sz
;

93 
št16_t
 
nvp_»£rve
;

94 
št32_t
 
nvp_v®ue_–em
;

95 
d©a_ty³_t
 
nvp_ty³
;

99 } 
	tnv·œ_t
;

102 
	snvli¡
 {

103 
št32_t
 
nvl_v”siÚ
;

104 
ušt32_t
 
nvl_nvæag
;

105 
ušt64_t
 
nvl_´iv
;

106 
ušt32_t
 
nvl_æag
;

107 
št32_t
 
nvl_·d
;

108 } 
	tnvli¡_t
;

111 
	#NV_VERSION
 0

	)

114 
	#NV_ENCODE_NATIVE
 0

	)

115 
	#NV_ENCODE_XDR
 1

	)

118 
	#NV_UNIQUE_NAME
 0x1

	)

119 
	#NV_UNIQUE_NAME_TYPE
 0x2

	)

122 
	#NV_FLAG_NOENTOK
 0x1

	)

125 
	#NV_ALIGN
(
x
è(((
ulÚg_t
)(xè+ 7ulè& ~7ul)

	)

126 
	#NV_ALIGN4
(
x
è(((xè+ 3è& ~3)

	)

128 
	#NVP_SIZE
(
nvp
è(Òvp)->
nvp_size
)

	)

129 
	#NVP_NAME
(
nvp
è((*)Òvpè+  (
nv·œ_t
))

	)

130 
	#NVP_TYPE
(
nvp
è(Òvp)->
nvp_ty³
)

	)

131 
	#NVP_NELEM
(
nvp
è(Òvp)->
nvp_v®ue_–em
)

	)

132 
	#NVP_VALUE
(
nvp
è((*)Òvpè+ 
	`NV_ALIGN
( (
nv·œ_t
) \

133 + (
nvp
)->
nvp_Çme_sz
))

	)

135 
	#NVL_VERSION
(
nvl
è(Òvl)->
nvl_v”siÚ
)

	)

136 
	#NVL_SIZE
(
nvl
è(Òvl)->
nvl_size
)

	)

137 
	#NVL_FLAG
(
nvl
è(Òvl)->
nvl_æag
)

	)

140 
nv_®loc_Ýs
 
	tnv_®loc_Ýs_t
;

142 
	snv_®loc
 {

143 cÚ¡ 
nv_®loc_Ýs_t
 *
nva_Ýs
;

144 *
nva_¬g
;

145 } 
	tnv_®loc_t
;

147 
	snv_®loc_Ýs
 {

148 (*
nv_ao_š™
)(
nv_®loc_t
 *, 
va_li¡
);

149 (*
nv_ao_fši
)(
nv_®loc_t
 *);

150 *(*
nv_ao_®loc
)(
nv_®loc_t
 *, 
size_t
);

151 (*
nv_ao_ä“
)(
nv_®loc_t
 *, *, 
size_t
);

152 (*
nv_ao_»£t
)(
nv_®loc_t
 *);

155 cÚ¡ 
nv_®loc_Ýs_t
 *
nv_fixed_Ýs
;

156 
nv_®loc_t
 *
nv_®loc_no¦“p
;

158 #ià
defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

159 
nv_®loc_t
 *
nv_®loc_¦“p
;

162 
nv_®loc_š™
(
nv_®loc_t
 *, cÚ¡ 
nv_®loc_Ýs_t
 *, ...);

163 
nv_®loc_»£t
(
nv_®loc_t
 *);

164 
nv_®loc_fši
(
nv_®loc_t
 *);

167 
nvli¡_®loc
(
nvli¡_t
 **, 
ušt_t
, );

168 
nvli¡_ä“
(
nvli¡_t
 *);

169 
nvli¡_size
(
nvli¡_t
 *, 
size_t
 *, );

170 
nvli¡_·ck
(
nvli¡_t
 *, **, 
size_t
 *, , );

171 
nvli¡_uÅack
(*, 
size_t
, 
nvli¡_t
 **, );

172 
nvli¡_dup
(
nvli¡_t
 *,‚vlist_t **, );

173 
nvli¡_m”ge
(
nvli¡_t
 *,‚vlist_t *, );

175 
ušt_t
 
nvli¡_nvæag
(
nvli¡_t
 *);

177 
nvli¡_x®loc
(
nvli¡_t
 **, 
ušt_t
, 
nv_®loc_t
 *);

178 
nvli¡_x·ck
(
nvli¡_t
 *, **, 
size_t
 *, , 
nv_®loc_t
 *);

179 
nvli¡_xuÅack
(*, 
size_t
, 
nvli¡_t
 **, 
nv_®loc_t
 *);

180 
nvli¡_xdup
(
nvli¡_t
 *,‚vli¡_ˆ**, 
nv_®loc_t
 *);

181 
nv_®loc_t
 *
nvli¡_lookup_nv_®loc
(
nvli¡_t
 *);

183 
nvli¡_add_nv·œ
(
nvli¡_t
 *, 
nv·œ_t
 *);

184 
nvli¡_add_boÞ—n
(
nvli¡_t
 *, const *);

185 
nvli¡_add_boÞ—n_v®ue
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
);

186 
nvli¡_add_by‹
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
);

187 
nvli¡_add_št8
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
);

188 
nvli¡_add_ušt8
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
);

189 
nvli¡_add_št16
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
);

190 
nvli¡_add_ušt16
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
);

191 
nvli¡_add_št32
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
);

192 
nvli¡_add_ušt32
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
);

193 
nvli¡_add_št64
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
);

194 
nvli¡_add_ušt64
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
);

195 
nvli¡_add_¡ršg
(
nvli¡_t
 *, const *, const *);

196 
nvli¡_add_nvli¡
(
nvli¡_t
 *, const *,‚vlist_t *);

197 
nvli¡_add_boÞ—n_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
 *, 
ušt_t
);

198 
nvli¡_add_by‹_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
 *, 
ušt_t
);

199 
nvli¡_add_št8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
 *, 
ušt_t
);

200 
nvli¡_add_ušt8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
 *, 
ušt_t
);

201 
nvli¡_add_št16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
 *, 
ušt_t
);

202 
nvli¡_add_ušt16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
 *, 
ušt_t
);

203 
nvli¡_add_št32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
 *, 
ušt_t
);

204 
nvli¡_add_ušt32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
 *, 
ušt_t
);

205 
nvli¡_add_št64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
 *, 
ušt_t
);

206 
nvli¡_add_ušt64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
 *, 
ušt_t
);

207 
nvli¡_add_¡ršg_¬¿y
(
nvli¡_t
 *, cÚ¡ *, *cÚ¡ *, 
ušt_t
);

208 
nvli¡_add_nvli¡_¬¿y
(
nvli¡_t
 *, cÚ¡ *,‚vli¡_ˆ**, 
ušt_t
);

209 
nvli¡_add_h¹ime
(
nvli¡_t
 *, cÚ¡ *, 
h¹ime_t
);

210 #ià!
defšed
(
_KERNEL
)

211 
nvli¡_add_doubË
(
nvli¡_t
 *, const *, );

214 
nvli¡_»move
(
nvli¡_t
 *, cÚ¡ *, 
d©a_ty³_t
);

215 
nvli¡_»move_®l
(
nvli¡_t
 *, const *);

216 
nvli¡_»move_nv·œ
(
nvli¡_t
 *, 
nv·œ_t
 *);

218 
nvli¡_lookup_boÞ—n
(
nvli¡_t
 *, const *);

219 
nvli¡_lookup_boÞ—n_v®ue
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
 *);

220 
nvli¡_lookup_by‹
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
 *);

221 
nvli¡_lookup_št8
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
 *);

222 
nvli¡_lookup_ušt8
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
 *);

223 
nvli¡_lookup_št16
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
 *);

224 
nvli¡_lookup_ušt16
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
 *);

225 
nvli¡_lookup_št32
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
 *);

226 
nvli¡_lookup_ušt32
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
 *);

227 
nvli¡_lookup_št64
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
 *);

228 
nvli¡_lookup_ušt64
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
 *);

229 
nvli¡_lookup_¡ršg
(
nvli¡_t
 *, const *, **);

230 
nvli¡_lookup_nvli¡
(
nvli¡_t
 *, const *,‚vlist_t **);

231 
nvli¡_lookup_boÞ—n_¬¿y
(
nvli¡_t
 *, const *,

232 
boÞ—n_t
 **, 
ušt_t
 *);

233 
nvli¡_lookup_by‹_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
 **, 
ušt_t
 *);

234 
nvli¡_lookup_št8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
 **, 
ušt_t
 *);

235 
nvli¡_lookup_ušt8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
 **, 
ušt_t
 *);

236 
nvli¡_lookup_št16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
 **, 
ušt_t
 *);

237 
nvli¡_lookup_ušt16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
 **, 
ušt_t
 *);

238 
nvli¡_lookup_št32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
 **, 
ušt_t
 *);

239 
nvli¡_lookup_ušt32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
 **, 
ušt_t
 *);

240 
nvli¡_lookup_št64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
 **, 
ušt_t
 *);

241 
nvli¡_lookup_ušt64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
 **, 
ušt_t
 *);

242 
nvli¡_lookup_¡ršg_¬¿y
(
nvli¡_t
 *, cÚ¡ *, ***, 
ušt_t
 *);

243 
nvli¡_lookup_nvli¡_¬¿y
(
nvli¡_t
 *, const *,

244 
nvli¡_t
 ***, 
ušt_t
 *);

245 
nvli¡_lookup_h¹ime
(
nvli¡_t
 *, cÚ¡ *, 
h¹ime_t
 *);

246 
nvli¡_lookup_·œs
(
nvli¡_t
 *, , ...);

247 #ià!
defšed
(
_KERNEL
)

248 
nvli¡_lookup_doubË
(
nvli¡_t
 *, const *, *);

251 
nvli¡_lookup_nv·œ
(
nvli¡_t
 *, cÚ¡ *, 
nv·œ_t
 **);

252 
nvli¡_lookup_nv·œ_embedded_šdex
(
nvli¡_t
 *, cÚ¡ *, 
nv·œ_t
 **,

254 
boÞ—n_t
 
nvli¡_exi¡s
(
nvli¡_t
 *, const *);

255 
boÞ—n_t
 
nvli¡_em±y
(
nvli¡_t
 *);

258 
nv·œ_t
 *
nvli¡_Ãxt_nv·œ
(
nvli¡_t
 *,‚vpair_t *);

259 
nv·œ_t
 *
nvli¡_´ev_nv·œ
(
nvli¡_t
 *,‚vpair_t *);

260 *
nv·œ_Çme
(
nv·œ_t
 *);

261 
d©a_ty³_t
 
nv·œ_ty³
(
nv·œ_t
 *);

262 
nv·œ_ty³_is_¬¿y
(
nv·œ_t
 *);

263 
nv·œ_v®ue_boÞ—n_v®ue
(
nv·œ_t
 *, 
boÞ—n_t
 *);

264 
nv·œ_v®ue_by‹
(
nv·œ_t
 *, 
uch¬_t
 *);

265 
nv·œ_v®ue_št8
(
nv·œ_t
 *, 
št8_t
 *);

266 
nv·œ_v®ue_ušt8
(
nv·œ_t
 *, 
ušt8_t
 *);

267 
nv·œ_v®ue_št16
(
nv·œ_t
 *, 
št16_t
 *);

268 
nv·œ_v®ue_ušt16
(
nv·œ_t
 *, 
ušt16_t
 *);

269 
nv·œ_v®ue_št32
(
nv·œ_t
 *, 
št32_t
 *);

270 
nv·œ_v®ue_ušt32
(
nv·œ_t
 *, 
ušt32_t
 *);

271 
nv·œ_v®ue_št64
(
nv·œ_t
 *, 
št64_t
 *);

272 
nv·œ_v®ue_ušt64
(
nv·œ_t
 *, 
ušt64_t
 *);

273 
nv·œ_v®ue_¡ršg
(
nv·œ_t
 *, **);

274 
nv·œ_v®ue_nvli¡
(
nv·œ_t
 *, 
nvli¡_t
 **);

275 
nv·œ_v®ue_boÞ—n_¬¿y
(
nv·œ_t
 *, 
boÞ—n_t
 **, 
ušt_t
 *);

276 
nv·œ_v®ue_by‹_¬¿y
(
nv·œ_t
 *, 
uch¬_t
 **, 
ušt_t
 *);

277 
nv·œ_v®ue_št8_¬¿y
(
nv·œ_t
 *, 
št8_t
 **, 
ušt_t
 *);

278 
nv·œ_v®ue_ušt8_¬¿y
(
nv·œ_t
 *, 
ušt8_t
 **, 
ušt_t
 *);

279 
nv·œ_v®ue_št16_¬¿y
(
nv·œ_t
 *, 
št16_t
 **, 
ušt_t
 *);

280 
nv·œ_v®ue_ušt16_¬¿y
(
nv·œ_t
 *, 
ušt16_t
 **, 
ušt_t
 *);

281 
nv·œ_v®ue_št32_¬¿y
(
nv·œ_t
 *, 
št32_t
 **, 
ušt_t
 *);

282 
nv·œ_v®ue_ušt32_¬¿y
(
nv·œ_t
 *, 
ušt32_t
 **, 
ušt_t
 *);

283 
nv·œ_v®ue_št64_¬¿y
(
nv·œ_t
 *, 
št64_t
 **, 
ušt_t
 *);

284 
nv·œ_v®ue_ušt64_¬¿y
(
nv·œ_t
 *, 
ušt64_t
 **, 
ušt_t
 *);

285 
nv·œ_v®ue_¡ršg_¬¿y
(
nv·œ_t
 *, ***, 
ušt_t
 *);

286 
nv·œ_v®ue_nvli¡_¬¿y
(
nv·œ_t
 *, 
nvli¡_t
 ***, 
ušt_t
 *);

287 
nv·œ_v®ue_h¹ime
(
nv·œ_t
 *, 
h¹ime_t
 *);

288 #ià!
defšed
(
_KERNEL
)

289 
nv·œ_v®ue_doubË
(
nv·œ_t
 *, *);

292 
nvli¡_t
 *
âvli¡_®loc
();

293 
âvli¡_ä“
(
nvli¡_t
 *);

294 
size_t
 
âvli¡_size
(
nvli¡_t
 *);

295 *
âvli¡_·ck
(
nvli¡_t
 *, 
size_t
 *);

296 
âvli¡_·ck_ä“
(*, 
size_t
);

297 
nvli¡_t
 *
âvli¡_uÅack
(*, 
size_t
);

298 
nvli¡_t
 *
âvli¡_dup
(nvlist_t *);

299 
âvli¡_m”ge
(
nvli¡_t
 *,‚vlist_t *);

301 
âvli¡_add_boÞ—n
(
nvli¡_t
 *, const *);

302 
âvli¡_add_boÞ—n_v®ue
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
);

303 
âvli¡_add_by‹
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
);

304 
âvli¡_add_št8
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
);

305 
âvli¡_add_ušt8
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
);

306 
âvli¡_add_št16
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
);

307 
âvli¡_add_ušt16
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
);

308 
âvli¡_add_št32
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
);

309 
âvli¡_add_ušt32
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
);

310 
âvli¡_add_št64
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
);

311 
âvli¡_add_ušt64
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
);

312 
âvli¡_add_¡ršg
(
nvli¡_t
 *, const *, const *);

313 
âvli¡_add_nvli¡
(
nvli¡_t
 *, const *,‚vlist_t *);

314 
âvli¡_add_nv·œ
(
nvli¡_t
 *, 
nv·œ_t
 *);

315 
âvli¡_add_boÞ—n_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
 *, 
ušt_t
);

316 
âvli¡_add_by‹_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
 *, 
ušt_t
);

317 
âvli¡_add_št8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
 *, 
ušt_t
);

318 
âvli¡_add_ušt8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
 *, 
ušt_t
);

319 
âvli¡_add_št16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
 *, 
ušt_t
);

320 
âvli¡_add_ušt16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
 *, 
ušt_t
);

321 
âvli¡_add_št32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
 *, 
ušt_t
);

322 
âvli¡_add_ušt32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
 *, 
ušt_t
);

323 
âvli¡_add_št64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
 *, 
ušt_t
);

324 
âvli¡_add_ušt64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
 *, 
ušt_t
);

325 
âvli¡_add_¡ršg_¬¿y
(
nvli¡_t
 *, cÚ¡ *, * cÚ¡ *, 
ušt_t
);

326 
âvli¡_add_nvli¡_¬¿y
(
nvli¡_t
 *, cÚ¡ *,‚vli¡_ˆ**, 
ušt_t
);

328 
âvli¡_»move
(
nvli¡_t
 *, const *);

329 
âvli¡_»move_nv·œ
(
nvli¡_t
 *, 
nv·œ_t
 *);

331 
nv·œ_t
 *
âvli¡_lookup_nv·œ
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

332 
boÞ—n_t
 
âvli¡_lookup_boÞ—n
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

333 
boÞ—n_t
 
âvli¡_lookup_boÞ—n_v®ue
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

334 
uch¬_t
 
âvli¡_lookup_by‹
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

335 
št8_t
 
âvli¡_lookup_št8
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

336 
št16_t
 
âvli¡_lookup_št16
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

337 
št32_t
 
âvli¡_lookup_št32
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

338 
št64_t
 
âvli¡_lookup_št64
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

339 
ušt8_t
 
âvli¡_lookup_ušt8_t
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

340 
ušt16_t
 
âvli¡_lookup_ušt16
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

341 
ušt32_t
 
âvli¡_lookup_ušt32
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

342 
ušt64_t
 
âvli¡_lookup_ušt64
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

343 *
âvli¡_lookup_¡ršg
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

344 
nvli¡_t
 *
âvli¡_lookup_nvli¡
Òvli¡_ˆ*
nvl
, cÚ¡ *
Çme
);

346 
boÞ—n_t
 
âv·œ_v®ue_boÞ—n_v®ue
(
nv·œ_t
 *
nvp
);

347 
uch¬_t
 
âv·œ_v®ue_by‹
(
nv·œ_t
 *
nvp
);

348 
št8_t
 
âv·œ_v®ue_št8
(
nv·œ_t
 *
nvp
);

349 
št16_t
 
âv·œ_v®ue_št16
(
nv·œ_t
 *
nvp
);

350 
št32_t
 
âv·œ_v®ue_št32
(
nv·œ_t
 *
nvp
);

351 
št64_t
 
âv·œ_v®ue_št64
(
nv·œ_t
 *
nvp
);

352 
ušt8_t
 
âv·œ_v®ue_ušt8_t
(
nv·œ_t
 *
nvp
);

353 
ušt16_t
 
âv·œ_v®ue_ušt16
(
nv·œ_t
 *
nvp
);

354 
ušt32_t
 
âv·œ_v®ue_ušt32
(
nv·œ_t
 *
nvp
);

355 
ušt64_t
 
âv·œ_v®ue_ušt64
(
nv·œ_t
 *
nvp
);

356 *
âv·œ_v®ue_¡ršg
(
nv·œ_t
 *
nvp
);

357 
nvli¡_t
 *
âv·œ_v®ue_nvli¡
(
nv·œ_t
 *
nvp
);

359 #ifdef 
__ýlu¥lus


	@/home/han/libnvpair/nvpair_alloc_system.c

27 
	~"nv·œ.h
"

28 
	~<¡dlib.h
>

32 
	$nv_®loc_sys
(
nv_®loc_t
 *
nva
, 
size_t
 
size
)

34  (
	`m®loc
(
size
));

35 
	}
}

39 
	$nv_ä“_sys
(
nv_®loc_t
 *
nva
, *
buf
, 
size_t
 
size
)

41 
	`ä“
(
buf
);

42 
	}
}

44 cÚ¡ 
nv_®loc_Ýs_t
 
	gsy¡em_Ýs_def
 = {

45 
NULL
,

46 
NULL
,

47 
nv_®loc_sys
,

48 
nv_ä“_sys
,

49 
NULL


52 
nv_®loc_t
 
	gnv_®loc_no¦“p_def
 = {

53 &
sy¡em_Ýs_def
,

54 
NULL


57 
nv_®loc_t
 *
	gnv_®loc_no¦“p
 = &
nv_®loc_no¦“p_def
;

	@/home/han/libnvpair/nvpair_impl.h

27 #iâdef 
_NVPAIR_IMPL_H


28 
	#_NVPAIR_IMPL_H


	)

30 #ifdeà
__ýlu¥lus


34 
	~"nv·œ.h
"

44 
i_nvp
 
	ti_nvp_t
;

46 
	si_nvp
 {

48 
ušt64_t
 
_nvi_®ign
;

50 
i_nvp_t
 *
_nvi_Ãxt
;

51 
i_nvp_t
 *
_nvi_´ev
;

52 } 
_nvi
;

53 } 
_nvi_un
;

54 
nv·œ_t
 
nvi_nvp
;

56 
	#nvi_Ãxt
 
_nvi_un
.
_nvi
.
_nvi_Ãxt


	)

57 
	#nvi_´ev
 
_nvi_un
.
_nvi
.
_nvi_´ev


	)

60 
i_nvp_t
 *
nvp_li¡
;

61 
i_nvp_t
 *
nvp_Ï¡
;

62 
i_nvp_t
 *
nvp_cu¼
;

63 
nv_®loc_t
 *
nvp_nva
;

64 
ušt32_t
 
nvp_¡©
;

65 } 
	tnv´iv_t
;

67 #ifdef 
__ýlu¥lus


	@/home/han/libnvpair/test/hello_nv.c

1 
	~<¡dio.h
>

2 
	~"../libnv·œ.h
"

5 
	$maš
() {

6 *
ý
;

7 
nvli¡_t
 *
Í
;

9 
	`nvli¡_®loc
(&
Í
, 
NV_UNIQUE_NAME
, 0);

11 
	`nvli¡_add_¡ršg
(
Í
, "foo", "bar");

13 
	`nvli¡_lookup_¡ršg
(
Í
, "foo", &
ý
);

15 
	`´štf
("v®uoàfoØis: %s\n", 
ý
);

17 
	`nvli¡_ä“
(
Í
);

19 
	}
}

	@isa_defs.h

28 #iâdef 
_SYS_ISA_DEFS_H


29 
	#_SYS_ISA_DEFS_H


	)

217 #ifdef 
__ýlu¥lus


225 #ià
defšed
(
__x86_64
è|| defšed(
__amd64
)

227 #ià!
defšed
(
__amd64
)

228 
	#__amd64


	)

231 #ià!
defšed
(
__x86
)

232 
	#__x86


	)

238 
	#_LITTLE_ENDIAN


	)

239 
	#_STACK_GROWS_DOWNWARD


	)

240 
	#_LONG_LONG_LTOH


	)

241 
	#_BIT_FIELDS_LTOH


	)

242 
	#_IEEE_754


	)

243 
	#_CHAR_IS_SIGNED


	)

244 
	#_BOOL_ALIGNMENT
 1

	)

245 
	#_CHAR_ALIGNMENT
 1

	)

246 
	#_SHORT_ALIGNMENT
 2

	)

247 
	#_INT_ALIGNMENT
 4

	)

248 
	#_FLOAT_ALIGNMENT
 4

	)

249 
	#_FLOAT_COMPLEX_ALIGNMENT
 4

	)

250 
	#_LONG_ALIGNMENT
 8

	)

251 
	#_LONG_LONG_ALIGNMENT
 8

	)

252 
	#_DOUBLE_ALIGNMENT
 8

	)

253 
	#_DOUBLE_COMPLEX_ALIGNMENT
 8

	)

254 
	#_LONG_DOUBLE_ALIGNMENT
 16

	)

255 
	#_LONG_DOUBLE_COMPLEX_ALIGNMENT
 16

	)

256 
	#_POINTER_ALIGNMENT
 8

	)

257 
	#_MAX_ALIGNMENT
 16

	)

258 
	#_ALIGNMENT_REQUIRED
 1

	)

263 
	#_LONG_LONG_ALIGNMENT_32
 4

	)

268 #ià!
defšed
(
_LP64
)

269 
	#_LP64


	)

271 #ià!
defšed
(
_I32LPx
è&& defšed(
_KERNEL
)

272 
	#_I32LPx


	)

274 
	#_MULTI_DATAMODEL


	)

275 
	#_SUNOS_VTOC_16


	)

276 
	#_DMA_USES_PHYSADDR


	)

277 
	#_FIRMWARE_NEEDS_FDISK


	)

278 
	#__i386_COMPAT


	)

279 
	#_PSM_MODULES


	)

280 
	#_RTC_CONFIG


	)

281 
	#_SOFT_HOSTID


	)

282 
	#_DONT_USE_1275_GENERIC_NAMES


	)

283 
	#_HAVE_CPUID_INSN


	)

290 #–ià
defšed
(
__i386
è|| defšed(
__i386__
)

292 #ià!
defšed
(
__i386
)

293 
	#__i386


	)

296 #ià!
defšed
(
__x86
)

297 
	#__x86


	)

303 
	#_LITTLE_ENDIAN


	)

304 
	#_STACK_GROWS_DOWNWARD


	)

305 
	#_LONG_LONG_LTOH


	)

306 
	#_BIT_FIELDS_LTOH


	)

307 
	#_IEEE_754


	)

308 
	#_CHAR_IS_SIGNED


	)

309 
	#_BOOL_ALIGNMENT
 1

	)

310 
	#_CHAR_ALIGNMENT
 1

	)

311 
	#_SHORT_ALIGNMENT
 2

	)

312 
	#_INT_ALIGNMENT
 4

	)

313 
	#_FLOAT_ALIGNMENT
 4

	)

314 
	#_FLOAT_COMPLEX_ALIGNMENT
 4

	)

315 
	#_LONG_ALIGNMENT
 4

	)

316 
	#_LONG_LONG_ALIGNMENT
 4

	)

317 
	#_DOUBLE_ALIGNMENT
 4

	)

318 
	#_DOUBLE_COMPLEX_ALIGNMENT
 4

	)

319 
	#_LONG_DOUBLE_ALIGNMENT
 4

	)

320 
	#_LONG_DOUBLE_COMPLEX_ALIGNMENT
 4

	)

321 
	#_POINTER_ALIGNMENT
 4

	)

322 
	#_MAX_ALIGNMENT
 4

	)

323 
	#_ALIGNMENT_REQUIRED
 0

	)

325 
	#_LONG_LONG_ALIGNMENT_32
 
_LONG_LONG_ALIGNMENT


	)

330 
	#_ILP32


	)

331 #ià!
defšed
(
_I32LPx
è&& defšed(
_KERNEL
)

332 
	#_I32LPx


	)

334 
	#_SUNOS_VTOC_16


	)

335 
	#_DMA_USES_PHYSADDR


	)

336 
	#_FIRMWARE_NEEDS_FDISK


	)

337 
	#_PSM_MODULES


	)

338 
	#_RTC_CONFIG


	)

339 
	#_SOFT_HOSTID


	)

340 
	#_DONT_USE_1275_GENERIC_NAMES


	)

341 
	#_HAVE_CPUID_INSN


	)

363 #–ià
defšed
(
__¥¬c
è|| defšed(
__¥¬cv9
è|| defšed(
__¥¬c__
)

364 #ià!
defšed
(
__¥¬c
)

365 
	#__¥¬c


	)

371 #ià
defšed
(
__¥¬cv8
è&& defšed(
__¥¬cv9
)

381 #ià!
defšed
(
__¥¬cv9
è&& !defšed(
__¥¬cv8
)

382 
	#__¥¬cv8


	)

389 
	#_BIG_ENDIAN


	)

390 
	#_STACK_GROWS_DOWNWARD


	)

391 
	#_LONG_LONG_HTOL


	)

392 
	#_BIT_FIELDS_HTOL


	)

393 
	#_IEEE_754


	)

394 
	#_CHAR_IS_SIGNED


	)

395 
	#_BOOL_ALIGNMENT
 1

	)

396 
	#_CHAR_ALIGNMENT
 1

	)

397 
	#_SHORT_ALIGNMENT
 2

	)

398 
	#_INT_ALIGNMENT
 4

	)

399 
	#_FLOAT_ALIGNMENT
 4

	)

400 
	#_FLOAT_COMPLEX_ALIGNMENT
 4

	)

401 
	#_LONG_LONG_ALIGNMENT
 8

	)

402 
	#_DOUBLE_ALIGNMENT
 8

	)

403 
	#_DOUBLE_COMPLEX_ALIGNMENT
 8

	)

404 
	#_ALIGNMENT_REQUIRED
 1

	)

409 
	#_SUNOS_VTOC_8


	)

410 
	#_DMA_USES_VIRTADDR


	)

411 
	#_NO_FDISK_PRESENT


	)

412 
	#_HAVE_TEM_FIRMWARE


	)

413 
	#_OBP


	)

419 #ià
defšed
(
__¥¬cv8
)

424 
	#_LONG_ALIGNMENT
 4

	)

425 
	#_LONG_DOUBLE_ALIGNMENT
 8

	)

426 
	#_LONG_DOUBLE_COMPLEX_ALIGNMENT
 8

	)

427 
	#_POINTER_ALIGNMENT
 4

	)

428 
	#_MAX_ALIGNMENT
 8

	)

430 
	#_LONG_LONG_ALIGNMENT_32
 
_LONG_LONG_ALIGNMENT


	)

435 
	#_ILP32


	)

436 #ià!
defšed
(
_I32LPx
è&& defšed(
_KERNEL
)

437 
	#_I32LPx


	)

444 #–ià
defšed
(
__¥¬cv9
)

449 
	#_LONG_ALIGNMENT
 8

	)

450 
	#_LONG_DOUBLE_ALIGNMENT
 16

	)

451 
	#_LONG_DOUBLE_COMPLEX_ALIGNMENT
 16

	)

452 
	#_POINTER_ALIGNMENT
 8

	)

453 
	#_MAX_ALIGNMENT
 16

	)

455 
	#_LONG_LONG_ALIGNMENT_32
 
_LONG_LONG_ALIGNMENT


	)

460 #ià!
defšed
(
_LP64
)

461 
	#_LP64


	)

463 #ià!
defšed
(
_I32LPx
)

464 
	#_I32LPx


	)

466 
	#_MULTI_DATAMODEL


	)

479 #ià
defšed
(
_ILP32
è&& defšed(
_LP64
)

483 #ifdef 
__ýlu¥lus


	@libnvpair.h

25 #iâdef 
_LIBNVPAIR_H


26 
	#_LIBNVPAIR_H


	)

28 
	~"nv·œ.h
"

29 
	~<¡dlib.h
>

30 
	~<¡dio.h
>

31 
	~<»gex.h
>

33 #ifdef 
__ýlu¥lus


44 
nv·œ_v®ue_m©ch
(
nv·œ_t
 *, , *, **);

45 
nv·œ_v®ue_m©ch_»gex
(
nv·œ_t
 *, , *, 
»gex_t
 *,

48 
nvli¡_´št
(
FILE
 *, 
nvli¡_t
 *);

49 
dump_nvli¡
(
nvli¡_t
 *, );

82 
nvli¡_´tùl
 *
	tnvli¡_´tùl_t
;

84 
	envli¡_šd’t_mode
 {

85 
	gNVLIST_INDENT_ABS
,

86 
	gNVLIST_INDENT_TABBED


89 
nvli¡_´tùl_t
 
nvli¡_´tùl_®loc
();

90 
nvli¡_´tùl_ä“
(
nvli¡_´tùl_t
);

91 
nvli¡_´t
(
nvli¡_t
 *, 
nvli¡_´tùl_t
);

94 
nvli¡_´tùl_£tde¡
(
nvli¡_´tùl_t
, 
FILE
 *);

95 
FILE
 *
nvli¡_´tùl_g‘de¡
(
nvli¡_´tùl_t
);

98 
nvli¡_´tùl_£tšd’t
(
nvli¡_´tùl_t
, 
nvli¡_šd’t_mode
,

100 
nvli¡_´tùl_došd’t
(
nvli¡_´tùl_t
, );

102 
	envli¡_´tùl_fmt
 {

103 
	gNVLIST_FMT_MEMBER_NAME
,

104 
	gNVLIST_FMT_MEMBER_POSTAMBLE
,

105 
	gNVLIST_FMT_BTWN_ARRAY


108 
nvli¡_´tùl_£tfmt
(
nvli¡_´tùl_t
, 
nvli¡_´tùl_fmt
,

110 
nvli¡_´tùl_dofmt
(
nvli¡_´tùl_t
, 
nvli¡_´tùl_fmt
, ...);

139 
	#NVLIST_PRINTCTL_SVDECL
(
funúame
, 
v®ty³
) \

140 
	`funúame
(
nvli¡_´tùl_t
, \

141 (*)(
nvli¡_´tùl_t
, *, 
nvli¡_t
 *, cÚ¡ *, 
v®ty³
), \

142 *)

	)

144 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_boÞ—n
, );

145 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_boÞ—n_v®ue
, 
boÞ—n_t
);

146 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_by‹
, 
uch¬_t
);

147 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_št8
, 
št8_t
);

148 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_ušt8
, 
ušt8_t
);

149 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_št16
, 
št16_t
);

150 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_ušt16
, 
ušt16_t
);

151 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_št32
, 
št32_t
);

152 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_ušt32
, 
ušt32_t
);

153 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_št64
, 
št64_t
);

154 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_ušt64
, 
ušt64_t
);

155 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_doubË
, );

156 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_¡ršg
, *);

157 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_h¹ime
, 
h¹ime_t
);

158 
NVLIST_PRINTCTL_SVDECL
(
nvli¡_´tùlÝ_nvli¡
, 
nvli¡_t
 *);

160 #undeà
NVLIST_PRINTCTL_SVDECL


170 
	#NVLIST_PRINTCTL_AVDECL
(
funúame
, 
vty³
) \

171 
	`funúame
(
nvli¡_´tùl_t
, \

172 (*)(
nvli¡_´tùl_t
, *, 
nvli¡_t
 *, cÚ¡ *, 
vty³
, 
ušt_t
), \

173 *)

	)

175 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_boÞ—n_¬¿y
, 
boÞ—n_t
 *);

176 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_by‹_¬¿y
, 
uch¬_t
 *);

177 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_št8_¬¿y
, 
št8_t
 *);

178 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_ušt8_¬¿y
, 
ušt8_t
 *);

179 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_št16_¬¿y
, 
št16_t
 *);

180 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_ušt16_¬¿y
, 
ušt16_t
 *);

181 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_št32_¬¿y
, 
št32_t
 *);

182 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_ušt32_¬¿y
, 
ušt32_t
 *);

183 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_št64_¬¿y
, 
št64_t
 *);

184 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_ušt64_¬¿y
, 
ušt64_t
 *);

185 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_¡ršg_¬¿y
, **);

186 
NVLIST_PRINTCTL_AVDECL
(
nvli¡_´tùlÝ_nvli¡_¬¿y
, 
nvli¡_t
 **);

188 #undeà
NVLIST_PRINTCTL_AVDECL


190 #ifdef 
__ýlu¥lus


	@nvpair.h

26 #iâdef 
_SYS_NVPAIR_H


27 
	#_SYS_NVPAIR_H


	)

29 
	~<sys/ty³s.h
>

30 
	~<sys/time.h
>

31 
	~<sys/”ºo.h
>

32 
	~<¡d¬g.h
>

33 
	~<š‰y³s.h
>

35 #ià
defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

36 
	~<sys/kmem.h
>

39 #ià!
defšed
(
TEXT_DOMAIN
)

40 
	#TEXT_DOMAIN
 "SYS_TEST"

	)

43 
	tušt_t
;

44 
	tuch¬_t
;

45 
	tlÚglÚg_t
;

46 
lÚglÚg_t
 
	th¹ime_t
;

47 
	tulÚg_t
;

48 
	tu_lÚglÚg_t
;

49 ’um { 
	mB_FALSE
, 
	mB_TRUE
 } 
	tboÞ—n_t
;

51 #ifdef 
__ýlu¥lus


56 
DATA_TYPE_UNKNOWN
 = 0,

57 
DATA_TYPE_BOOLEAN
,

58 
DATA_TYPE_BYTE
,

59 
DATA_TYPE_INT16
,

60 
DATA_TYPE_UINT16
,

61 
DATA_TYPE_INT32
,

62 
DATA_TYPE_UINT32
,

63 
DATA_TYPE_INT64
,

64 
DATA_TYPE_UINT64
,

65 
DATA_TYPE_STRING
,

66 
DATA_TYPE_BYTE_ARRAY
,

67 
DATA_TYPE_INT16_ARRAY
,

68 
DATA_TYPE_UINT16_ARRAY
,

69 
DATA_TYPE_INT32_ARRAY
,

70 
DATA_TYPE_UINT32_ARRAY
,

71 
DATA_TYPE_INT64_ARRAY
,

72 
DATA_TYPE_UINT64_ARRAY
,

73 
DATA_TYPE_STRING_ARRAY
,

74 
DATA_TYPE_HRTIME
,

75 
DATA_TYPE_NVLIST
,

76 
DATA_TYPE_NVLIST_ARRAY
,

77 
DATA_TYPE_BOOLEAN_VALUE
,

78 
DATA_TYPE_INT8
,

79 
DATA_TYPE_UINT8
,

80 
DATA_TYPE_BOOLEAN_ARRAY
,

81 
DATA_TYPE_INT8_ARRAY
,

82 #ià!
defšed
(
_KERNEL
)

83 
DATA_TYPE_UINT8_ARRAY
,

84 
DATA_TYPE_DOUBLE


86 
DATA_TYPE_UINT8_ARRAY


88 } 
	td©a_ty³_t
;

90 
	snv·œ
 {

91 
št32_t
 
nvp_size
;

92 
št16_t
 
nvp_Çme_sz
;

93 
št16_t
 
nvp_»£rve
;

94 
št32_t
 
nvp_v®ue_–em
;

95 
d©a_ty³_t
 
nvp_ty³
;

99 } 
	tnv·œ_t
;

102 
	snvli¡
 {

103 
št32_t
 
nvl_v”siÚ
;

104 
ušt32_t
 
nvl_nvæag
;

105 
ušt64_t
 
nvl_´iv
;

106 
ušt32_t
 
nvl_æag
;

107 
št32_t
 
nvl_·d
;

108 } 
	tnvli¡_t
;

111 
	#NV_VERSION
 0

	)

114 
	#NV_ENCODE_NATIVE
 0

	)

115 
	#NV_ENCODE_XDR
 1

	)

118 
	#NV_UNIQUE_NAME
 0x1

	)

119 
	#NV_UNIQUE_NAME_TYPE
 0x2

	)

122 
	#NV_FLAG_NOENTOK
 0x1

	)

125 
	#NV_ALIGN
(
x
è(((
ulÚg_t
)(xè+ 7ulè& ~7ul)

	)

126 
	#NV_ALIGN4
(
x
è(((xè+ 3è& ~3)

	)

128 
	#NVP_SIZE
(
nvp
è(Òvp)->
nvp_size
)

	)

129 
	#NVP_NAME
(
nvp
è((*)Òvpè+  (
nv·œ_t
))

	)

130 
	#NVP_TYPE
(
nvp
è(Òvp)->
nvp_ty³
)

	)

131 
	#NVP_NELEM
(
nvp
è(Òvp)->
nvp_v®ue_–em
)

	)

132 
	#NVP_VALUE
(
nvp
è((*)Òvpè+ 
	`NV_ALIGN
( (
nv·œ_t
) \

133 + (
nvp
)->
nvp_Çme_sz
))

	)

135 
	#NVL_VERSION
(
nvl
è(Òvl)->
nvl_v”siÚ
)

	)

136 
	#NVL_SIZE
(
nvl
è(Òvl)->
nvl_size
)

	)

137 
	#NVL_FLAG
(
nvl
è(Òvl)->
nvl_æag
)

	)

140 
nv_®loc_Ýs
 
	tnv_®loc_Ýs_t
;

142 
	snv_®loc
 {

143 cÚ¡ 
nv_®loc_Ýs_t
 *
nva_Ýs
;

144 *
nva_¬g
;

145 } 
	tnv_®loc_t
;

147 
	snv_®loc_Ýs
 {

148 (*
nv_ao_š™
)(
nv_®loc_t
 *, 
va_li¡
);

149 (*
nv_ao_fši
)(
nv_®loc_t
 *);

150 *(*
nv_ao_®loc
)(
nv_®loc_t
 *, 
size_t
);

151 (*
nv_ao_ä“
)(
nv_®loc_t
 *, *, 
size_t
);

152 (*
nv_ao_»£t
)(
nv_®loc_t
 *);

155 cÚ¡ 
nv_®loc_Ýs_t
 *
nv_fixed_Ýs
;

156 
nv_®loc_t
 *
nv_®loc_no¦“p
;

158 #ià
defšed
(
_KERNEL
è&& !defšed(
_BOOT
)

159 
nv_®loc_t
 *
nv_®loc_¦“p
;

162 
nv_®loc_š™
(
nv_®loc_t
 *, cÚ¡ 
nv_®loc_Ýs_t
 *, ...);

163 
nv_®loc_»£t
(
nv_®loc_t
 *);

164 
nv_®loc_fši
(
nv_®loc_t
 *);

167 
nvli¡_®loc
(
nvli¡_t
 **, 
ušt_t
, );

168 
nvli¡_ä“
(
nvli¡_t
 *);

169 
nvli¡_size
(
nvli¡_t
 *, 
size_t
 *, );

170 
nvli¡_·ck
(
nvli¡_t
 *, **, 
size_t
 *, , );

171 
nvli¡_uÅack
(*, 
size_t
, 
nvli¡_t
 **, );

172 
nvli¡_dup
(
nvli¡_t
 *,‚vlist_t **, );

173 
nvli¡_m”ge
(
nvli¡_t
 *,‚vlist_t *, );

175 
ušt_t
 
nvli¡_nvæag
(
nvli¡_t
 *);

177 
nvli¡_x®loc
(
nvli¡_t
 **, 
ušt_t
, 
nv_®loc_t
 *);

178 
nvli¡_x·ck
(
nvli¡_t
 *, **, 
size_t
 *, , 
nv_®loc_t
 *);

179 
nvli¡_xuÅack
(*, 
size_t
, 
nvli¡_t
 **, 
nv_®loc_t
 *);

180 
nvli¡_xdup
(
nvli¡_t
 *,‚vli¡_ˆ**, 
nv_®loc_t
 *);

181 
nv_®loc_t
 *
nvli¡_lookup_nv_®loc
(
nvli¡_t
 *);

183 
nvli¡_add_nv·œ
(
nvli¡_t
 *, 
nv·œ_t
 *);

184 
nvli¡_add_boÞ—n
(
nvli¡_t
 *, const *);

185 
nvli¡_add_boÞ—n_v®ue
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
);

186 
nvli¡_add_by‹
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
);

187 
nvli¡_add_št8
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
);

188 
nvli¡_add_ušt8
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
);

189 
nvli¡_add_št16
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
);

190 
nvli¡_add_ušt16
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
);

191 
nvli¡_add_št32
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
);

192 
nvli¡_add_ušt32
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
);

193 
nvli¡_add_št64
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
);

194 
nvli¡_add_ušt64
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
);

195 
nvli¡_add_¡ršg
(
nvli¡_t
 *, const *, const *);

196 
nvli¡_add_nvli¡
(
nvli¡_t
 *, const *,‚vlist_t *);

197 
nvli¡_add_boÞ—n_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
 *, 
ušt_t
);

198 
nvli¡_add_by‹_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
 *, 
ušt_t
);

199 
nvli¡_add_št8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
 *, 
ušt_t
);

200 
nvli¡_add_ušt8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
 *, 
ušt_t
);

201 
nvli¡_add_št16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
 *, 
ušt_t
);

202 
nvli¡_add_ušt16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
 *, 
ušt_t
);

203 
nvli¡_add_št32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
 *, 
ušt_t
);

204 
nvli¡_add_ušt32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
 *, 
ušt_t
);

205 
nvli¡_add_št64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
 *, 
ušt_t
);

206 
nvli¡_add_ušt64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
 *, 
ušt_t
);

207 
nvli¡_add_¡ršg_¬¿y
(
nvli¡_t
 *, cÚ¡ *, *cÚ¡ *, 
ušt_t
);

208 
nvli¡_add_nvli¡_¬¿y
(
nvli¡_t
 *, cÚ¡ *,‚vli¡_ˆ**, 
ušt_t
);

209 
nvli¡_add_h¹ime
(
nvli¡_t
 *, cÚ¡ *, 
h¹ime_t
);

210 #ià!
defšed
(
_KERNEL
)

211 
nvli¡_add_doubË
(
nvli¡_t
 *, const *, );

214 
nvli¡_»move
(
nvli¡_t
 *, cÚ¡ *, 
d©a_ty³_t
);

215 
nvli¡_»move_®l
(
nvli¡_t
 *, const *);

216 
nvli¡_»move_nv·œ
(
nvli¡_t
 *, 
nv·œ_t
 *);

218 
nvli¡_lookup_boÞ—n
(
nvli¡_t
 *, const *);

219 
nvli¡_lookup_boÞ—n_v®ue
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
 *);

220 
nvli¡_lookup_by‹
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
 *);

221 
nvli¡_lookup_št8
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
 *);

222 
nvli¡_lookup_ušt8
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
 *);

223 
nvli¡_lookup_št16
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
 *);

224 
nvli¡_lookup_ušt16
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
 *);

225 
nvli¡_lookup_št32
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
 *);

226 
nvli¡_lookup_ušt32
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
 *);

227 
nvli¡_lookup_št64
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
 *);

228 
nvli¡_lookup_ušt64
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
 *);

229 
nvli¡_lookup_¡ršg
(
nvli¡_t
 *, const *, **);

230 
nvli¡_lookup_nvli¡
(
nvli¡_t
 *, const *,‚vlist_t **);

231 
nvli¡_lookup_boÞ—n_¬¿y
(
nvli¡_t
 *, const *,

232 
boÞ—n_t
 **, 
ušt_t
 *);

233 
nvli¡_lookup_by‹_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
 **, 
ušt_t
 *);

234 
nvli¡_lookup_št8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
 **, 
ušt_t
 *);

235 
nvli¡_lookup_ušt8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
 **, 
ušt_t
 *);

236 
nvli¡_lookup_št16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
 **, 
ušt_t
 *);

237 
nvli¡_lookup_ušt16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
 **, 
ušt_t
 *);

238 
nvli¡_lookup_št32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
 **, 
ušt_t
 *);

239 
nvli¡_lookup_ušt32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
 **, 
ušt_t
 *);

240 
nvli¡_lookup_št64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
 **, 
ušt_t
 *);

241 
nvli¡_lookup_ušt64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
 **, 
ušt_t
 *);

242 
nvli¡_lookup_¡ršg_¬¿y
(
nvli¡_t
 *, cÚ¡ *, ***, 
ušt_t
 *);

243 
nvli¡_lookup_nvli¡_¬¿y
(
nvli¡_t
 *, const *,

244 
nvli¡_t
 ***, 
ušt_t
 *);

245 
nvli¡_lookup_h¹ime
(
nvli¡_t
 *, cÚ¡ *, 
h¹ime_t
 *);

246 
nvli¡_lookup_·œs
(
nvli¡_t
 *, , ...);

247 #ià!
defšed
(
_KERNEL
)

248 
nvli¡_lookup_doubË
(
nvli¡_t
 *, const *, *);

251 
nvli¡_lookup_nv·œ
(
nvli¡_t
 *, cÚ¡ *, 
nv·œ_t
 **);

252 
nvli¡_lookup_nv·œ_embedded_šdex
(
nvli¡_t
 *, cÚ¡ *, 
nv·œ_t
 **,

254 
boÞ—n_t
 
nvli¡_exi¡s
(
nvli¡_t
 *, const *);

255 
boÞ—n_t
 
nvli¡_em±y
(
nvli¡_t
 *);

258 
nv·œ_t
 *
nvli¡_Ãxt_nv·œ
(
nvli¡_t
 *,‚vpair_t *);

259 
nv·œ_t
 *
nvli¡_´ev_nv·œ
(
nvli¡_t
 *,‚vpair_t *);

260 *
nv·œ_Çme
(
nv·œ_t
 *);

261 
d©a_ty³_t
 
nv·œ_ty³
(
nv·œ_t
 *);

262 
nv·œ_ty³_is_¬¿y
(
nv·œ_t
 *);

263 
nv·œ_v®ue_boÞ—n_v®ue
(
nv·œ_t
 *, 
boÞ—n_t
 *);

264 
nv·œ_v®ue_by‹
(
nv·œ_t
 *, 
uch¬_t
 *);

265 
nv·œ_v®ue_št8
(
nv·œ_t
 *, 
št8_t
 *);

266 
nv·œ_v®ue_ušt8
(
nv·œ_t
 *, 
ušt8_t
 *);

267 
nv·œ_v®ue_št16
(
nv·œ_t
 *, 
št16_t
 *);

268 
nv·œ_v®ue_ušt16
(
nv·œ_t
 *, 
ušt16_t
 *);

269 
nv·œ_v®ue_št32
(
nv·œ_t
 *, 
št32_t
 *);

270 
nv·œ_v®ue_ušt32
(
nv·œ_t
 *, 
ušt32_t
 *);

271 
nv·œ_v®ue_št64
(
nv·œ_t
 *, 
št64_t
 *);

272 
nv·œ_v®ue_ušt64
(
nv·œ_t
 *, 
ušt64_t
 *);

273 
nv·œ_v®ue_¡ršg
(
nv·œ_t
 *, **);

274 
nv·œ_v®ue_nvli¡
(
nv·œ_t
 *, 
nvli¡_t
 **);

275 
nv·œ_v®ue_boÞ—n_¬¿y
(
nv·œ_t
 *, 
boÞ—n_t
 **, 
ušt_t
 *);

276 
nv·œ_v®ue_by‹_¬¿y
(
nv·œ_t
 *, 
uch¬_t
 **, 
ušt_t
 *);

277 
nv·œ_v®ue_št8_¬¿y
(
nv·œ_t
 *, 
št8_t
 **, 
ušt_t
 *);

278 
nv·œ_v®ue_ušt8_¬¿y
(
nv·œ_t
 *, 
ušt8_t
 **, 
ušt_t
 *);

279 
nv·œ_v®ue_št16_¬¿y
(
nv·œ_t
 *, 
št16_t
 **, 
ušt_t
 *);

280 
nv·œ_v®ue_ušt16_¬¿y
(
nv·œ_t
 *, 
ušt16_t
 **, 
ušt_t
 *);

281 
nv·œ_v®ue_št32_¬¿y
(
nv·œ_t
 *, 
št32_t
 **, 
ušt_t
 *);

282 
nv·œ_v®ue_ušt32_¬¿y
(
nv·œ_t
 *, 
ušt32_t
 **, 
ušt_t
 *);

283 
nv·œ_v®ue_št64_¬¿y
(
nv·œ_t
 *, 
št64_t
 **, 
ušt_t
 *);

284 
nv·œ_v®ue_ušt64_¬¿y
(
nv·œ_t
 *, 
ušt64_t
 **, 
ušt_t
 *);

285 
nv·œ_v®ue_¡ršg_¬¿y
(
nv·œ_t
 *, ***, 
ušt_t
 *);

286 
nv·œ_v®ue_nvli¡_¬¿y
(
nv·œ_t
 *, 
nvli¡_t
 ***, 
ušt_t
 *);

287 
nv·œ_v®ue_h¹ime
(
nv·œ_t
 *, 
h¹ime_t
 *);

288 #ià!
defšed
(
_KERNEL
)

289 
nv·œ_v®ue_doubË
(
nv·œ_t
 *, *);

292 
nvli¡_t
 *
âvli¡_®loc
();

293 
âvli¡_ä“
(
nvli¡_t
 *);

294 
size_t
 
âvli¡_size
(
nvli¡_t
 *);

295 *
âvli¡_·ck
(
nvli¡_t
 *, 
size_t
 *);

296 
âvli¡_·ck_ä“
(*, 
size_t
);

297 
nvli¡_t
 *
âvli¡_uÅack
(*, 
size_t
);

298 
nvli¡_t
 *
âvli¡_dup
(nvlist_t *);

299 
âvli¡_m”ge
(
nvli¡_t
 *,‚vlist_t *);

301 
âvli¡_add_boÞ—n
(
nvli¡_t
 *, const *);

302 
âvli¡_add_boÞ—n_v®ue
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
);

303 
âvli¡_add_by‹
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
);

304 
âvli¡_add_št8
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
);

305 
âvli¡_add_ušt8
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
);

306 
âvli¡_add_št16
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
);

307 
âvli¡_add_ušt16
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
);

308 
âvli¡_add_št32
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
);

309 
âvli¡_add_ušt32
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
);

310 
âvli¡_add_št64
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
);

311 
âvli¡_add_ušt64
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
);

312 
âvli¡_add_¡ršg
(
nvli¡_t
 *, const *, const *);

313 
âvli¡_add_nvli¡
(
nvli¡_t
 *, const *,‚vlist_t *);

314 
âvli¡_add_nv·œ
(
nvli¡_t
 *, 
nv·œ_t
 *);

315 
âvli¡_add_boÞ—n_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
boÞ—n_t
 *, 
ušt_t
);

316 
âvli¡_add_by‹_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
uch¬_t
 *, 
ušt_t
);

317 
âvli¡_add_št8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št8_t
 *, 
ušt_t
);

318 
âvli¡_add_ušt8_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt8_t
 *, 
ušt_t
);

319 
âvli¡_add_št16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št16_t
 *, 
ušt_t
);

320 
âvli¡_add_ušt16_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt16_t
 *, 
ušt_t
);

321 
âvli¡_add_št32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št32_t
 *, 
ušt_t
);

322 
âvli¡_add_ušt32_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt32_t
 *, 
ušt_t
);

323 
âvli¡_add_št64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
št64_t
 *, 
ušt_t
);

324 
âvli¡_add_ušt64_¬¿y
(
nvli¡_t
 *, cÚ¡ *, 
ušt64_t
 *, 
ušt_t
);

325 
âvli¡_add_¡ršg_¬¿y
(
nvli¡_t
 *, cÚ¡ *, * cÚ¡ *, 
ušt_t
);

326 
âvli¡_add_nvli¡_¬¿y
(
nvli¡_t
 *, cÚ¡ *,‚vli¡_ˆ**, 
ušt_t
);

328 
âvli¡_»move
(
nvli¡_t
 *, const *);

329 
âvli¡_»move_nv·œ
(
nvli¡_t
 *, 
nv·œ_t
 *);

331 
nv·œ_t
 *
âvli¡_lookup_nv·œ
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

332 
boÞ—n_t
 
âvli¡_lookup_boÞ—n
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

333 
boÞ—n_t
 
âvli¡_lookup_boÞ—n_v®ue
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

334 
uch¬_t
 
âvli¡_lookup_by‹
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

335 
št8_t
 
âvli¡_lookup_št8
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

336 
št16_t
 
âvli¡_lookup_št16
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

337 
št32_t
 
âvli¡_lookup_št32
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

338 
št64_t
 
âvli¡_lookup_št64
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

339 
ušt8_t
 
âvli¡_lookup_ušt8_t
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

340 
ušt16_t
 
âvli¡_lookup_ušt16
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

341 
ušt32_t
 
âvli¡_lookup_ušt32
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

342 
ušt64_t
 
âvli¡_lookup_ušt64
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

343 *
âvli¡_lookup_¡ršg
(
nvli¡_t
 *
nvl
, cÚ¡ *
Çme
);

344 
nvli¡_t
 *
âvli¡_lookup_nvli¡
Òvli¡_ˆ*
nvl
, cÚ¡ *
Çme
);

346 
boÞ—n_t
 
âv·œ_v®ue_boÞ—n_v®ue
(
nv·œ_t
 *
nvp
);

347 
uch¬_t
 
âv·œ_v®ue_by‹
(
nv·œ_t
 *
nvp
);

348 
št8_t
 
âv·œ_v®ue_št8
(
nv·œ_t
 *
nvp
);

349 
št16_t
 
âv·œ_v®ue_št16
(
nv·œ_t
 *
nvp
);

350 
št32_t
 
âv·œ_v®ue_št32
(
nv·œ_t
 *
nvp
);

351 
št64_t
 
âv·œ_v®ue_št64
(
nv·œ_t
 *
nvp
);

352 
ušt8_t
 
âv·œ_v®ue_ušt8_t
(
nv·œ_t
 *
nvp
);

353 
ušt16_t
 
âv·œ_v®ue_ušt16
(
nv·œ_t
 *
nvp
);

354 
ušt32_t
 
âv·œ_v®ue_ušt32
(
nv·œ_t
 *
nvp
);

355 
ušt64_t
 
âv·œ_v®ue_ušt64
(
nv·œ_t
 *
nvp
);

356 *
âv·œ_v®ue_¡ršg
(
nv·œ_t
 *
nvp
);

357 
nvli¡_t
 *
âv·œ_v®ue_nvli¡
(
nv·œ_t
 *
nvp
);

359 #ifdef 
__ýlu¥lus


	@nvpair_impl.h

27 #iâdef 
_NVPAIR_IMPL_H


28 
	#_NVPAIR_IMPL_H


	)

30 #ifdeà
__ýlu¥lus


34 
	~"nv·œ.h
"

44 
i_nvp
 
	ti_nvp_t
;

46 
	si_nvp
 {

48 
ušt64_t
 
_nvi_®ign
;

50 
i_nvp_t
 *
_nvi_Ãxt
;

51 
i_nvp_t
 *
_nvi_´ev
;

52 } 
_nvi
;

53 } 
_nvi_un
;

54 
nv·œ_t
 
nvi_nvp
;

56 
	#nvi_Ãxt
 
_nvi_un
.
_nvi
.
_nvi_Ãxt


	)

57 
	#nvi_´ev
 
_nvi_un
.
_nvi
.
_nvi_´ev


	)

60 
i_nvp_t
 *
nvp_li¡
;

61 
i_nvp_t
 *
nvp_Ï¡
;

62 
i_nvp_t
 *
nvp_cu¼
;

63 
nv_®loc_t
 *
nvp_nva
;

64 
ušt32_t
 
nvp_¡©
;

65 } 
	tnv´iv_t
;

67 #ifdef 
__ýlu¥lus


	@
1
.
0
12
311
/home/han/libnvpair/isa_defs.h
/home/han/libnvpair/libnvpair.c
/home/han/libnvpair/libnvpair.h
/home/han/libnvpair/nvpair.c
/home/han/libnvpair/nvpair.h
/home/han/libnvpair/nvpair_alloc_system.c
/home/han/libnvpair/nvpair_impl.h
/home/han/libnvpair/test/hello_nv.c
isa_defs.h
libnvpair.h
nvpair.h
nvpair_impl.h
